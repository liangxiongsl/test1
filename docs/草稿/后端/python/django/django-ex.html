<!DOCTYPE html> <html><head>
		<title>Django--ex</title>
		<base href="..\..\..\..\../">
		<meta id="root-path" root-path="..\..\..\..\../">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes, minimum-scale=1.0, maximum-scale=5.0">
		<meta charset="UTF-8">
		<meta name="description" content="obsidian-vault - Django--ex">
		<meta property="og:title" content="Django--ex">
		<meta property="og:description" content="obsidian-vault - Django--ex">
		<meta property="og:type" content="website">
		<meta property="og:url" content="docs/草稿/后端/python/django/django-ex.html">
		<meta property="og:image" content="undefined">
		<meta property="og:site_name" content="obsidian-vault">
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="lib/rss.xml"><script async="" id="webpage-script" src="lib/scripts/webpage.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script type="module" async="" id="graph-view-script" src="lib/scripts/graph-view.js"></script><script async="" id="graph-wasm-script" src="lib/scripts/graph-wasm.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="graph-render-worker-script" src="lib/scripts/graph-render-worker.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="tinycolor-script" src="lib/scripts/tinycolor.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="pixi-script" src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/7.4.0/pixi.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><script async="" id="minisearch-script" src="https://cdn.jsdelivr.net/npm/minisearch@6.3.0/dist/umd/index.min.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><link rel="icon" href="lib/media/favicon.png"><script async="" id="graph-data-script" src="lib/scripts/graph-data.js" onload="this.onload=null;this.setAttribute(&quot;loaded&quot;, &quot;true&quot;)"></script><style>body{--line-width:40em;--line-width-adaptive:40em;--file-line-width:40em;--sidebar-width:min(20em, 80vw);--collapse-arrow-size:11px;--tree-horizontal-spacing:0.6em;--tree-vertical-spacing:0.6em;--sidebar-margin:12px}.sidebar{height:100%;min-width:calc(var(--sidebar-width) + var(--divider-width-hover));max-width:calc(var(--sidebar-width) + var(--divider-width-hover));font-size:14px;z-index:10;position:relative;overflow:hidden;transition:min-width ease-in-out,max-width ease-in-out;transition-duration:.2s;contain:size}.sidebar-left{left:0}.sidebar-right{right:0}.sidebar.is-collapsed{min-width:0;max-width:0}body.floating-sidebars .sidebar{position:absolute}.sidebar-content{height:100%;min-width:calc(var(--sidebar-width) - var(--divider-width-hover));top:0;padding:var(--sidebar-margin);padding-top:4em;line-height:var(--line-height-tight);background-color:var(--background-secondary);transition:background-color,border-right,border-left,box-shadow;transition-duration:var(--color-fade-speed);transition-timing-function:ease-in-out;position:absolute;display:flex;flex-direction:column}.sidebar:not(.is-collapsed) .sidebar-content{min-width:calc(max(100%,var(--sidebar-width)) - 3px);max-width:calc(max(100%,var(--sidebar-width)) - 3px)}.sidebar-left .sidebar-content{left:0;border-top-right-radius:var(--radius-l);border-bottom-right-radius:var(--radius-l)}.sidebar-right .sidebar-content{right:0;border-top-left-radius:var(--radius-l);border-bottom-left-radius:var(--radius-l)}.sidebar:has(.sidebar-content:empty):has(.topbar-content:empty){display:none}.sidebar-topbar{height:2em;width:var(--sidebar-width);top:var(--sidebar-margin);padding-inline:var(--sidebar-margin);z-index:1;position:fixed;display:flex;align-items:center;transition:width ease-in-out;transition-duration:inherit}.sidebar.is-collapsed .sidebar-topbar{width:calc(2.3em + var(--sidebar-margin) * 2)}.sidebar .sidebar-topbar.is-collapsed{width:0}.sidebar-left .sidebar-topbar{left:0}.sidebar-right .sidebar-topbar{right:0}.topbar-content{overflow:hidden;overflow:clip;width:100%;height:100%;display:flex;align-items:center;transition:inherit}.sidebar.is-collapsed .topbar-content{width:0;transition:inherit}.clickable-icon.sidebar-collapse-icon{background-color:transparent;color:var(--icon-color-focused);padding:0!important;margin:0!important;height:100%!important;width:2.3em!important;margin-inline:0.14em!important;position:absolute}.sidebar-left .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);right:var(--sidebar-margin)}.sidebar-right .clickable-icon.sidebar-collapse-icon{transform:rotateY(180deg);left:var(--sidebar-margin)}.clickable-icon.sidebar-collapse-icon svg.svg-icon{width:100%;height:100%}.sidebar-section-header{margin:0 0 1em 0;text-transform:uppercase;letter-spacing:.06em;font-weight:600}body{transition:background-color var(--color-fade-speed) ease-in-out}.webpage-container{display:flex;flex-direction:row;height:100%;width:100%;align-items:stretch;justify-content:center}.document-container{opacity:1;flex-basis:100%;max-width:100%;width:100%;height:100%;display:flex;flex-direction:column;align-items:center;transition:opacity .2s ease-in-out;contain:inline-size}.hide{opacity:0;transition:opacity .2s ease-in-out}.document-container>.markdown-preview-view{margin:var(--sidebar-margin);margin-bottom:0;width:100%;width:-webkit-fill-available;width:-moz-available;width:fill-available;background-color:var(--background-primary);transition:background-color var(--color-fade-speed) ease-in-out;border-top-right-radius:var(--window-radius,var(--radius-m));border-top-left-radius:var(--window-radius,var(--radius-m));overflow-x:hidden!important;overflow-y:auto!important;display:flex!important;flex-direction:column!important;align-items:center!important;contain:inline-size}.document-container>.markdown-preview-view>.markdown-preview-sizer{padding-bottom:80vh!important;width:100%!important;max-width:var(--line-width)!important;flex-basis:var(--line-width)!important;transition:background-color var(--color-fade-speed) ease-in-out;contain:inline-size}.markdown-rendered img:not([width]),.view-content img:not([width]){max-width:100%;outline:0}.document-container>.view-content.embed{display:flex;padding:1em;height:100%;width:100%;align-items:center;justify-content:center}.document-container>.view-content.embed>*{max-width:100%;max-height:100%;object-fit:contain}:has(> :is(.math,table)){overflow-x:auto!important}.document-container>.view-content{overflow-x:auto;contain:content;padding:0;margin:0;height:100%}.scroll-highlight{position:absolute;width:100%;height:100%;pointer-events:none;z-index:1000;background-color:hsla(var(--color-accent-hsl),.25);opacity:0;padding:1em;inset:50%;translate:-50% -50%;border-radius:var(--radius-s)}</style><script defer="">async function loadIncludes(){if("file:"!=location.protocol){let e=document.querySelectorAll("include");for(let t=0;t<e.length;t++){let o=e[t],l=o.getAttribute("src");try{const e=await fetch(l);if(!e.ok){console.log("Could not include file: "+l),o?.remove();continue}let t=await e.text(),n=document.createRange().createContextualFragment(t),i=Array.from(n.children);for(let e of i)e.classList.add("hide"),e.style.transition="opacity 0.5s ease-in-out",setTimeout((()=>{e.classList.remove("hide")}),10);o.before(n),o.remove(),console.log("Included file: "+l)}catch(e){o?.remove(),console.log("Could not include file: "+l,e);continue}}}else{if(document.querySelectorAll("include").length>0){var e=document.createElement("div");e.id="error",e.textContent="Web server exports must be hosted on an http / web server to be viewed correctly.",e.style.position="fixed",e.style.top="50%",e.style.left="50%",e.style.transform="translate(-50%, -50%)",e.style.fontSize="1.5em",e.style.fontWeight="bold",e.style.textAlign="center",document.body.appendChild(e),document.querySelector(".document-container")?.classList.remove("hide")}}}document.addEventListener("DOMContentLoaded",(()=>{loadIncludes()}));let isFileProtocol="file:"==location.protocol;function waitLoadScripts(e,t){let o=e.map((e=>document.getElementById(e+"-script"))),l=0;!function e(){let n=o[l];l++,n&&"true"!=n.getAttribute("loaded")||l<o.length&&e(),l<o.length?n.addEventListener("load",e):t()}()}</script><link rel="stylesheet" href="lib/styles/obsidian.css"><link rel="preload" href="lib/styles/global-variable-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/global-variable-styles.css"></noscript><link rel="preload" href="lib/styles/supported-plugins.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/supported-plugins.css"></noscript><link rel="preload" href="lib/styles/main-styles.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/main-styles.css"></noscript><link rel="preload" href="lib/styles/snippets.css" as="style" onload="this.onload=null;this.rel='stylesheet'"><noscript><link rel="stylesheet" href="lib/styles/snippets.css"></noscript></head><body class="publish css-settings-manager theme-light show-inline-title show-ribbon"><script defer="">let theme=localStorage.getItem("theme")||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light");"dark"==theme?(document.body.classList.add("theme-dark"),document.body.classList.remove("theme-light")):(document.body.classList.add("theme-light"),document.body.classList.remove("theme-dark")),window.innerWidth<480?document.body.classList.add("is-phone"):window.innerWidth<768?document.body.classList.add("is-tablet"):window.innerWidth<1024?document.body.classList.add("is-small-screen"):document.body.classList.add("is-large-screen")</script><div class="webpage-container workspace"><div class="sidebar-left sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"><label class="theme-toggle-container" for="theme_toggle"><input class="theme-toggle-input" type="checkbox" id="theme_toggle"><div class="toggle-background"></div></label></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="search-input-container"><input enterkeyhint="search" type="search" spellcheck="false" placeholder="Search..."><div class="search-input-clear-button" aria-label="Clear search"></div></div><include src="lib/html/file-tree.html"></include></div><script defer="">let ls = document.querySelector(".sidebar-left"); ls.classList.add("is-collapsed"); if (window.innerWidth > 768) ls.classList.remove("is-collapsed"); ls.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-left-width"));</script></div><div class="document-container markdown-reading-view hide"><div class="markdown-preview-view markdown-rendered allow-fold-headings allow-fold-lists is-readable-line-width"><style id="MJX-CHTML-styles">mjx-c.mjx-c222B.TEX-S2::before{padding:1.36em .944em .862em 0;content:"∫"}mjx-c.mjx-c7B.TEX-S2::before{padding:1.15em .667em .649em 0;content:"{"}mjx-c.mjx-c7D.TEX-S2::before{padding:1.15em .667em .649em 0;content:"}"}mjx-c.mjx-c20D7.TEX-V::before{padding:.714em .5em 0 0;content:"→"}mjx-c.mjx-c1D6FE.TEX-I::before{padding:.441em .543em .216em 0;content:"γ"}mjx-c.mjx-c1D417.TEX-B::before{padding:.686em .869em 0 0;content:"X"}mjx-c.mjx-c2D9.TEX-B::before{padding:.695em .575em 0 0;content:"˙"}mjx-c.mjx-c1D420.TEX-B::before{padding:.455em .575em .201em 0;content:"g"}mjx-c.mjx-c1D41D.TEX-B::before{padding:.694em .639em .006em 0;content:"d"}mjx-c.mjx-c211A.TEX-A::before{padding:.701em .778em .181em 0;content:"Q"}mjx-c.mjx-c1D402.TEX-B::before{padding:.697em .831em .011em 0;content:"C"}mjx-c.mjx-c1D410.TEX-B::before{padding:.696em .864em .193em 0;content:"Q"}mjx-c.mjx-c2119.TEX-A::before{padding:.683em .611em 0 0;content:"P"}mjx-c.mjx-c2223::before{padding:.75em .278em .249em 0;content:"∣"}mjx-c.mjx-cA8::before{padding:.669em .5em 0 0;content:"¨"}mjx-c.mjx-c1D713.TEX-I::before{padding:.694em .651em .205em 0;content:"ψ"}mjx-c.mjx-c2B.TEX-B::before{padding:.633em .894em .131em 0;content:"+"}mjx-c.mjx-c1D7D0.TEX-B::before{padding:.654em .575em 0 0;content:"2"}mjx-c.mjx-c2034::before{padding:.56em .825em 0 0;content:"′′′"}mjx-c.mjx-c221A.TEX-S4::before{padding:1.75em 1.02em 1.25em 0;content:"√"}mjx-mroot{display:inline-block;text-align:left}mjx-root{display:inline-block;white-space:nowrap}mjx-surd{display:inline-block;vertical-align:top}mjx-sqrt{display:inline-block;padding-top:.07em}mjx-sqrt>mjx-box{border-top:.07em solid}mjx-sqrt.mjx-tall>mjx-box{padding-left:.3em;margin-left:-.3em}mjx-c.mjx-c2DA::before{padding:.715em .5em 0 0;content:"˚"}mjx-c.mjx-c1D43E.TEX-I::before{padding:.683em .889em 0 0;content:"K"}mjx-c.mjx-c7B.TEX-S1::before{padding:.85em .583em .349em 0;content:"{"}mjx-c.mjx-c7D.TEX-S1::before{padding:.85em .583em .349em 0;content:"}"}mjx-c.mjx-c2D9::before{padding:.669em .5em 0 0;content:"˙"}mjx-c.mjx-cB0::before{padding:.715em .5em 0 0;content:"°"}mjx-c.mjx-c1D41F.TEX-B::before{padding:.7em .452em 0 0;content:"f"}mjx-c.mjx-c28.TEX-B::before{padding:.75em .447em .249em 0;content:"("}mjx-c.mjx-c2212.TEX-B::before{padding:.281em .894em 0 0;content:"−"}mjx-c.mjx-c50.TEX-C::before{padding:.683em .733em .057em 0;content:"P"}mjx-c.mjx-c3A3::before{padding:.683em .722em 0 0;content:"Σ"}mjx-c.mjx-c1D42A.TEX-B::before{padding:.45em .607em .194em 0;content:"q"}mjx-c.mjx-c1D411.TEX-B::before{padding:.686em .862em .011em 0;content:"R"}mjx-c.mjx-c29.TEX-B::before{padding:.75em .447em .249em 0;content:")"}mjx-c.mjx-cAC::before{padding:.356em .667em 0 0;content:"¬"}mjx-c.mjx-c21CC.TEX-A::before{padding:.514em 1em .014em 0;content:"⇌"}mjx-c.mjx-c27F6::before{padding:.511em 1.638em .011em 0;content:"⟶"}mjx-c.mjx-c45.TEX-C::before{padding:.705em .564em .022em 0;content:"E"}mjx-c.mjx-c1D432.TEX-B::before{padding:.444em .607em .2em 0;content:"y"}mjx-c.mjx-c4E::before{padding:.683em .75em 0 0;content:"N"}mjx-c.mjx-c75::before{padding:.442em .556em .011em 0;content:"u"}mjx-c.mjx-c1D42D.TEX-B::before{padding:.635em .447em .005em 0;content:"t"}mjx-c.mjx-c43::before{padding:.705em .722em .021em 0;content:"C"}mjx-c.mjx-c42.TEX-C::before{padding:.705em .657em .022em 0;content:"B"}mjx-c.mjx-c2C.TEX-B::before{padding:.171em .319em .194em 0;content:","}mjx-c.mjx-c6B::before{padding:.694em .528em 0 0;content:"k"}mjx-c.mjx-c22A5::before{padding:.668em .778em 0 0;content:"⊥"}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c5D.TEX-B::before{padding:.75em .319em .25em 0;content:"]"}mjx-c.mjx-c43.TEX-C::before{padding:.705em .527em .025em 0;content:"C"}mjx-c.mjx-c2C.TEX-MI::before{padding:.121em .307em .194em 0;content:","}mjx-c.mjx-c5B.TEX-S1::before{padding:.85em .417em .349em 0;content:"["}mjx-c.mjx-c5D.TEX-S1::before{padding:.85em .417em .349em 0;content:"]"}mjx-c.mjx-c1D41E.TEX-B::before{padding:.452em .527em .006em 0;content:"e"}mjx-c.mjx-c22F1::before{padding:1.52em 1.282em 0 0;content:"⋱"}mjx-c.mjx-c7D.TEX-S3::before{padding:1.45em .75em .949em 0;content:"}"}mjx-c.mjx-c1D43C.TEX-I::before{padding:.683em .504em 0 0;content:"I"}mjx-c.mjx-c1D408.TEX-B::before{padding:.686em .436em 0 0;content:"I"}mjx-c.mjx-c1D448.TEX-I::before{padding:.683em .767em .022em 0;content:"U"}mjx-c.mjx-c1D400.TEX-B::before{padding:.698em .869em 0 0;content:"A"}mjx-c.mjx-c1D431.TEX-B::before{padding:.444em .607em 0 0;content:"x"}mjx-c.mjx-c1D429.TEX-B::before{padding:.45em .639em .194em 0;content:"p"}mjx-c.mjx-c1D7CE.TEX-B::before{padding:.654em .575em .01em 0;content:"0"}mjx-c.mjx-c1D405.TEX-B::before{padding:.68em .724em 0 0;content:"F"}mjx-c.mjx-c1D403.TEX-B::before{padding:.686em .882em 0 0;content:"D"}mjx-c.mjx-c5B.TEX-S2::before{padding:1.15em .472em .649em 0;content:"["}mjx-c.mjx-c5D.TEX-S2::before{padding:1.15em .472em .649em 0;content:"]"}mjx-c.mjx-c1D427.TEX-B::before{padding:.45em .639em 0 0;content:"n"}mjx-c.mjx-c1D412.TEX-B::before{padding:.697em .639em .011em 0;content:"S"}mjx-c.mjx-c1D41C.TEX-B::before{padding:.453em .511em .006em 0;content:"c"}mjx-c.mjx-c1D425.TEX-B::before{padding:.694em .319em 0 0;content:"l"}mjx-c.mjx-c222C.TEX-S1::before{padding:.805em .957em .306em 0;content:"∬"}mjx-c.mjx-c1D41A.TEX-B::before{padding:.453em .559em .006em 0;content:"a"}mjx-c.mjx-c1D41B.TEX-B::before{padding:.694em .639em .006em 0;content:"b"}mjx-c.mjx-c1D422.TEX-B::before{padding:.695em .319em 0 0;content:"i"}mjx-c.mjx-c1D423.TEX-B::before{padding:.695em .351em .2em 0;content:"j"}mjx-c.mjx-c1D424.TEX-B::before{padding:.694em .607em 0 0;content:"k"}mjx-c.mjx-c1D70C.TEX-I::before{padding:.442em .517em .216em 0;content:"ρ"}mjx-c.mjx-c1D719.TEX-I::before{padding:.694em .596em .205em 0;content:"ϕ"}mjx-c.mjx-c2DC.TEX-S1::before{padding:.722em .556em 0 0;content:"˜"}mjx-c.mjx-c222D.TEX-S1::before{padding:.805em 1.304em .306em 0;content:"∭"}mjx-c.mjx-c2DC::before{padding:.668em .5em 0 0;content:"˜"}mjx-c.mjx-c7B.TEX-S4::before{padding:1.75em .806em 1.249em 0;content:"{"}mjx-c.mjx-c1D42E.TEX-B::before{padding:.45em .639em .006em 0;content:"u"}mjx-c.mjx-c2207::before{padding:.683em .833em .033em 0;content:"∇"}mjx-stretchy-v.mjx-c2016 mjx-ext mjx-c::before{content:"∥";width:.556em}mjx-c.mjx-c27E8::before{padding:.75em .389em .25em 0;content:"⟨"}mjx-c.mjx-c27E9::before{padding:.75em .389em .25em 0;content:"⟩"}mjx-c.mjx-c1D705.TEX-I::before{padding:.442em .576em .011em 0;content:"κ"}mjx-c.mjx-c1D42C.TEX-B::before{padding:.453em .454em .006em 0;content:"s"}mjx-c.mjx-c1D401.TEX-B::before{padding:.686em .818em 0 0;content:"B"}mjx-c.mjx-c1D40D.TEX-B::before{padding:.686em .9em 0 0;content:"N"}mjx-stretchy-h.mjx-c2192 mjx-ext mjx-c::before{content:"−";padding:.583em 0 .082em}mjx-stretchy-h.mjx-c2192 mjx-end mjx-c::before{content:"→";padding:.583em 0 .082em}mjx-c.mjx-c1D43D.TEX-I::before{padding:.683em .633em .022em 0;content:"J"}mjx-c.mjx-c2211.TEX-S2::before{padding:.95em 1.444em .45em 0;content:"∑"}mjx-c.mjx-c2033::before{padding:.56em .55em 0 0;content:"′′"}mjx-c.mjx-c22EE::before{padding:1.3em .278em .03em 0;content:"⋮"}mjx-c.mjx-c2033::before{padding:.56em .55em 0 0;content:"′′"}mjx-c.mjx-c2225::before{padding:.75em .5em .25em 0;content:"∥"}mjx-c.mjx-c221A.TEX-S3::before{padding:1.45em 1.02em .95em 0;content:"√"}mjx-c.mjx-c1D42B.TEX-B::before{padding:.45em .474em 0 0;content:"r"}mjx-c.mjx-c1D42F.TEX-B::before{padding:.444em .607em 0 0;content:"v"}mjx-c.mjx-cB1::before{padding:.666em .778em 0 0;content:"±"}mjx-c.mjx-c1D45E.TEX-I::before{padding:.442em .46em .194em 0;content:"q"}mjx-c.mjx-c221A.TEX-S2::before{padding:1.15em 1.02em .65em 0;content:"√"}mjx-c.mjx-c27F9::before{padding:.525em 1.638em .024em 0;content:"⟹"}mjx-c.mjx-c2224.TEX-A::before{padding:.75em .297em .252em 0;content:"∤"}.mjx-stretched mjx-c.mjx-c2013::before{content:"–"}mjx-stretchy-h.mjx-c2013 mjx-ext mjx-c::before{content:"–";padding:.285em 0 0}mjx-c.mjx-c2217::before{padding:.465em .5em 0 0;content:"∗"}mjx-c.mjx-c1D70B.TEX-I::before{padding:.431em .57em .011em 0;content:"π"}mjx-c.mjx-c2013::before{padding:.285em .5em 0 0;content:"–"}mjx-stretchy-v.mjx-c7C mjx-ext mjx-c::before{content:"∣";width:.333em}mjx-c.mjx-c394::before{padding:.716em .833em 0 0;content:"Δ"}mjx-c.mjx-c1D444.TEX-I::before{padding:.704em .791em .194em 0;content:"Q"}mjx-c.mjx-c2218::before{padding:.444em .5em 0 0;content:"∘"}mjx-stretchy-v.mjx-c5B mjx-beg mjx-c::before{content:"⎡";padding:1.154em .667em .645em 0}mjx-stretchy-v.mjx-c5B mjx-ext mjx-c::before{content:"⎢";width:.667em}mjx-stretchy-v.mjx-c5B mjx-end mjx-c::before{content:"⎣";padding:1.155em .667em .644em 0}mjx-stretchy-v.mjx-c5B>mjx-end{margin-top:-1.799em}mjx-stretchy-v.mjx-c5B>mjx-ext{border-top-width:1.769em;border-bottom-width:1.769em}mjx-stretchy-v.mjx-c5D mjx-beg mjx-c::before{content:"⎤";padding:1.154em .667em .645em 0}mjx-stretchy-v.mjx-c5D mjx-ext mjx-c::before{content:"⎥";width:.667em}mjx-stretchy-v.mjx-c5D mjx-end mjx-c::before{content:"⎦";padding:1.155em .667em .644em 0}mjx-stretchy-v.mjx-c5D>mjx-end{margin-top:-1.799em}mjx-stretchy-v.mjx-c5D>mjx-ext{border-top-width:1.769em;border-bottom-width:1.769em}mjx-c.mjx-c1D703.TEX-I::before{padding:.705em .469em .01em 0;content:"θ"}mjx-c.mjx-c5E::before{padding:.694em .5em 0 0;content:"^"}mjx-c.mjx-c1D708.TEX-I::before{padding:.442em .53em 0 0;content:"ν"}mjx-c.mjx-c1D715::before{padding:.715em .566em .022em 0;content:"∂"}mjx-c.mjx-c5B.TEX-S3::before{padding:1.45em .528em .949em 0;content:"["}mjx-c.mjx-c5D.TEX-S3::before{padding:1.45em .528em .949em 0;content:"]"}mjx-c.mjx-cAF::before{padding:.59em .5em 0 0;content:"¯"}mjx-c.mjx-c223C::before{padding:.367em .778em 0 0;content:"∼"}mjx-c.mjx-c5B.TEX-S4::before{padding:1.75em .583em 1.249em 0;content:"["}mjx-c.mjx-c5D.TEX-S4::before{padding:1.75em .583em 1.249em 0;content:"]"}mjx-c.mjx-c3B::before{padding:.43em .278em .194em 0;content:";"}mjx-c.mjx-c1D6FC.TEX-I::before{padding:.442em .64em .011em 0;content:"α"}mjx-c.mjx-c1D6FD.TEX-I::before{padding:.705em .566em .194em 0;content:"β"}mjx-c.mjx-c28.TEX-S1::before{padding:.85em .458em .349em 0;content:"("}mjx-c.mjx-c29.TEX-S1::before{padding:.85em .458em .349em 0;content:")"}mjx-c.mjx-c220F.TEX-S1::before{padding:.75em .944em .25em 0;content:"∏"}mjx-c.mjx-c1D70F.TEX-I::before{padding:.431em .517em .013em 0;content:"τ"}mjx-c.mjx-c1D6FF.TEX-I::before{padding:.717em .444em .01em 0;content:"δ"}mjx-c.mjx-c1D439.TEX-I::before{padding:.68em .749em 0 0;content:"F"}mjx-msqrt{display:inline-block;text-align:left}mjx-root{display:inline-block;white-space:nowrap}mjx-surd{display:inline-block;vertical-align:top}mjx-sqrt{display:inline-block;padding-top:.07em}mjx-sqrt>mjx-box{border-top:.07em solid}mjx-sqrt.mjx-tall>mjx-box{padding-left:.3em;margin-left:-.3em}mjx-mspace{display:inline-block;text-align:left}mjx-c.mjx-c1D707.TEX-I::before{padding:.442em .603em .216em 0;content:"μ"}mjx-c.mjx-c1D70E.TEX-I::before{padding:.431em .571em .011em 0;content:"σ"}mjx-c.mjx-c221A::before{padding:.8em .853em .2em 0;content:"√"}mjx-c.mjx-c221A.TEX-S1::before{padding:.85em 1.02em .35em 0;content:"√"}mjx-c.mjx-c1D716.TEX-I::before{padding:.431em .406em .011em 0;content:"ϵ"}mjx-c.mjx-c27FA::before{padding:.525em 1.858em .024em 0;content:"⟺"}mjx-c.mjx-c28.TEX-S2::before{padding:1.15em .597em .649em 0;content:"("}mjx-c.mjx-c29.TEX-S2::before{padding:1.15em .597em .649em 0;content:")"}mjx-c.mjx-c2248::before{padding:.483em .778em 0 0;content:"≈"}mjx-c.mjx-c3A6::before{padding:.683em .722em 0 0;content:"Φ"}mjx-c.mjx-c1D440.TEX-I::before{padding:.683em 1.051em 0 0;content:"M"}mjx-c.mjx-c222B.TEX-S1::before{padding:.805em .61em .306em 0;content:"∫"}mjx-c.mjx-c2026::before{padding:.12em 1.172em 0 0;content:"…"}mjx-mover{display:inline-block;text-align:left}mjx-mover:not([limits=false]){padding-top:.1em}mjx-mover:not([limits=false])>*{display:block;text-align:left}mjx-c.mjx-c1D44B.TEX-I::before{padding:.683em .852em 0 0;content:"X"}mjx-c.mjx-c1D44C.TEX-I::before{padding:.683em .763em 0 0;content:"Y"}mjx-c.mjx-c1D466.TEX-I::before{padding:.442em .49em .205em 0;content:"y"}mjx-c.mjx-c76::before{padding:.431em .528em .011em 0;content:"v"}mjx-c.mjx-c1D706.TEX-I::before{padding:.694em .583em .012em 0;content:"λ"}mjx-c.mjx-c1D44D.TEX-I::before{padding:.683em .723em 0 0;content:"Z"}mjx-c.mjx-c1D467.TEX-I::before{padding:.442em .465em .011em 0;content:"z"}mjx-c.mjx-c7E::before{padding:.318em .5em 0 0;content:"~"}mjx-c.mjx-c22C3.TEX-S1::before{padding:.75em .833em .249em 0;content:"⋃"}mjx-c.mjx-c3A9::before{padding:.704em .722em 0 0;content:"Ω"}mjx-c.mjx-c22C2.TEX-S1::before{padding:.75em .833em .249em 0;content:"⋂"}mjx-c.mjx-c25FC.TEX-A::before{padding:.689em .778em 0 0;content:"■"}mjx-c.mjx-c1D435.TEX-I::before{padding:.683em .759em 0 0;content:"B"}mjx-c.mjx-c222A::before{padding:.598em .667em .022em 0;content:"∪"}mjx-c.mjx-c28.TEX-S3::before{padding:1.45em .736em .949em 0;content:"("}mjx-c.mjx-c29.TEX-S3::before{padding:1.45em .736em .949em 0;content:")"}mjx-c.mjx-c28.TEX-S4::before{padding:1.75em .792em 1.249em 0;content:"("}mjx-c.mjx-c29.TEX-S4::before{padding:1.75em .792em 1.249em 0;content:")"}mjx-mfrac{display:inline-block;text-align:left}mjx-frac{display:inline-block;vertical-align:.17em;padding:0 .22em}mjx-frac[type="d"]{vertical-align:.04em}mjx-frac[delims]{padding:0 .1em}mjx-frac[atop]{padding:0 .12em}mjx-frac[atop][delims]{padding:0}mjx-dtable{display:inline-table;width:100%}mjx-dtable>*{font-size:2000%}mjx-dbox{display:block;font-size:5%}mjx-num{display:block;text-align:center}mjx-den{display:block;text-align:center}mjx-mfrac[bevelled]>mjx-num{display:inline-block}mjx-mfrac[bevelled]>mjx-den{display:inline-block}mjx-den[align=right],mjx-num[align=right]{text-align:right}mjx-den[align=left],mjx-num[align=left]{text-align:left}mjx-nstrut{display:inline-block;height:.054em;width:0;vertical-align:-.054em}mjx-nstrut[type="d"]{height:.217em;vertical-align:-.217em}mjx-dstrut{display:inline-block;height:.505em;width:0}mjx-dstrut[type="d"]{height:.726em}mjx-line{display:block;box-sizing:border-box;min-height:1px;height:.06em;border-top:.06em solid;margin:.06em -.1em;overflow:hidden}mjx-line[type="d"]{margin:.18em -.1em}mjx-c.mjx-c21::before{padding:.716em .278em 0 0;content:"!"}mjx-c.mjx-cA0::before{padding:0 .25em 0 0;content:" "}mjx-c.mjx-c2115.TEX-A::before{padding:.683em .722em .02em 0;content:"N"}mjx-c.mjx-c1D454.TEX-I::before{padding:.442em .477em .205em 0;content:"g"}mjx-c.mjx-c398::before{padding:.705em .778em .022em 0;content:"Θ"}mjx-mtext{display:inline-block;text-align:left}mjx-msub{display:inline-block;text-align:left}mjx-mrow{display:inline-block;text-align:left}mjx-mtable{display:inline-block;text-align:center;vertical-align:.25em;position:relative;box-sizing:border-box;border-spacing:0px;border-collapse:collapse}mjx-mstyle[size="s"] mjx-mtable{vertical-align:.354em}mjx-labels{position:absolute;left:0;top:0}mjx-table{display:inline-block;vertical-align:-.5ex;box-sizing:border-box}mjx-table>mjx-itable{vertical-align:middle;text-align:left;box-sizing:border-box}mjx-labels>mjx-itable{position:absolute;top:0}mjx-mtable[justify=left]{text-align:left}mjx-mtable[justify=right]{text-align:right}mjx-mtable[justify=left][side=left]{padding-right:0!important}mjx-mtable[justify=left][side=right]{padding-left:0!important}mjx-mtable[justify=right][side=left]{padding-right:0!important}mjx-mtable[justify=right][side=right]{padding-left:0!important}mjx-mtable[align]{vertical-align:baseline}mjx-mtable[align=top]>mjx-table{vertical-align:top}mjx-mtable[align=bottom]>mjx-table{vertical-align:bottom}mjx-mtable[side=right] mjx-labels{min-width:100%}mjx-mtr{display:table-row;text-align:left}mjx-mtr[rowalign=top]>mjx-mtd{vertical-align:top}mjx-mtr[rowalign=center]>mjx-mtd{vertical-align:middle}mjx-mtr[rowalign=bottom]>mjx-mtd{vertical-align:bottom}mjx-mtr[rowalign=baseline]>mjx-mtd{vertical-align:baseline}mjx-mtr[rowalign=axis]>mjx-mtd{vertical-align:.25em}mjx-mtd{display:table-cell;text-align:center;padding:.215em .4em}mjx-mtd:first-child{padding-left:0}mjx-mtd:last-child{padding-right:0}mjx-mtable>*>mjx-itable>:first-child>mjx-mtd{padding-top:0}mjx-mtable>*>mjx-itable>:last-child>mjx-mtd{padding-bottom:0}mjx-tstrut{display:inline-block;height:1em;vertical-align:-.25em}mjx-labels[align=left]>mjx-mtr>mjx-mtd{text-align:left}mjx-labels[align=right]>mjx-mtr>mjx-mtd{text-align:right}mjx-mtd[extra]{padding:0}mjx-mtd[rowalign=top]{vertical-align:top}mjx-mtd[rowalign=center]{vertical-align:middle}mjx-mtd[rowalign=bottom]{vertical-align:bottom}mjx-mtd[rowalign=baseline]{vertical-align:baseline}mjx-mtd[rowalign=axis]{vertical-align:.25em}mjx-munder{display:inline-block;text-align:left}mjx-over{text-align:left}mjx-munder:not([limits=false]){display:inline-table}mjx-munder>mjx-row{text-align:left}mjx-under{padding-bottom:.1em}mjx-munderover{display:inline-block;text-align:left}mjx-munderover:not([limits=false]){padding-top:.1em}mjx-munderover:not([limits=false])>*{display:block}mjx-msubsup{display:inline-block;text-align:left}mjx-script{display:inline-block;padding-right:.05em;padding-left:.033em}mjx-script>mjx-spacer{display:block}mjx-stretchy-v.mjx-c7B mjx-beg mjx-c::before{content:"⎧";padding:.899em .889em .01em 0}mjx-stretchy-v.mjx-c7B mjx-ext mjx-c::before{content:"⎪";width:.889em}mjx-stretchy-v.mjx-c7B mjx-end mjx-c::before{content:"⎩";padding:.01em .889em .899em 0}mjx-stretchy-v.mjx-c7B mjx-mid mjx-c::before{content:"⎨";padding:1.16em .889em .66em 0}mjx-stretchy-v.mjx-c7B>mjx-mid{margin-top:-.91em;margin-bottom:-.91em}mjx-stretchy-v.mjx-c7B>mjx-end{margin-top:-.909em}mjx-stretchy-v.mjx-c7B>mjx-ext{height:50%;border-top-width:.879em;border-bottom-width:.879em}mjx-c.mjx-c44::before{padding:.683em .764em 0 0;content:"D"}mjx-c.mjx-c52::before{padding:.683em .736em .022em 0;content:"R"}mjx-c.mjx-c3D::before{padding:.583em .778em .082em 0;content:"="}mjx-c.mjx-c50::before{padding:.683em .681em 0 0;content:"P"}mjx-c.mjx-c53::before{padding:.705em .556em .022em 0;content:"S"}mjx-c.mjx-c2200::before{padding:.694em .556em .022em 0;content:"∀"}mjx-c.mjx-c1D465.TEX-I::before{padding:.442em .572em .011em 0;content:"x"}mjx-c.mjx-c2208::before{padding:.54em .667em .04em 0;content:"∈"}mjx-c.mjx-c2C::before{padding:.121em .278em .194em 0;content:","}mjx-c.mjx-c2203::before{padding:.694em .556em 0 0;content:"∃"}mjx-c.mjx-c1D451.TEX-I::before{padding:.694em .52em .01em 0;content:"d"}mjx-c.mjx-c2282::before{padding:.54em .778em .04em 0;content:"⊂"}mjx-c.mjx-c1D45F.TEX-I::before{padding:.442em .451em .011em 0;content:"r"}mjx-c.mjx-c1D45D.TEX-I::before{padding:.442em .503em .194em 0;content:"p"}mjx-c.mjx-c7B::before{padding:.75em .5em .25em 0;content:"{"}mjx-c.mjx-c7D::before{padding:.75em .5em .25em 0;content:"}"}mjx-c.mjx-c1D437.TEX-I::before{padding:.683em .828em 0 0;content:"D"}mjx-c.mjx-c1D446.TEX-I::before{padding:.705em .645em .022em 0;content:"S"}mjx-c.mjx-c1D445.TEX-I::before{padding:.683em .759em .021em 0;content:"R"}mjx-c.mjx-c70::before{padding:.442em .556em .194em 0;content:"p"}mjx-c.mjx-c72::before{padding:.442em .392em 0 0;content:"r"}mjx-c.mjx-c69::before{padding:.669em .278em 0 0;content:"i"}mjx-c.mjx-c6F::before{padding:.448em .5em .01em 0;content:"o"}mjx-c.mjx-c1D462.TEX-I::before{padding:.442em .572em .011em 0;content:"u"}mjx-c.mjx-c6E::before{padding:.442em .556em 0 0;content:"n"}mjx-c.mjx-c65::before{padding:.448em .444em .011em 0;content:"e"}mjx-c.mjx-c78::before{padding:.431em .528em 0 0;content:"x"}mjx-c.mjx-c74::before{padding:.615em .389em .01em 0;content:"t"}mjx-c.mjx-c1D456.TEX-I::before{padding:.661em .345em .011em 0;content:"i"}mjx-c.mjx-c2E::before{padding:.12em .278em 0 0;content:"."}mjx-c.mjx-c1D45B.TEX-I::before{padding:.442em .6em .011em 0;content:"n"}mjx-c.mjx-c1D43F.TEX-I::before{padding:.683em .681em 0 0;content:"L"}mjx-c.mjx-c1D436.TEX-I::before{padding:.705em .76em .022em 0;content:"C"}mjx-c.mjx-c1D44E.TEX-I::before{padding:.441em .529em .01em 0;content:"a"}mjx-c.mjx-c2B::before{padding:.583em .778em .082em 0;content:"+"}mjx-c.mjx-c1D450.TEX-I::before{padding:.442em .433em .011em 0;content:"c"}mjx-c.mjx-c1D453.TEX-I::before{padding:.705em .55em .205em 0;content:"f"}mjx-c.mjx-c1D45C.TEX-I::before{padding:.441em .485em .011em 0;content:"o"}mjx-c.mjx-c1D441.TEX-I::before{padding:.683em .888em 0 0;content:"N"}mjx-c.mjx-c25::before{padding:.75em .833em .056em 0;content:"%"}mjx-c.mjx-c7B.TEX-S3::before{padding:1.45em .75em .949em 0;content:"{"}mjx-c.mjx-c221E::before{padding:.442em 1em .011em 0;content:"∞"}mjx-c.mjx-c1D44F.TEX-I::before{padding:.694em .429em .011em 0;content:"b"}mjx-c.mjx-c1D458.TEX-I::before{padding:.694em .521em .011em 0;content:"k"}mjx-c.mjx-c6D::before{padding:.442em .833em 0 0;content:"m"}mjx-c.mjx-c61::before{padding:.448em .5em .011em 0;content:"a"}mjx-c.mjx-c1D45A.TEX-I::before{padding:.442em .878em .011em 0;content:"m"}mjx-c.mjx-c3C::before{padding:.54em .778em .04em 0;content:"<"}mjx-c.mjx-c1D457.TEX-I::before{padding:.661em .412em .204em 0;content:"j"}mjx-c.mjx-c1D459.TEX-I::before{padding:.694em .298em .011em 0;content:"l"}mjx-c.mjx-c5B::before{padding:.75em .278em .25em 0;content:"["}mjx-c.mjx-c210E.TEX-I::before{padding:.694em .576em .011em 0;content:"h"}mjx-c.mjx-c5D::before{padding:.75em .278em .25em 0;content:"]"}mjx-c.mjx-cD7::before{padding:.491em .778em 0 0;content:"×"}mjx-c.mjx-c2265::before{padding:.636em .778em .138em 0;content:"≥"}mjx-c.mjx-c1D447.TEX-I::before{padding:.677em .704em 0 0;content:"T"}mjx-c.mjx-c22EF::before{padding:.31em 1.172em 0 0;content:"⋯"}mjx-c.mjx-c64::before{padding:.694em .556em .011em 0;content:"d"}mjx-c.mjx-c67::before{padding:.453em .5em .206em 0;content:"g"}mjx-c.mjx-c2061::before{padding:0;content:""}mjx-c.mjx-c1D463.TEX-I::before{padding:.443em .485em .011em 0;content:"v"}mjx-c.mjx-c77::before{padding:.431em .722em .011em 0;content:"w"}mjx-c.mjx-c6C::before{padding:.694em .278em 0 0;content:"l"}mjx-c.mjx-c66::before{padding:.705em .372em 0 0;content:"f"}mjx-c.mjx-c2209::before{padding:.716em .667em .215em 0;content:"∉"}mjx-c.mjx-c2260::before{padding:.716em .778em .215em 0;content:"≠"}mjx-c.mjx-c73::before{padding:.448em .394em .011em 0;content:"s"}mjx-c.mjx-c62::before{padding:.694em .556em .011em 0;content:"b"}mjx-c.mjx-c63::before{padding:.448em .444em .011em 0;content:"c"}mjx-c.mjx-c68::before{padding:.694em .556em 0 0;content:"h"}mjx-c.mjx-c2205::before{padding:.772em .5em .078em 0;content:"∅"}mjx-c.mjx-c7C::before{padding:.75em .278em .249em 0;content:"|"}mjx-c.mjx-c1D43A.TEX-I::before{padding:.705em .786em .022em 0;content:"G"}mjx-c.mjx-c1D449.TEX-I::before{padding:.683em .769em .022em 0;content:"V"}mjx-c.mjx-c1D438.TEX-I::before{padding:.68em .764em 0 0;content:"E"}mjx-c.mjx-c1D44A.TEX-I::before{padding:.683em 1.048em .022em 0;content:"W"}mjx-c.mjx-c1D443.TEX-I::before{padding:.683em .751em 0 0;content:"P"}mjx-c.mjx-c2211.TEX-S1::before{padding:.75em 1.056em .25em 0;content:"∑"}mjx-c.mjx-c2264::before{padding:.636em .778em .138em 0;content:"≤"}mjx-c.mjx-c2204::before{padding:.716em .556em .215em 0;content:"∄"}mjx-c.mjx-c4C::before{padding:.683em .625em 0 0;content:"L"}mjx-c.mjx-c2308::before{padding:.75em .444em .25em 0;content:"⌈"}mjx-c.mjx-c2309::before{padding:.75em .444em .25em 0;content:"⌉"}mjx-c.mjx-c230A::before{padding:.75em .444em .25em 0;content:"⌊"}mjx-c.mjx-c230B::before{padding:.75em .444em .25em 0;content:"⌋"}mjx-c.mjx-c1D430.TEX-B::before{padding:.444em .831em 0 0;content:"w"}mjx-c.mjx-c1D464.TEX-I::before{padding:.443em .716em .011em 0;content:"w"}mjx-c.mjx-c1D413.TEX-B::before{padding:.675em .8em 0 0;content:"T"}mjx-c.mjx-c3D.TEX-B::before{padding:.393em .894em 0 0;content:"="}mjx-c.mjx-c1D7CF.TEX-B::before{padding:.655em .575em 0 0;content:"1"}mjx-c.mjx-c2190::before{padding:.511em 1em .011em 0;content:"←"}mjx-c.mjx-c56::before{padding:.683em .75em .022em 0;content:"V"}mjx-c.mjx-c45::before{padding:.68em .681em 0 0;content:"E"}mjx-c.mjx-c6A::before{padding:.669em .306em .205em 0;content:"j"}mjx-c.mjx-c1D460.TEX-I::before{padding:.442em .469em .01em 0;content:"s"}mjx-c.mjx-c2192::before{padding:.511em 1em .011em 0;content:"→"}mjx-c.mjx-c2032::before{padding:.56em .275em 0 0;content:"′"}mjx-c.mjx-c2229::before{padding:.598em .667em .022em 0;content:"∩"}mjx-c.mjx-c49::before{padding:.683em .361em 0 0;content:"I"}mjx-c.mjx-c1D434.TEX-I::before{padding:.716em .75em 0 0;content:"A"}mjx-c.mjx-c3A::before{padding:.43em .278em 0 0;content:":"}mjx-c.mjx-c211D.TEX-A::before{padding:.683em .722em 0 0;content:"R"}mjx-c.mjx-c1D43B.TEX-I::before{padding:.683em .888em 0 0;content:"H"}mjx-c.mjx-c1D53D.TEX-A::before{padding:.683em .611em 0 0;content:"F"}mjx-c.mjx-c2124.TEX-A::before{padding:.683em .667em 0 0;content:"Z"}mjx-c.mjx-c21A6::before{padding:.511em 1em .011em 0;content:"↦"}mjx-c.mjx-c71::before{padding:.442em .528em .194em 0;content:"q"}mjx-c.mjx-c30::before{padding:.666em .5em .022em 0;content:"0"}mjx-c.mjx-c36::before{padding:.666em .5em .022em 0;content:"6"}mjx-container[jax=CHTML]{line-height:0}mjx-container [space="1"]{margin-left:.111em}mjx-container [space="2"]{margin-left:.167em}mjx-container [space="3"]{margin-left:.222em}mjx-container [space="4"]{margin-left:.278em}mjx-container [space="5"]{margin-left:.333em}mjx-container [rspace="1"]{margin-right:.111em}mjx-container [rspace="2"]{margin-right:.167em}mjx-container [rspace="3"]{margin-right:.222em}mjx-container [rspace="4"]{margin-right:.278em}mjx-container [rspace="5"]{margin-right:.333em}mjx-container [size="s"]{font-size:70.7%}mjx-container [size=ss]{font-size:50%}mjx-container [size=Tn]{font-size:60%}mjx-container [size=sm]{font-size:85%}mjx-container [size=lg]{font-size:120%}mjx-container [size=Lg]{font-size:144%}mjx-container [size=LG]{font-size:173%}mjx-container [size=hg]{font-size:207%}mjx-container [size=HG]{font-size:249%}mjx-container [width=full]{width:100%}mjx-box{display:inline-block}mjx-block{display:block}mjx-itable{display:inline-table}mjx-row{display:table-row}mjx-row>*{display:table-cell}mjx-mtext{display:inline-block}mjx-mstyle{display:inline-block}mjx-merror{display:inline-block;color:red;background-color:#ff0}mjx-mphantom{visibility:hidden}mjx-assistive-mml{top:0;left:0;clip:rect(1px,1px,1px,1px);user-select:none;position:absolute!important;padding:1px 0 0!important;border:0!important;display:block!important;width:auto!important;overflow:hidden!important}mjx-assistive-mml[display=block]{width:100%!important}mjx-math{display:inline-block;text-align:left;line-height:0;text-indent:0;font-style:normal;font-weight:400;font-size:100%;letter-spacing:normal;border-collapse:collapse;overflow-wrap:normal;word-spacing:normal;white-space:nowrap;direction:ltr;padding:1px 0}mjx-container[jax=CHTML][display=true]{display:block;text-align:center;margin:1em 0}mjx-container[jax=CHTML][display=true][width=full]{display:flex}mjx-container[jax=CHTML][display=true] mjx-math{padding:0}mjx-container[jax=CHTML][justify=left]{text-align:left}mjx-container[jax=CHTML][justify=right]{text-align:right}mjx-mo{display:inline-block;text-align:left}mjx-stretchy-h{display:inline-table;width:100%}mjx-stretchy-h>*{display:table-cell;width:0}mjx-stretchy-h>*>mjx-c{display:inline-block;transform:scaleX(1)}mjx-stretchy-h>*>mjx-c::before{display:inline-block;width:initial}mjx-stretchy-h>mjx-ext{overflow:clip visible;width:100%}mjx-stretchy-h>mjx-ext>mjx-c::before{transform:scaleX(500)}mjx-stretchy-h>mjx-ext>mjx-c{width:0}mjx-stretchy-h>mjx-beg>mjx-c{margin-right:-.1em}mjx-stretchy-h>mjx-end>mjx-c{margin-left:-.1em}mjx-stretchy-v{display:inline-block}mjx-stretchy-v>*{display:block}mjx-stretchy-v>mjx-beg{height:0}mjx-stretchy-v>mjx-end>mjx-c{display:block}mjx-stretchy-v>*>mjx-c{transform:scaleY(1);transform-origin:left center;overflow:hidden}mjx-stretchy-v>mjx-ext{display:block;height:100%;box-sizing:border-box;border:0 solid transparent;overflow:visible clip}mjx-stretchy-v>mjx-ext>mjx-c::before{width:initial;box-sizing:border-box}mjx-stretchy-v>mjx-ext>mjx-c{transform:scaleY(500) translateY(.075em);overflow:visible}mjx-mark{display:inline-block;height:0}mjx-c{display:inline-block}mjx-utext{display:inline-block;padding:.75em 0 .2em}mjx-mn{display:inline-block;text-align:left}mjx-texatom{display:inline-block;text-align:left}mjx-mi{display:inline-block;text-align:left}mjx-msup{display:inline-block;text-align:left}mjx-c::before{display:block;width:0}.MJX-TEX{font-family:MJXZERO,MJXTEX}.TEX-B{font-family:MJXZERO,MJXTEX-B}.TEX-I{font-family:MJXZERO,MJXTEX-I}.TEX-MI{font-family:MJXZERO,MJXTEX-MI}.TEX-BI{font-family:MJXZERO,MJXTEX-BI}.TEX-S1{font-family:MJXZERO,MJXTEX-S1}.TEX-S2{font-family:MJXZERO,MJXTEX-S2}.TEX-S3{font-family:MJXZERO,MJXTEX-S3}.TEX-S4{font-family:MJXZERO,MJXTEX-S4}.TEX-A{font-family:MJXZERO,MJXTEX-A}.TEX-C{font-family:MJXZERO,MJXTEX-C}.TEX-CB{font-family:MJXZERO,MJXTEX-CB}.TEX-FR{font-family:MJXZERO,MJXTEX-FR}.TEX-FRB{font-family:MJXZERO,MJXTEX-FRB}.TEX-SS{font-family:MJXZERO,MJXTEX-SS}.TEX-SSB{font-family:MJXZERO,MJXTEX-SSB}.TEX-SSI{font-family:MJXZERO,MJXTEX-SSI}.TEX-SC{font-family:MJXZERO,MJXTEX-SC}.TEX-T{font-family:MJXZERO,MJXTEX-T}.TEX-V{font-family:MJXZERO,MJXTEX-V}.TEX-VB{font-family:MJXZERO,MJXTEX-VB}mjx-stretchy-h mjx-c,mjx-stretchy-v mjx-c{font-family:MJXZERO,MJXTEX-S1,MJXTEX-S4,MJXTEX,MJXTEX-A!important}@font-face{font-family:MJXZERO;src:url("lib/fonts/mathjax_zero.woff") format("woff")}@font-face{font-family:MJXTEX;src:url("lib/fonts/mathjax_main-regular.woff") format("woff")}@font-face{font-family:MJXTEX-B;src:url("lib/fonts/mathjax_main-bold.woff") format("woff")}@font-face{font-family:MJXTEX-I;src:url("lib/fonts/mathjax_math-italic.woff") format("woff")}@font-face{font-family:MJXTEX-MI;src:url("lib/fonts/mathjax_main-italic.woff") format("woff")}@font-face{font-family:MJXTEX-BI;src:url("lib/fonts/mathjax_math-bolditalic.woff") format("woff")}@font-face{font-family:MJXTEX-S1;src:url("lib/fonts/mathjax_size1-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S2;src:url("lib/fonts/mathjax_size2-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S3;src:url("lib/fonts/mathjax_size3-regular.woff") format("woff")}@font-face{font-family:MJXTEX-S4;src:url("lib/fonts/mathjax_size4-regular.woff") format("woff")}@font-face{font-family:MJXTEX-A;src:url("lib/fonts/mathjax_ams-regular.woff") format("woff")}@font-face{font-family:MJXTEX-C;src:url("lib/fonts/mathjax_calligraphic-regular.woff") format("woff")}@font-face{font-family:MJXTEX-CB;src:url("lib/fonts/mathjax_calligraphic-bold.woff") format("woff")}@font-face{font-family:MJXTEX-FR;src:url("lib/fonts/mathjax_fraktur-regular.woff") format("woff")}@font-face{font-family:MJXTEX-FRB;src:url("lib/fonts/mathjax_fraktur-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SS;src:url("lib/fonts/mathjax_sansserif-regular.woff") format("woff")}@font-face{font-family:MJXTEX-SSB;src:url("lib/fonts/mathjax_sansserif-bold.woff") format("woff")}@font-face{font-family:MJXTEX-SSI;src:url("lib/fonts/mathjax_sansserif-italic.woff") format("woff")}@font-face{font-family:MJXTEX-SC;src:url("lib/fonts/mathjax_script-regular.woff") format("woff")}@font-face{font-family:MJXTEX-T;src:url("lib/fonts/mathjax_typewriter-regular.woff") format("woff")}@font-face{font-family:MJXTEX-V;src:url("lib/fonts/mathjax_vector-regular.woff") format("woff")}@font-face{font-family:MJXTEX-VB;src:url("lib/fonts/mathjax_vector-bold.woff") format("woff")}mjx-c.mjx-c28::before{padding:.75em .389em .25em 0;content:"("}mjx-c.mjx-c34::before{padding:.677em .5em 0 0;content:"4"}mjx-c.mjx-c31::before{padding:.666em .5em 0 0;content:"1"}mjx-c.mjx-c39::before{padding:.666em .5em .022em 0;content:"9"}mjx-c.mjx-c35::before{padding:.666em .5em .022em 0;content:"5"}mjx-c.mjx-c38::before{padding:.666em .5em .022em 0;content:"8"}mjx-c.mjx-c33::before{padding:.665em .5em .022em 0;content:"3"}mjx-c.mjx-c2F::before{padding:.75em .5em .25em 0;content:"/"}mjx-c.mjx-c37::before{padding:.676em .5em .022em 0;content:"7"}mjx-c.mjx-c32::before{padding:.666em .5em 0 0;content:"2"}mjx-c.mjx-c29::before{padding:.75em .389em .25em 0;content:")"}mjx-c.mjx-c22C5::before{padding:.31em .278em 0 0;content:"⋅"}mjx-c.mjx-c2212::before{padding:.583em .778em .082em 0;content:"−"}mjx-c.mjx-c3E::before{padding:.54em .778em .04em 0;content:">"}mjx-c.mjx-c1D442.TEX-I::before{padding:.704em .763em .022em 0;content:"O"}mjx-c.mjx-c1D452.TEX-I::before{padding:.442em .466em .011em 0;content:"e"}mjx-c.mjx-c1D461.TEX-I::before{padding:.626em .361em .011em 0;content:"t"}</style><div class="markdown-preview-sizer markdown-preview-section"><h1 class="page-title heading inline-title" id="Django--ex"><p dir="auto">Django--ex</p></h1><div class="heading-wrapper"><h3 data-heading="参考" dir="auto" class="heading" id="参考"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>参考</h3><div class="heading-children"><div><p dir="auto"><a data-href="axios" href="docs/草稿/前端/js-tools/axios.html" class="internal-link" target="_self" rel="noopener">axios</a></p></div><div><p dir="auto">进阶内容 =&gt; <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/" target="_blank">使用 Django</a><br>
api =&gt; <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/" target="_blank">API 参考</a></p></div><div><p dir="auto"><a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/" target="_blank">Django 文档 | Django 文档 | Django (djangoproject.com)</a></p></div><div class="heading-wrapper"><h4 data-heading="待了解" dir="auto" class="heading" id="待了解"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>待了解</h4><div class="heading-children"><div><ul dir="auto">
<li data-line="0" dir="auto"><a data-tooltip-position="top" aria-label="url 调度器" data-href="#url 调度器" href="#url_调度器" class="internal-link" target="_self" rel="noopener">url 调度器 -&gt; 命名空间</a></li>
<li data-line="1" dir="auto"><a data-tooltip-position="top" aria-label="异步" data-href="#异步" href="#异步" class="internal-link" target="_self" rel="noopener">视图 -&gt; 异步</a></li>
</ul></div><div class="has-run-code-button"><pre dir="auto"><span>python -m pip install django
python -m pip install daphne	# =&gt; 用于部署服务器 
python -m pip install Pillow	# =&gt; 用于 ImageField</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="配置" dir="auto" class="heading" id="配置"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>配置</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/settings/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/settings/" target="_blank">Django 配置</a><br>
ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/django-admin/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/django-admin/" target="_blank">django-admin 和 manage.py</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/settings/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/settings/" target="_blank">配置</a></p>
</blockquote></div><div><p dir="auto">运行 Django 时会将项目的 settings 模块添加到 <span>django.conf.settings</span> ？</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>配置</th>
<th>用途</th>
<th>建议</th>
</tr>
</thead>
<tbody>
<tr>
<td>ROOT_URLCONF</td>
<td>设置根路由</td>
<td></td>
</tr>
<tr>
<td>TIME_ZONE</td>
<td></td>
<td><span>Asia/Shanghai</span></td>
</tr>
<tr>
<td>DEBUG</td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div><div><p dir="auto">生产环境中建议使用虚拟环境 =&gt; 参见 <a data-href="python#虚拟环境" href="docs/草稿/后端/lang/python.html#虚拟环境" class="internal-link" target="_self" rel="noopener">python &gt; 虚拟环境</a></p></div><div><p dir="auto">asgi 部署 =&gt; 有三种可选项 <span>Daphne</span>, <span>Hypercorn</span>, <span>Uvicorn</span><br>
=&gt; 以 <span>daphne</span> 为例： </p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>python -m pip install daphne</span></li>
<li data-line="1" dir="auto">在项目根目录运行 <span>daphne path.to.asgi:application</span></li>
<li data-line="2" dir="auto">也可以与 <span>runserver</span> 集成：<span>INSTALLED_APPS</span> 最前面添加 <span>"daphne"</span> =&gt; <span>ASGI_APPLICATION = "path.to.asgi.application"</span></li>
</ul></div><div><p dir="auto">wsgi 部署 =&gt; 有三种可选项 <span>Gunicorn</span>, <span>uWSGI</span>, <span>Apache &amp; mod_wsgi</span><br>
=&gt; 以 <span>Gunicorn</span> 为例“</p></div></div></div><div class="heading-wrapper"><h3 data-heading="应用(app)" dir="auto" class="heading" id="应用(app)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>应用(app)</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/applications/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/applications/" target="_blank">应用程序</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/utils/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/utils/" target="_blank">Django 实用程序</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/contrib/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/contrib/" target="_blank">contrib 包</a>, </p>
</blockquote></div><div><p dir="auto">一个 Django app 由 <span>urls</span>, <span>views</span>, <span>template</span>, <span>static</span>, <span>model</span>, <span>migration</span>, <span>database</span> 等组成</p></div><div><p dir="auto"><span>urls</span>, <span>views</span> =&gt; 实现 前端 和 后端 的交互<br>
<span>template</span>, <span>static</span> =&gt; 主要实行前端功能 =&gt; 可以交给前端框架实现前后端分离<br>
<span>model</span>, <span>migration</span>, <span>database</span> =&gt; 主要实行后端功能</p></div></div></div><div class="heading-wrapper"><h3 data-heading="路由(urls)" dir="auto" class="heading" id="路由(urls)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>路由(urls)</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/http/urls/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/http/urls/" target="_blank">URL调度器</a><br>
ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/urlresolvers/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/urlresolvers/" target="_blank">django.urls 实用函数</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/urls/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/urls/" target="_blank">URLconfs 中使用的 django.urls 函数</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/urls/#module-django.conf.urls" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/urls/#module-django.conf.urls" target="_blank">URLconfs 中使用的 django.urls 函数</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/csrf/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/csrf/" target="_blank">跨站请求伪造保护</a></p>
</blockquote></div><div><p dir="auto">路由在 django 中被称为 <strong>URLconfs</strong></p></div><div><p dir="auto">涉及的包和模块：<br>
=&gt; <span>django.urls</span> =&gt; <span>path()</span>, <span>re_path()</span>, <span>include()</span>, <span>reverse()</span><br>
=&gt; <span>django.http</span> =&gt; <span>HttpRequest</span>, <span>HttpResponse</span>, <span>HttpResponseRedirect</span></p></div><div class="heading-wrapper"><h4 data-heading="url 调度器" dir="auto" class="heading" id="url_调度器"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>url 调度器</h4><div class="heading-children"><div><p dir="auto">Django 处理请求的工作方式：<br>
=&gt; 根据 <span>HttpRequest</span> 对象的 <span>urlconf</span> 属性，或者 <span>ROOT_URLCONF</span> 确定<strong>根路由器</strong><br>
=&gt; 根据 <span>HttpRequest</span> 的 <span>path_info</span> 部分匹配路由器模块中 <span>urlpatterns</span> 里的一条路由，并转入下一条<strong>路由器</strong>，或者一个<strong>视图</strong>；若匹配不到路由，则 Django 调用适当的错误处理视图，参见 <a data-tooltip-position="top" aria-label="安全" data-href="#安全" href="#安全" class="internal-link" target="_self" rel="noopener">安全-&gt;异常</a><br>
=&gt; 例子</p></div><div class="has-run-code-button"><pre dir="auto"><span>urlpatterns = [
    path("articles/2003/", views.a),
    path("articles/&lt;int:year&gt;/", views.b),
    path("articles/&lt;int:year&gt;/&lt;int:month&gt;/", views.c),
    path("articles/&lt;int:year&gt;/&lt;int:month&gt;/&lt;slug:slug&gt;/", views.d),
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>/articles/2005/03/</span> =&gt; 匹配第三项，调用 <span>views.c(request, year=2005, month=3)</span></li>
<li data-line="1" dir="auto"><span>/articles/2003/</span> =&gt; 匹配第一项，调用 <span>views.a(request)</span></li>
<li data-line="2" dir="auto"><span>/articles/2003</span> =&gt; 匹配不到</li>
<li data-line="3" dir="auto"><span>/articles/2003/03/building-a-django-site/</span> =&gt; 匹配第四项，调用 <span>views.d(request, year=2005, month=3, slug='building-a-django-site')</span></li>
</ul></div><div><p dir="auto">注：<span>route</span> 中的每个<strong>路径参数</strong>都必须有一个视图函数的<strong>形参</strong>与之对应；反之，视图函数的每个<strong>位置参数</strong>都必须有一个 <span>route</span> 的<strong>路径参数</strong><br>
注2：路由器模块都有一个路由表 <span>urlpatterns: &amp;path()[] | &amp;re_path()[]</span> </p></div><div><p dir="auto"><strong>路径转换器</strong> =&gt; 在 <span>path()</span> 函数的 <span>route</span> 参数中用于指定 <span>path-params</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>&lt;str:path_param&gt;</span> =&gt; 匹配 <span>[^/]+</span> 并传递给 <span>path_param: str</span> 参数</li>
<li data-line="1" dir="auto"><span>&lt;int:path_param&gt;</span> =&gt; 匹配自然数 <span>\d+</span> 并传递给 <span>path_param: int</span> 参数</li>
<li data-line="2" dir="auto"><span>&lt;slug:path_param&gt;</span> =&gt; 匹配 <span>[^\x00-\xFF]+</span>（ASCII 字母、下划线、连字符）并传递给 <span>path_param: str</span> 参数</li>
<li data-line="3" dir="auto"><span>&lt;uuid:path_param&gt;</span> =&gt; 匹配一个格式化的 <a data-tooltip-position="top" aria-label="https://docs.python.org/3/library/uuid.html#uuid.UUID" rel="noopener" class="external-link" href="https://docs.python.org/3/library/uuid.html#uuid.UUID" target="_blank">UUID</a></li>
<li data-line="4" dir="auto"><span>&lt;path:path_param&gt;</span> =&gt; 匹配 <span>.+</span> 并传递给 <span>path_param: str</span> 参数<br>
=&gt; 例子：</li>
</ul></div><div><p dir="auto"><strong>自定义路径转换器</strong> =&gt; 定义一个类，其具有 <span>regex</span> 属性，<span>to_python()</span> 和 <span>to_url()</span> 方法 =&gt; 然后用 <span>register_converter(ExampleConverter: class, converter_name: str)</span> 注册转换器</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>regex: str</span> =&gt; 指定匹配的模式</li>
<li data-line="1" dir="auto"><span>to_python(self, value: str): any</span> =&gt; 指定路径参数传递给视图函数形参时的数据</li>
<li data-line="2" dir="auto"><span>to_url(self, value: any): str</span> =&gt; 指定数据转换为 url 中的路径参数时得到的字符串（即 <span>to_python()</span> 的逆变换），通常在调用 <span>reverse()</span> 时触发<br>
=&gt; 例子：</li>
</ul></div><div class="has-run-code-button"><pre dir="auto"><span>class ExampleConverter:
	regex = "\d{4}"
	def to_python(self, value):
		return int(value)
	def to_url(self, value):
		return "%04d" % value

from django.urls import path, register_converter
register_converter(ExampleConverter, "yyyy")
urlpatterns = [
	path("&lt;yyyy:param&gt;", ...)
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><strong>正则路由</strong> =&gt; <span>re_path()</span> =&gt; 使用 <span>(?P&lt;path-param&gt;pattern)</span> 或 <span>(pattern)</span> 进行分组（或者说指定路径参数）<br>
=&gt; 例子： <span>re_path(r'^email/(?P&lt;param&gt;\w+@\w+\.\w+)/$', ...)</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">嵌套参数 =&gt; </li>
</ul></div><div><p dir="auto">url <strong>反向解析</strong> =&gt; 即 根据</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">模板标签 <span>url</span> =&gt; <span>{% url &lt;route_name&gt; &lt;path-params&gt; %}</span></li>
<li data-line="1" dir="auto"><span>reverse(route_name: str, args?: any[]): str</span> 函数</li>
<li data-line="2" dir="auto"><span>get_absolute_url()</span> 方法</li>
</ul></div><div><p dir="auto"><span>route_name</span> =&gt; 在定义路由时，定义其路由名是一个好习惯！<br>
url 命名空间 =&gt; </p></div><div><ul dir="auto">
<li data-line="0" dir="auto">应用程序命名空间</li>
<li data-line="1" dir="auto">实例命名空间</li>
</ul></div><div><p dir="auto">注：<span>app_name</span> 用于设置应用程序空间？</p></div></div></div><div class="heading-wrapper"><h4 data-heading="附录-路由" dir="auto" class="heading" id="附录-路由"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>附录-路由</h4><div class="heading-children"><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>urls 的函数</th>
<th>用途</th>
<th>参数解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>path(route: str, view: (req: HttpRequest, **path_params) =&gt; HttpResponse, args?: dict, name?: str)</td>
<td>获取一条匹配规则 =&gt; 将匹配的路由转发到视图</td>
<td>args =&gt; 传递给视图的形参的额外数据<br>name =&gt; 路由规则的标识符</td>
</tr>
<tr>
<td>re_path(route: regex, view: (req: HttpRequest, **path_params) =&gt; HttpResponse, args?: dict, name?: str)</td>
<td></td>
<td></td>
</tr>
<tr>
<td>include("path.to.urls", namespace: str)</td>
<td>包含其他 URLconfs</td>
<td>namespace =&gt;</td>
</tr>
<tr>
<td>include(urlpatterns: &amp;path()[])</td>
<td></td>
<td></td>
</tr>
<tr>
<td>reverse(viewname, urlconf=None, args=None, kwargs=None, current_app=None)</td>
<td></td>
<td>current_app =&gt; 指定 app 命名空间</td>
</tr>
</tbody>
</table></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="视图(views)" dir="auto" class="heading" id="视图(views)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>视图(views)</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/http/views/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/http/views/" target="_blank">编写视图</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/http/decorators/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/http/decorators/" target="_blank">视图装饰器</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/http/file-uploads/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/http/file-uploads/" target="_blank">文件上传</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/http/shortcuts/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/http/shortcuts/" target="_blank">Django 便捷函数</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/http/generic-views/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/http/generic-views/" target="_blank">通用视图</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/http/middleware/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/http/middleware/" target="_blank">中间件</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/http/sessions/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/http/sessions/" target="_blank">如何使用会话</a><br>
topic2：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/class-based-views/intro/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/class-based-views/intro/" target="_blank">基于类的视图</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/class-based-views/generic-display/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/class-based-views/generic-display/" target="_blank">内置的基于类的通用视图</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/class-based-views/generic-editing/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/class-based-views/generic-editing/" target="_blank">使用基于类的视图处理表单</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/class-based-views/mixins/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/class-based-views/mixins/" target="_blank">在基于类的视图中使用混入</a>,<br>
topic3：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/conditional-view-processing/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/conditional-view-processing/" target="_blank">条件视图处理</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/pagination/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/pagination/" target="_blank">分页</a><br>
ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/class-based-views/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/class-based-views/" target="_blank">内置基于类的视图 API</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/views/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/views/" target="_blank">内置视图</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/request-response/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/request-response/" target="_blank">请求和响应对象</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/middleware/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/middleware/" target="_blank">中间件</a></p>
</blockquote></div><div><p dir="auto">涉及的包和模块，或函数：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">
<p dir="auto"><span>django.http</span> =&gt; <span>HttpResponse</span>, <span>HttpResponseRedirect</span>, <span>QueryDict</span></p>
</li>
<li data-line="1" dir="auto">
<p dir="auto"><span>django.shortcuts</span> =&gt; <span>render()</span></p>
</li>
<li data-line="2" dir="auto">
<p dir="auto"><span>django.conf.urls</span> =&gt; <span>handler400</span>, <span>handler403</span>, <span>handler404</span>, <span>handler500</span></p>
</li>
<li data-line="3" dir="auto">
<p dir="auto"><span>django.views.decorators.http</span> =&gt; <span>@require_http_methods()</span>, <span>@require_GET()</span>, <span>@require_POST()</span></p>
</li>
<li data-line="4" dir="auto">
<p dir="auto"><span>django.views.decorators.gzip</span> =&gt; <span>gzip_page()</span></p>
</li>
<li data-line="5" dir="auto">
<p dir="auto"><span>django.views.decorators.vary</span> =&gt; <span>vary_on_cookie()</span></p>
</li>
<li data-line="6" dir="auto">
<p dir="auto"><span>django.views.decorators.cache</span> =&gt; <span>cache_control()</span></p>
</li>
<li data-line="7" dir="auto">
<p dir="auto"><span>django.views.decorators.common</span> =&gt; <span>no_append_slash()</span></p>
</li>
<li data-line="8" dir="auto">
<p dir="auto"><span>django.views.static</span> =&gt; <span>serve()</span></p>
</li>
<li data-line="9" dir="auto">
<p dir="auto"><span>django.views.defaults</span> =&gt; <span>page_not_found()</span>, <span>server_error()</span>, <span>permission_denied()</span>, <span>bad_request()</span></p>
</li>
<li data-line="10" dir="auto">
<p dir="auto"><span>django.core.serializers.json</span> =&gt; <span>DjangoJSONEncoder</span></p>
</li>
<li data-line="11" dir="auto">
<p dir="auto"><span>django.template.response</span> =&gt; <span>SimpleTemplateResponse</span>, <span>TemplateResponse</span></p>
</li>
<li data-line="12" dir="auto">
<p dir="auto"><span>django.template.loader</span> =&gt; <span>get_template()</span></p>
</li>
<li data-line="13" dir="auto">
<p dir="auto"><span>django.template.backends.django</span> =&gt; <span>Template</span></p>
</li>
<li data-line="15" dir="auto">
<p dir="auto"><span>django.views.generic</span> =&gt; <span>View</span>, <span>TemplateView</span></p>
</li>
</ul></div><div><p dir="auto">涉及的异常：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.http</span> =&gt; <span>Http404</span>, <span>HttpResponseNotAllowed</span></li>
<li data-line="1" dir="auto"><span>django.core.exceptions</span> =&gt; <span>PermissionDenied</span>, <span>SuspiciousOperation</span></li>
</ul></div><div class="heading-wrapper"><h4 data-heading="编写视图" dir="auto" class="heading" id="编写视图"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>编写视图</h4><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">相关：<a data-href="#请求" href="#请求" class="internal-link" target="_self" rel="noopener">请求</a>, <a data-href="#响应" href="#响应" class="internal-link" target="_self" rel="noopener">响应</a></p>
</blockquote></div><div><p dir="auto"><strong>视图函数</strong><br>
=&gt; 接受 web 请求并返回 web 相应的 python 函数<br>
=&gt; 形如 <span>view_func(req: HttpRequest, path_param: str...): HttpResponse</span><br>
注：Django 并不会限制这些函数的位置，而惯例是放在名为 <span>views</span> 的包或模块中<br>
=&gt; 常见响应 =&gt; <span>HttpResponse</span> 及其子类，参考 <a data-tooltip-position="top" aria-label="附录-视图" data-href="#附录-视图" href="#附录-视图" class="internal-link" target="_self" rel="noopener">HttpResponse 及其子类的构造器</a><br>
=&gt; 404 异常：<span>Http404</span></p></div><div><p dir="auto">自定义报错视图？ =&gt; <span>django.conf.urls</span> 下的 <span>handler400</span>, <span>handler403</span>, <span>handler404</span>, <span>handler500</span></p></div><div><p dir="auto"><span>CSRF_FAILURE_VIEW</span> =&gt; 可以用来覆盖 CSRF 报错视图？</p></div><div><p dir="auto">便捷工具 =&gt; <span>django.shortcuts</span> 包下的 <span>render()</span>, <span>redirect()</span>, <span>get_object_or_404()</span>, <span>get_list_or_404()</span></p></div></div></div><div class="heading-wrapper"><h4 data-heading="视图装饰器" dir="auto" class="heading" id="视图装饰器"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>视图装饰器</h4><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">前置知识：<a data-href="python#装饰器" href="docs/草稿/后端/lang/python.html#装饰器" class="internal-link" target="_self" rel="noopener">python &gt; 装饰器</a></p>
</blockquote></div><div><p dir="auto"><span>django.views.decorators.http</span> 包下的某些<strong>装饰器</strong>可以声明一个<strong>视图函数</strong>需要指定的请求方法才能调用，否则会触发 <span>django.http.HttpResponseNotAllowed</span> 错误</p></div><div><p dir="auto"><span>@require_http_methods(methods: str[])</span> =&gt; 指定视图函数所需的请求方法<br>
<span>@require_GET()</span> =&gt; 指定视图函数只接受 <span>GET</span> 方法<br>
<span>@require_POST()</span> =&gt; 指定视图函数只接受 <span>POST</span> 方法<br>
<span>@require_safe()</span> =&gt; 指定视图函数只接受 <span>GET</span> 或 <span>HEAD</span> 方法<br>
<span>@condition(etag_func=None, last_modified_func=None)</span> =&gt; 用于控制特殊视图中的缓存行为</p></div><div><p dir="auto"><span>django.views.decorators</span><br>
=&gt; <span>gzip</span> =&gt; 用于压缩<br>
=&gt; <span>vary</span>, <span>cache</span> =&gt; 用于控制缓存<br>
=&gt; <span>common</span> =&gt; </p></div></div></div><div class="heading-wrapper"><h4 data-heading="异步" dir="auto" class="heading" id="异步"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>异步</h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="文件&amp;异常" dir="auto" class="heading" id="文件&amp;异常"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>文件&amp;异常</h4><div class="heading-children"><div><p dir="auto">Django 的一些视图函数允许 用 url 读取文件，或自定义常见 http 错误时返回的模板</p></div><div><p dir="auto"><span>django.views.static</span> =&gt; <span>serve(req: HttpRequest, path: str, document_root: str, show_indexes?: bool)</span> =&gt; 可以通过 url 获取文件<br>
=&gt; 配置的例子：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">全局设置 =&gt; <span>MEDIA_ROOT = BASE_DIR / 'media'</span></li>
<li data-line="1" dir="auto">配置路由 =&gt; <span>re_path(r"^media/(?P&lt;path&gt;.*)$", serve, {"document_root": settings.MEDIA_ROOT}, "media")</span></li>
</ul></div><div><p dir="auto"><span>django.views.defaults</span><br>
=&gt; <span>page_not_found(req: HttpRequest, exception, template_name='404.html')</span> =&gt; 发出 <span>Http404</span> 错误时，Django 会加载 <span>page_not_found()</span> 视图 =&gt; 若 <span>templates/</span> 目录下存在 <span>404.html</span> 模板，那么该视图返回该模板；否则返回默认的 <span>Not Found</span> 页面<br>
注：该视图给 <span>404.html</span> 提供了 2 个上下文参数 <span>request_path</span>, <span>exception</span><br>
注2：URLconf 找到匹配结果时，会自动发出 <span>Http404</span> 错误<br>
注3：只有在 <span>DEBUG=False</span> 时生效<br>
=&gt; <span>server_error(req: HttpRequest, template_name='500.html')</span> =&gt; 视图中出现异常时调用<br>
=&gt; <span>permission_denied(req: HttpRequest, exception, template_name='403.html')</span> =&gt; 发出 <span>PermissionDenied</span> 异常时调用<br>
注：该视图给 <span>403.html</span> 提供了上下文参数 <span>exception</span><br>
=&gt; <span>bad_request(req: HttpRequest, exception, template_name='400.html')</span> =&gt; 发出 <span>SuspiciousOperation</span> 异常时调用</p></div></div></div><div class="heading-wrapper"><h4 data-heading="请求" dir="auto" class="heading" id="请求"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>请求</h4><div class="heading-children"><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>HttpRequest 基本属性</th>
<th>解释</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>scheme: str</td>
<td>请求协议</td>
<td>如 <span>http</span>, <span>https</span></td>
</tr>
<tr>
<td>path: str</td>
<td>请求路径</td>
<td></td>
</tr>
<tr>
<td>path_info: str</td>
<td>请求路径的一个后缀</td>
<td></td>
</tr>
<tr>
<td>method: str</td>
<td><span>HTTP METHOD</span></td>
<td></td>
</tr>
<tr>
<td>headers: dict</td>
<td><span>HTTP HEADERS</span></td>
<td></td>
</tr>
<tr>
<td>content_type: str</td>
<td><span>HTTP HEADERS</span> 的 <span>Content-Type</span> 键的值</td>
<td></td>
</tr>
<tr>
<td>content_params: dict</td>
<td><span>HTTP HEADERS</span> 的 <span>Content-Type</span> 头对应的字典</td>
<td>·</td>
</tr>
<tr>
<td>GET: QueryDict</td>
<td><span>HTTP QUERY</span></td>
<td>适用于所有 <span>HTTP METHOD</span></td>
</tr>
<tr>
<td>POST: QueryDict</td>
<td><span>HTTP BODY</span> 的字典数据</td>
<td>仅限于 <span>POST</span> 方法</td>
</tr>
<tr>
<td>FILES: MultiValueDict</td>
<td></td>
<td>仅限于 <span>Content-Type=multipart/form-data</span> 的 <span>POST</span> 方法，</td>
</tr>
<tr>
<td>body: byte_str</td>
<td><span>HTTP BODY</span> 的二进制数据</td>
<td>适用于所有 <span>HTTP METHOD</span></td>
</tr>
<tr>
<td>encoding: str</td>
<td>解码表单提交数据的编码方案</td>
<td>默认为 <span>DEFAULT_CHARSET</span> 的值</td>
</tr>
<tr>
<td>COOKIES: dict</td>
<td>cookies 的字段</td>
<td></td>
</tr>
<tr>
<td>META: dict</td>
<td>headers（key 会做相应转换）</td>
<td></td>
</tr>
<tr>
<td>resolver_match: ResolverMatch</td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div><div><p dir="auto">注：在调用 <span>&lt;HttpRequest&gt;.read()</span> 后调用 <span>&lt;HttpRequest&gt;.body</span>，会抛出 RawPostDataException 异常</p></div><div><p dir="auto">应用程序代码设置的属性 =&gt; <span>current_app</span>, <span>urlconf</span>, <span>exception_reporter_filter</span>, <span>exception_reporter_class</span><br>
中间件设置的属性 =&gt; <span>session</span>, <span>site</span>, <span>user</span></p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>HttpRequest 的函数</th>
<th>用途</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>read(): bytes</td>
<td><span>HTTP BODY</span> 的二进制数据</td>
<td></td>
</tr>
<tr>
<td>close()</td>
<td>关闭读取 <span>HTTP BODY</span> 的流</td>
<td>在 post 请求中，若不调用 <span>req.close()</span>，那么调用 <span>req.post</span> 或 <span>req.read()</span> 时会报错（由于锁机制）</td>
</tr>
<tr>
<td>auser()</td>
<td></td>
<td></td>
</tr>
<tr>
<td>get_host()</td>
<td></td>
<td></td>
</tr>
<tr>
<td>get_port()</td>
<td></td>
<td></td>
</tr>
<tr>
<td>get_full_path()</td>
<td></td>
<td></td>
</tr>
<tr>
<td>get_full_path_info()</td>
<td></td>
<td></td>
</tr>
<tr>
<td>build_absolute_uri()</td>
<td></td>
<td></td>
</tr>
<tr>
<td>get_signed_cookie()</td>
<td></td>
<td></td>
</tr>
<tr>
<td>is_secure()</td>
<td></td>
<td></td>
</tr>
<tr>
<td>accepts()</td>
<td></td>
<td></td>
</tr>
<tr>
<td>readline()</td>
<td></td>
<td></td>
</tr>
<tr>
<td>readlines()</td>
<td></td>
<td></td>
</tr>
<tr>
<td><span>__iter__</span>()</td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>QueryDict 的方法</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td><span>__init__</span>(query_params: str, mutable?: bool, encoding?: str)</td>
<td></td>
</tr>
<tr>
<td><span>__getitem__</span>(key: str): str</td>
<td></td>
</tr>
<tr>
<td><span>__setitem__</span>(key: str, val: str)</td>
<td></td>
</tr>
<tr>
<td><span>__contains__</span>(key: str): bool</td>
<td></td>
</tr>
<tr>
<td>get(key: str, default?: str): str</td>
<td></td>
</tr>
<tr>
<td>setdefault(key: str, default?: str)</td>
<td></td>
</tr>
<tr>
<td>update(other: dict)</td>
<td></td>
</tr>
<tr>
<td>items(): 2-tuple[]</td>
<td></td>
</tr>
<tr>
<td>values(): str[]</td>
<td></td>
</tr>
<tr>
<td>copy(): QueryDict</td>
<td></td>
</tr>
<tr>
<td>getlist(key: str, default?: str[])</td>
<td></td>
</tr>
<tr>
<td>setlist(key: str, list: str[])</td>
<td></td>
</tr>
<tr>
<td>appendlist(key: str, item: str)</td>
<td></td>
</tr>
<tr>
<td>setlistdefault(key: str, default_list: str[])</td>
<td></td>
</tr>
<tr>
<td>lists(): 2-tuple[]</td>
<td></td>
</tr>
<tr>
<td>pop(key: str): str[]</td>
<td></td>
</tr>
<tr>
<td>popitem(): 2-tuple[]</td>
<td></td>
</tr>
<tr>
<td>dict(): dict</td>
<td></td>
</tr>
<tr>
<td>urlencode(safe?: str)</td>
<td></td>
</tr>
</tbody>
</table></div></div></div><div class="heading-wrapper"><h4 data-heading="响应" dir="auto" class="heading" id="响应"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>响应</h4><div class="heading-children"><div><p dir="auto"><span>HttpResponseBase(content_type?: str, status?: int, reason?: str, charset?: str, headers?: dict)</span> =&gt; Django 大部分响应类的祖先类</p></div><div class="heading-wrapper"><h5 data-heading="HttpResponse" dir="auto" class="heading" id="HttpResponse"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>HttpResponse</h5><div class="heading-children"><div><p dir="auto"><span>HttpResponse(data, headers?: dict)</span></p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>HttpResponse 的属性</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>content: str</td>
<td></td>
</tr>
<tr>
<td>cookies: SimpleCookie</td>
<td></td>
</tr>
<tr>
<td>headers: dict</td>
<td></td>
</tr>
<tr>
<td>charset: str</td>
<td></td>
</tr>
<tr>
<td>status_code: str</td>
<td></td>
</tr>
<tr>
<td>reason_phrase: str</td>
<td></td>
</tr>
<tr>
<td>streaming: bool</td>
<td></td>
</tr>
<tr>
<td>closed: bool</td>
<td></td>
</tr>
</tbody>
</table></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>HttpResponse 的方法</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td><span>__init__</span>(content=b'', content_type=None, status=200, reason=None, charset=None, headers=None)</td>
<td></td>
</tr>
<tr>
<td><span>__setitem__</span>(header, value)</td>
<td></td>
</tr>
<tr>
<td><span>__delitem__</span>(header)</td>
<td></td>
</tr>
<tr>
<td><span>__getitem__</span>(header)</td>
<td></td>
</tr>
<tr>
<td>get(header, alternate=None)</td>
<td></td>
</tr>
<tr>
<td>has_header(header)</td>
<td></td>
</tr>
<tr>
<td>items()</td>
<td></td>
</tr>
<tr>
<td>setdefault(header, value)</td>
<td></td>
</tr>
<tr>
<td>set_cookie(key, value='', max_age=None, expires=None, path='/', domain=None, secure=False, httponly=False, samesite=None)</td>
<td></td>
</tr>
<tr>
<td>set_signed_cookie(key, value, salt='', max_age=None, expires=None, path='/', domain=None, secure=False, httponly=False, samesite=None)</td>
<td></td>
</tr>
<tr>
<td>delete_cookie(key, path='/', domain=None, samesite=None)</td>
<td></td>
</tr>
<tr>
<td>close()</td>
<td></td>
</tr>
<tr>
<td>write(content)</td>
<td></td>
</tr>
<tr>
<td>flush()</td>
<td></td>
</tr>
<tr>
<td>tell()</td>
<td></td>
</tr>
<tr>
<td>getvalue()</td>
<td></td>
</tr>
<tr>
<td>readable()</td>
<td></td>
</tr>
<tr>
<td>seekable()</td>
<td></td>
</tr>
<tr>
<td>writable()</td>
<td></td>
</tr>
<tr>
<td>writelines(lines)</td>
<td></td>
</tr>
</tbody>
</table></div></div></div><div class="heading-wrapper"><h5 data-heading="HttpResponse 子类" dir="auto" class="heading" id="HttpResponse_子类"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>HttpResponse 子类</h5><div class="heading-children"><div><p dir="auto">以下介绍 HttpResponse 的特殊子类：</p></div><div><p dir="auto">注意两个响应头 =&gt; <span>Content-Type</span>, <span>Content-Disposition</span></p></div><div><p dir="auto"><span>JsonResponse(data: dict | any, encoder=DjangoJSONEncoder, safe=True, json_dumps_params?: dict)</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>data</span> 相应的数据</li>
<li data-line="1" dir="auto"><span>DjangoJSONEncoder &lt; JSONEncoder</span> =&gt; 编码器</li>
<li data-line="2" dir="auto"><span>safe</span> =&gt; 是否只指定 <span>data</span> 只能是 <span>dict</span></li>
<li data-line="3" dir="auto"><span>json_dumps_params</span> =&gt; 指定与 <span>json.dumps()</span> 相同的参数</li>
</ul></div><div><p dir="auto"><span>StreamingHttpResponse(streaming_content: generator_obj)</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>generator_obj</span> =&gt; 生成器对象 =&gt; 例子：可以通过 <span>(i for i in iterable_obj)</span> 得到</li>
</ul></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>StreamingHttpResponse 的属性</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>streaming_content: generator_obj</td>
<td></td>
</tr>
<tr>
<td>status_code: int</td>
<td>http 状态码</td>
</tr>
<tr>
<td>reason_phrase</td>
<td></td>
</tr>
<tr>
<td>streaming: bool</td>
<td></td>
</tr>
<tr>
<td>is_async: bool</td>
<td></td>
</tr>
</tbody>
</table></div><div><p dir="auto"><span>FileResponse(open_file: byte, as_attachment=False, filename='', **kwargs)</span><br>
=&gt; 例子：<span>FileResponse(open('media/sd.jpg','rb'))</span><br>
注：当前目录为 <span>manage.py</span> 所在目录，即当前目录总是项目的根目录</p></div><div><p dir="auto"><span>&lt;FileResponse&gt;.set_headers(open_file)</span> =&gt; 根据 <span>open_file</span> 设置诸如 <span>Content-Type</span>, <span>Content-Length</span>, <span>Content-Disposition</span> 等响应头</p></div></div></div><div class="heading-wrapper"><h5 data-heading="模板响应" dir="auto" class="heading" id="模板响应"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模板响应</h5><div class="heading-children"><div><p dir="auto"><span>SimpleTemplateResponse</span> &lt; <span>HttpResponse</span>, <span>HttpResponseBase</span></p></div><div><p dir="auto"><span>SimpleTemplateResponse(tmpl: str | Template [], context: dict, **args)</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">注：<span>args</span> 中不包含 <span>content: str</span></li>
</ul></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>SimpleTemplateResponse 的属性</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>template_name: str | Template []</td>
<td></td>
</tr>
<tr>
<td>context_data: dict</td>
<td></td>
</tr>
<tr>
<td>rendered_content</td>
<td></td>
</tr>
<tr>
<td>is_rendered: bool</td>
<td></td>
</tr>
</tbody>
</table></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>SimpleTemplateResponse 的方法</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>resolve_context(context: dict): dict</td>
<td>预处理上下文数据</td>
</tr>
<tr>
<td>resolve_template(template)</td>
<td>解析模板实例</td>
</tr>
<tr>
<td>add_post_render_callback()</td>
<td>添加一个渲染发生后调用的回调</td>
</tr>
<tr>
<td>render()</td>
<td></td>
</tr>
</tbody>
</table></div><div><p dir="auto"><span>TemplateResponse</span> &lt; <span>SimpleTemplateResponse</span>, <span>HttpResponse</span>, <span>HttpResponseBase</span></p></div><div><p dir="auto"><span>TemplateResponse(req: HttpRequest, tmpl: str | Template [], context: dict, **args)</span></p></div></div></div></div></div><div class="heading-wrapper"><h4 data-heading="基于类的视图" dir="auto" class="heading" id="基于类的视图"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>基于类的视图</h4><div class="heading-children"><div class="has-run-code-button"><pre dir="auto"><span>class ExampleView(View):
    def get(self, req: HttpRequest):
    	pass

    def post(self, req: HttpRequest):
    	pass

    def put(self, req: HttpRequest):
    	pass

    def delete(self, req: HttpRequest):
    	pass

    def patch(self, req: HttpRequest):
    	pass

	...</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h4 data-heading="附录-视图" dir="auto" class="heading" id="附录-视图"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>附录-视图</h4><div class="heading-children"><div><p dir="auto"><span>django.http</span> =&gt; <span>HttpRequest</span>, <span>HttpResponse</span>, <span>JsonResponse</span>, <span>StreamingHttpResponse</span>, <span>FileResponse</span>, <span>HttpResponseBase</span>, <span>QueryDict</span></p></div><div><p dir="auto"><span>HttpResponseBase(content_type?: str, status?: int, reason?: str, charset?: str, headers?: dict)</span></p></div><div><p dir="auto"><span>HttpResponse &lt; HttpResponseBase</span></p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>HttpResponse 及其子类的构造器</th>
<th>解释</th>
<th>状态码</th>
</tr>
</thead>
<tbody>
<tr>
<td>HttpResponse(content?: str, **args)</td>
<td>通用响应</td>
<td>默认为200</td>
</tr>
<tr>
<td>HttpResponseRedirect(url_or_path: str)</td>
<td>重定向</td>
<td>302</td>
</tr>
<tr>
<td>HttpResponsePermanentRedirect(url_or_path: str)</td>
<td>永久重定向</td>
<td>301</td>
</tr>
<tr>
<td>HttpResponseNotModified()</td>
<td>页面未更改</td>
<td>304</td>
</tr>
<tr>
<td>HttpResponseBadRequest</td>
<td></td>
<td>400</td>
</tr>
<tr>
<td>HttpResponseNotFound</td>
<td></td>
<td>404</td>
</tr>
<tr>
<td>HttpResponseForbidden</td>
<td></td>
<td>403</td>
</tr>
<tr>
<td>HttpResponseNotAllowed(allowed_method: str[])</td>
<td>方法不允许</td>
<td>405</td>
</tr>
<tr>
<td>HttpResponseGone</td>
<td></td>
<td>410</td>
</tr>
<tr>
<td>HttpResponseServerError</td>
<td></td>
<td>500</td>
</tr>
</tbody>
</table></div><div><p dir="auto"><span>django.shortcuts</span> =&gt; 便捷工具</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>shortcuts 包的函数</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>render(req: HttpRequest, template_path: str, context?: dict, content_type?: str, status?: int, using?): HttpResponse</td>
<td></td>
</tr>
<tr>
<td>redirect(to, *args, permanent=False, **kwargs)</td>
<td></td>
</tr>
<tr>
<td>get_object_or_404(klass, *args, **kwargs)</td>
<td></td>
</tr>
<tr>
<td>get_list_or_404(klass, *args, **kwargs)</td>
<td></td>
</tr>
</tbody>
</table></div><div><p dir="auto"><span>django.views.decorators.http</span> =&gt; 指定视图函数接受的方法</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th><span>decorators.http</span> 包的装饰器</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>@require_http_methods(methods: str[])</td>
<td></td>
</tr>
<tr>
<td>require_GET()</td>
<td></td>
</tr>
<tr>
<td>require_POST()</td>
<td></td>
</tr>
<tr>
<td>require_safe()</td>
<td></td>
</tr>
</tbody>
</table></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th><span>SuspiciousOperation</span> 的子类</th>
<th></th>
</tr>
</thead>
<tbody>
<tr>
<td>DisallowedHost</td>
<td></td>
</tr>
<tr>
<td>DisallowedModelAdminLookup</td>
<td></td>
</tr>
<tr>
<td>DisallowedModelAdminToField</td>
<td></td>
</tr>
<tr>
<td>DisallowedRedirect</td>
<td></td>
</tr>
<tr>
<td>InvalidSessionKey</td>
<td></td>
</tr>
<tr>
<td>RequestDataTooBig</td>
<td></td>
</tr>
<tr>
<td>SuspiciousFileOperation</td>
<td></td>
</tr>
<tr>
<td>SuspiciousMultipartForm</td>
<td></td>
</tr>
<tr>
<td>SuspiciousSession</td>
<td></td>
</tr>
<tr>
<td>TooManyFieldsSent</td>
<td></td>
</tr>
<tr>
<td>TooManyFilesSent</td>
<td></td>
</tr>
</tbody>
</table></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="模板(template)" dir="auto" class="heading" id="模板(template)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模板(template)</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/templates/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/templates/" target="_blank">模板</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/forms/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/forms/" target="_blank">使用表单</a><br>
ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/templates/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/templates/" target="_blank">模板</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/template-response/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/template-response/" target="_blank">TemplateResponse 和 SimpleTemplateResponse</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/forms/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/forms/" target="_blank">表单</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/paginator/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/paginator/" target="_blank">分页器</a></p>
</blockquote></div><div><p dir="auto">涉及的模块和后端</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.template.backends.django</span> =&gt; <span>DjangoTemplates</span></li>
<li data-line="1" dir="auto"><span>django.template.backends.jinja2</span> =&gt; <span>Jinja2</span></li>
</ul></div><div><p dir="auto">引擎后端</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>DjangoTemplates</span> =&gt; django 内置后端</li>
<li data-line="1" dir="auto"><span>Jinja2</span> =&gt; django 内置后端，但需要额外安装</li>
<li data-line="2" dir="auto">自定义后端</li>
</ul></div><div><p dir="auto">配置：=&gt; 以 <span>DjangoTemplates</span> 为例</p></div><div class="has-run-code-button"><pre dir="auto"><span>TEMPLATES = [
    {
        "BACKEND": "django.template.backends.django.DjangoTemplates",
        "DIRS": [],
        "APP_DIRS": True,
        "OPTIONS": {
            # ... some options here ...
        },
    },
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>BACKEND</span> =&gt; 指定模板引擎后端</li>
<li data-line="1" dir="auto"><span>DIRS: str[]</span> =&gt; 指定项目中的一些模板目录</li>
<li data-line="2" dir="auto"><span>APP_DIRS: bool</span> =&gt; 是否每个 app 下的 <span>templates</span> 目录为模板目录？</li>
<li data-line="3" dir="auto"><span>OPTIONS: dict</span> =&gt; 指定特定于模板后端的配置</li>
</ul></div><div class="heading-wrapper"><h4 data-heading="语法" dir="auto" class="heading" id="语法"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>语法</h4><div class="heading-children"><div><p dir="auto">变量 =&gt; <span>{{ &lt;val&gt; }}</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">字典 / 数组 / 对象 检索值时使用句点语法 =&gt; 如，<span>{{ my_dict.key }}</span>, <span>{{ my_arr.5 }}</span>, <span>{{ my_obj.attr }}</span></li>
</ul></div><div><p dir="auto">标签 =&gt; <span>{% &lt;tag&gt; %}</span> 或 <span>{% &lt;tag_begin&gt; %} ... {% &lt;tag_end&gt; %}</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">大多数标签带参数 =&gt; 如，<span>{% url 'my_blogs' 3 %}</span></li>
<li data-line="1" dir="auto">具有控制结构<br>
=&gt; <span>{% if &lt;condition&gt; %} ... {% endif %}</span><br>
=&gt; <span>{% for ... %} ... {% endif %}</span></li>
</ul></div><div><p dir="auto">过滤器 =&gt; <span>{{ &lt;val&gt;|&lt;filter&gt; }}</span> 或 <span>{{ &lt;val&gt;|&lt;filter&gt;:&lt;arg&gt; }}</span></p></div><div><p dir="auto">注释 =&gt; <span>{# comment_raw... }</span> 或 <span>{% comment %} comment_raw... {% endcomment %}</span></p></div></div></div><div class="heading-wrapper"><h4 data-heading="组件" dir="auto" class="heading" id="组件"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>组件</h4><div class="heading-children"><div><p dir="auto">引擎 =&gt; <span>django.template.Engine</span><br>
模板 =&gt; <span>django.template.Template</span><br>
上下文 =&gt; <span>django.template.Context</span>, <span>django.template.RequestContext</span><br>
加载器 =&gt;<br>
上下文处理器</p></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="静态资源(static)" dir="auto" class="heading" id="静态资源(static)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>静态资源(static)</h3><div class="heading-children"><div><p dir="auto">配置：</p></div><div class="has-run-code-button"><pre dir="auto"><span>INSTALLED_APPS = [
	'django.contrib.staticfiles',
]
TEMPLATES = [
    {
        'OPTIONS': {
            'builtins' : [
                'django.templatetags.static',
            ],
        },
    },
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">=&gt; django 默认只会搜索 <span>&lt;app-name&gt;/static/</span> 目录下的静态文件<br>
注：若不配置 <span>builtins</span>，那么 <span>.html</span> 文件要使用静态文件时都要使用指令 <span>{% load static %}</span></p></div><div><p dir="auto"><span>STATICFILES_DIRS: str[]</span> =&gt; 添加本地中额外的静态文件目录<br>
=&gt; 例子：</p></div><div class="has-run-code-button"><pre dir="auto"><span>STATICFILES_DIRS = [
    BASE_DIR / 'static_local',
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><span>STATIC_URL</span> =&gt; 配置 url 到本地静态文件出道路由，这些静态文件由 <span>STATICFILES_DIRS</span> 配置，或 <span>&lt;app-name&gt;/static/</span> 提供<br>
=&gt; 例子：<span>STATIC_URL = '/static_url/'</span></p></div><div><p dir="auto"><span>STATIC_ROOT</span> =&gt; <span>collectstatic</span> 命令会将所有静态文件收集并整理到 <span>STATIC_ROOT</span> 所指定的目录</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">例子 =&gt; <span>STATIC_ROOT = BASE_DIR / 'staticfiles'</span></li>
</ul></div></div></div><div class="heading-wrapper"><h3 data-heading="模型(models)" dir="auto" class="heading" id="模型(models)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模型(models)</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/models/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/models/" target="_blank">模型</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/queries/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/queries/" target="_blank">执行查询</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/aggregation/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/aggregation/" target="_blank">聚合</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/search/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/search/" target="_blank">搜索</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/managers/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/managers/" target="_blank">管理器</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/sql/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/sql/" target="_blank">原生sql</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/transactions/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/transactions/" target="_blank">数据库事务</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/examples/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/examples/" target="_blank">模型关联 API 用法示例</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/serialization/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/serialization/" target="_blank">序列化 Django 对象</a><br>
ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/models/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/models/" target="_blank">模型</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/signals/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/signals/" target="_blank">信号</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/validators/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/validators/" target="_blank">验证器</a>, </p>
</blockquote></div><div><p dir="auto">涉及的包和模块：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.db.models</span> =&gt; <span>Model</span></li>
<li data-line="1" dir="auto"><span>django.db.models.fields</span> =&gt; <span>Field</span>, <span>SmallIntegerField</span>, <span>Integerxield</span>, <span>BigIntegerField</span>, <span>PositiveSmallIntegerField</span>, <span>PositiveIntegerField</span>, <span>PositiveBigIntegerField</span>, <span>SmallAutoField</span>, <span>AutoField</span>, <span>BigAutoField</span>, <span>FloatField</span>, <span>DecimalField</span>, <span>BooleanField</span>, <span>CharField</span>, <span>TextField</span>, <span>EmailField</span>, <span>URLField</span>, <span>DateField</span>, <span>DateTimeField</span>, <span>DurationField</span>, <span>GenericIPAddressField</span>, <span>FilePathField</span>, <span>SlugField</span>, <span>UUIDField</span></li>
<li data-line="2" dir="auto"><span>django.db.models.fields.files</span> =&gt; <span>FileField</span>, <span>ImageField</span></li>
<li data-line="3" dir="auto"><span>django.db.models.fields.json</span> =&gt; <span>JSONField</span></li>
<li data-line="4" dir="auto"><span>django.db.models.fields.generated</span> =&gt; <span>GeneratedField</span></li>
</ul></div><div><p dir="auto">Django 中只有 <span>app</span> 才拥有自己的 <span>model</span>，其定义在 <span>&lt;app&gt;.models</span> 下（可以是 <span>.py</span> 的模块文件，也可以是包的 <span>__init__.py</span> 文件）</p></div><div><p dir="auto">注册模型 =&gt; 首先要注册 app =&gt; 即 <span>INSTALLED_APPS</span> 添加一条表示 <span>model</span> 所属 app 的配置<br>
定义模型 =&gt; 定义字段 =&gt; <strong>字段类型</strong>、<strong>字段选项</strong></p></div><div><p dir="auto">字段类型的作用</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">指定字段在数据库中的类型</li>
<li data-line="1" dir="auto">渲染表单字段时默认使用 html 表单进行渲染</li>
</ul></div><div class="heading-wrapper"><h4 data-heading="模型类" dir="auto" class="heading" id="模型类"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模型类</h4><div class="heading-children"><div><ol dir="auto">
<li data-line="0" dir="auto"><span>&lt;app&gt;.models</span> 下的 <span>django.db.models.Model</span> 的子类总是对应一张数据库表（两个模型之间也可能有一张中间表）</li>
<li data-line="1" dir="auto"><span>Model</span> 子类的属性与对应的数据库表的字段一一映射</li>
</ol></div><div><p dir="auto"><strong>内部异常类</strong> =&gt; <span>DoesNotExist</span>, <span>MultipleObjectsReturned</span></p></div></div></div><div class="heading-wrapper"><h4 data-heading="模型字段" dir="auto" class="heading" id="模型字段"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模型字段</h4><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">外链：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/models/fields/#field-types" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/models/fields/#field-types" target="_blank">模型字段参考 -&gt; 字段类型</a></p>
</blockquote></div><div><p dir="auto">以下每个模型字段类都是 <a data-href="#models.fields.Field" href="#models.fields.Field" class="internal-link" target="_self" rel="noopener">models.fields.Field</a> 的孙子 =&gt; 于是构造方法的大部分参数也可能继承</p></div><div class="heading-wrapper"><h5 data-heading="Field 类" dir="auto" class="heading" id="Field_类"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Field 类</h5><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">参考：<a data-tooltip-position="top" aria-label="models.fields.Field" data-href="#models.fields.Field" href="#models.fields.Field" class="internal-link" target="_self" rel="noopener">django.models.fields.Field</a></p>
</blockquote></div><div><p dir="auto"><span>Field</span> 的构造器的参数</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>构造器参数</th>
<th>解释</th>
<th>表单？</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>null: bool</td>
<td>数据库中若字段为空，则将字段设置为 NULL</td>
<td></td>
<td></td>
</tr>
<tr>
<td>blank: bool</td>
<td>字段可为空</td>
<td></td>
<td></td>
</tr>
<tr>
<td>choices: 2-tuple[] | map | enum</td>
<td>枚举字段（key为后端数据，value为前端数据）</td>
<td><span>&lt;select&gt;</span></td>
<td>为 <span>model</span> 添加新字段时，该选项应与 <span>default</span> 选项配合使用</td>
</tr>
<tr>
<td>default: any | func</td>
<td>字段默认值</td>
<td></td>
<td></td>
</tr>
<tr>
<td>help_text: str</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>primary_key: bool</td>
<td>表的唯一主键（该字段只读）</td>
<td></td>
<td>若表中没有该字段，则 django 将添加 IntegerField 字段，并设为主键</td>
</tr>
<tr>
<td>unique: bool</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>verbose_name: str</td>
<td><strong>人类可读</strong>的字段名</td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>构造器参数</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>db_column: str</td>
<td>数据库底层中该字段对应的列名</td>
</tr>
<tr>
<td>db_comment: str</td>
<td>数据库底层中对该字段的注释</td>
</tr>
<tr>
<td>db_default: any</td>
<td>字段默认值，可以是字面量，或者数据库函数</td>
</tr>
<tr>
<td>db_index: bool</td>
<td>数据库底层中对该字段创建索引</td>
</tr>
<tr>
<td>db_tablespace: bool</td>
<td></td>
</tr>
<tr>
<td>editable</td>
<td></td>
</tr>
<tr>
<td>error_messages</td>
<td></td>
</tr>
<tr>
<td>unique_for_date: bool</td>
<td></td>
</tr>
<tr>
<td>unique_for_month: bool</td>
<td></td>
</tr>
<tr>
<td>unique_for_year: bool</td>
<td></td>
</tr>
<tr>
<td>validators:</td>
<td>验证器列表</td>
</tr>
</tbody>
</table></div><div><p dir="auto"><span>Field</span> 的属性：</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>普通属性</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>auto_created: bool</td>
<td></td>
</tr>
<tr>
<td>concrete: bool</td>
<td></td>
</tr>
<tr>
<td>hidden: bool</td>
<td></td>
</tr>
<tr>
<td>is_relation: bool</td>
<td>是否为特殊字段</td>
</tr>
<tr>
<td>model</td>
<td>当前模型</td>
</tr>
</tbody>
</table></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>关联字段的属性</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>many_to_many: bool</td>
<td></td>
</tr>
<tr>
<td>many_to_one: bool</td>
<td></td>
</tr>
<tr>
<td>one_to_many: bool</td>
<td></td>
</tr>
<tr>
<td>one_to_one: bool</td>
<td></td>
</tr>
<tr>
<td>related_model: type</td>
<td><strong>相关联的模型的类</strong></td>
</tr>
</tbody>
</table></div><div><p dir="auto">注：特殊字段 =&gt; 用于定义两个模型之间的关系的字段（ForeignKey, ManyToManyField, OneToOneField 其中之一）</p></div></div></div><div class="heading-wrapper"><h5 data-heading="数字字段" dir="auto" class="heading" id="数字字段"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>数字字段</h5><div class="heading-children"><div><p dir="auto">包括 uuid、整数、浮点数、bool</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>字段类型</th>
<th>解释</th>
<th>表单部件</th>
<th>相关验证</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>UUIDField</td>
<td>用于存储通用唯一标识符的字段</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>SmallIntegerField</td>
<td>用于存储 16 位整数</td>
<td></td>
<td>MinValueValidator, MaxValueValidator</td>
<td></td>
</tr>
<tr>
<td>IntegerField</td>
<td>用于存储 32 位整数</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>BigIntegerField</td>
<td>用于存储 64 位整数</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>PositiveSmallIntegerField</td>
<td>用于存储 16 位正整数</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>PositiveIntegerField</td>
<td>用于存储 32 位正整数</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>PositiveBigIntegerField</td>
<td>用于存储 64 位正整数</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>SmallAutoField</td>
<td>根据可用的 id 自动递增的 SmallIntegerField</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>AutoField</td>
<td>根据可用的 id 自动递增的 IntegerField</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>BigAutoField</td>
<td>根据可用的 id 自动递增的 BigIntegerField</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>FloatField</td>
<td>用于存储 float</td>
<td><span>localize=Ture</span> =&gt; TextInput<br><span>localize=False</span> =&gt; NumberInput</td>
<td></td>
<td></td>
</tr>
<tr>
<td>DecimalField(max_digits: int, decimal_places: int)</td>
<td>用于存储 Decimal</td>
<td><span>localize=Ture</span> =&gt; TextInput<br><span>localize=False</span> =&gt; NumberInput</td>
<td>DecimalValidator</td>
<td></td>
</tr>
<tr>
<td>BooleanField</td>
<td>用于存储 bool</td>
<td>CheckboxInput</td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div></div></div><div class="heading-wrapper"><h5 data-heading="字符串字段" dir="auto" class="heading" id="字符串字段"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>字符串字段</h5><div class="heading-children"><div><p dir="auto">包括 原始字符串、邮箱、url、时间、文件、IP地址、slug 等</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>字段类型</th>
<th>解释</th>
<th>表单部件</th>
<th>相关验证</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>CharField(max_length: int, db_collation?)</td>
<td>用于存储 str</td>
<td>TextInput</td>
<td>MaxLengthValidator</td>
<td></td>
</tr>
<tr>
<td>TextField(max_length: int, db_collation?)</td>
<td>用于存储大文本 str</td>
<td>TextInput</td>
<td></td>
<td></td>
</tr>
<tr>
<td>EmailField(max_length=254)</td>
<td>存储邮箱的 CharField</td>
<td></td>
<td>EmailValidator</td>
<td></td>
</tr>
<tr>
<td>URLField</td>
<td>存储 url 的 CharField</td>
<td></td>
<td>URLValidator</td>
<td></td>
</tr>
<tr>
<td>GenericIPAddressField(protocol='both', unpack_ipv4=False)</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>DateField(auto_now?: bool, auto_now_add?: bool)</td>
<td>用于存储 datetime.date</td>
<td>DateInput</td>
<td></td>
<td>auto_now, auto_now_add, default 三者互斥</td>
</tr>
<tr>
<td>TimeField(auto_now=False, auto_now_add=False)</td>
<td>用于存储 datetime.time</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>DateTimeField(auto_now?: bool, auto_now_add?: bool)</td>
<td>用于存储 datetime.datetime</td>
<td>DateTimeInput</td>
<td></td>
<td></td>
</tr>
<tr>
<td>DurationField</td>
<td>用于存储 datetime.timedelta</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>FilePathField(path='', match=None, recursive=False, allow_files=True, allow_folders=False, max_length=100)</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>SlugField(max_length=50)</td>
<td></td>
<td></td>
<td>validate_slug 或 validate_unicode_slug</td>
<td></td>
</tr>
</tbody>
</table></div></div></div><div class="heading-wrapper"><h5 data-heading="数据字段" dir="auto" class="heading" id="数据字段"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>数据字段</h5><div class="heading-children"><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>字段类型</th>
<th>解释</th>
<th>参数说明</th>
<th>表单部件</th>
<th>相关验证</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>BinaryField(max_length: int)</td>
<td>用于存储二进制数据</td>
<td></td>
<td></td>
<td>MaxLengthValidator</td>
<td></td>
</tr>
<tr>
<td>FileField(upload_to?: str, storage, max_length=100)</td>
<td>用于存储文件</td>
<td></td>
<td></td>
<td></td>
<td>FieldFile？</td>
</tr>
<tr>
<td>ImageField(upload_to=None, height_field=None, width_field=None, max_length=100)</td>
<td>用于验证有效的图像的 FileField</td>
<td></td>
<td>ClearableFileInput</td>
<td></td>
<td>需要 pillow 库</td>
</tr>
<tr>
<td>JSONField(encoder: json.JSONEncoder, decoder: json.JSONDecoder)</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>GeneratedField(expression, output_field, db_persist=None)</td>
<td>数据库底层中由其他字段计算的字段</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div><div><p dir="auto">注：<span>FileField</span> 实例会得到 <span>django.db.models.fields.files.FieldFile</span> 的代理 =&gt; 用于访问文件内容（如 <span>open(mode='rb')</span> 方法）</p></div></div></div><div class="heading-wrapper"><h5 data-heading="表间关系字段" dir="auto" class="heading" id="表间关系字段"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>表间关系字段</h5><div class="heading-children"><div><p dir="auto">定义模型间的关系的三个<strong>特殊字段</strong>：</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>表间关系</th>
<th>对应字段类型</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>多对一</td>
<td>ForeignKey(model: Model | str, ...)</td>
<td>支持<strong>自关联关系</strong></td>
</tr>
<tr>
<td>多对多</td>
<td>ManyToManyField(model: Model | str, through: Model | str, ...)</td>
<td>1. 建议使用复数形式<br>2. 只能设置在两个多对多模型之一<br>3. 总是会产生中间模型</td>
</tr>
<tr>
<td>一对一</td>
<td>OneToOneField(model: Model | str, ...)</td>
<td></td>
</tr>
</tbody>
</table></div><div><p dir="auto">注：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">model =&gt; <strong>关联模型</strong></li>
<li data-line="1" dir="auto">through =&gt; 自定义<strong>中间模型</strong> =&gt; 用于给多对多关系<strong>添加额外字段</strong></li>
</ul></div><div><p dir="auto">多方的相关方法：</p></div><div class="has-run-code-button"><pre dir="auto"><span>&lt;model1&gt;.&lt;model2&gt;_set.add(model: Model2, through_defaults: dict)
&lt;model1&gt;.&lt;model2&gt;_set.create(opt1, ..., through_defaults: dict)
&lt;model1&gt;.&lt;model2&gt;_set.set(model: Model2[], through_defaults: dict)
&lt;model1&gt;.&lt;model2&gt;_set.remove(model: Model2)
&lt;model1&gt;.&lt;model2&gt;_set.clear()</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">注：字段有命名限制 =&gt; 不能是关键字，不能有<strong>下划线</strong>，不能<strong>以下换线结尾</strong></p></div></div></div></div></div><div class="heading-wrapper"><h4 data-heading="Meta 内部类" dir="auto" class="heading" id="Meta_内部类"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Meta 内部类</h4><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">外链：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/models/#meta-options" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/models/#meta-options" target="_blank">模型 | Django 文档 | Django (djangoproject.com)</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/models/options/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/models/options/" target="_blank">模型 Meta 选项 | Django 文档 | Django (djangoproject.com)</a></p>
</blockquote></div><div><p dir="auto"><span>ordering: str[]</span> =&gt; 指定排序的字段<br>
<span>verbose_name_plural</span> =&gt;<br>
<span>abstract: bool</span> =&gt; 指定当前模型是否为<strong>抽象基类</strong> =&gt; 若为 true，那么该模型不会创建任何数据库表<br>
<span>indexes: models.Index[]</span> =&gt; 用于创建数据库索引，参见 <a data-href="#模型索引" href="#模型索引" class="internal-link" target="_self" rel="noopener">模型索引</a></p></div></div></div><div class="heading-wrapper"><h4 data-heading="模型自定义方法" dir="auto" class="heading" id="模型自定义方法"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模型自定义方法</h4><div class="heading-children"><div><p dir="auto">模型中的方法可以执行<strong>表级操作</strong>（这些定义<strong>不需要迁移</strong>）</p></div><div><p dir="auto">例子：</p></div><div class="has-run-code-button"><pre dir="auto"><span>class User(models.Model):
    username = models.CharField("user's name",max_length=20)
    password = models.CharField("user's password",max_length=20)

    def func(self):
        return f'{self.username} {self.password}'

    @property
    def virtual_attr(self):
        return f'{self.username} {self.password}'</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">两个常用的自定义方法：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>__str__()</span> =&gt; 用于交互式控制台或后台中现实某个模型本身的内容</li>
<li data-line="1" dir="auto"><span>get_absolute_url()</span> =&gt; 告诉 Django 如何计算对象的 url</li>
</ul></div><div><p dir="auto">可以重写 <span>save()</span>，<span>delete()</span> 等 <span>Model</span> 方法 =&gt;<br>
例子：</p></div><div class="has-run-code-button"><pre dir="auto"><span>def save(self, *args, **kwargs):
	# do something ...
	super().save(args,kwargs)
	# do something else ...</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h4 data-heading="模型类继承" dir="auto" class="heading" id="模型类继承"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模型类继承</h4><div class="heading-children"><div><p dir="auto">抽象基类 =&gt; <strong>模型基类</strong>在 <span>Meta</span> 子类上定义字段 <span>abstract = True</span> =&gt; 该模型不会创建任何表，仅用于继承<br>
多表继承 =&gt; <strong>模型基类</strong>在 <span>Meta</span> 子类上定义字段 <span>abstract = False</span> =&gt; 继承链中的每个模型都会创建表<br>
代理模型 =&gt; <strong>模型子类</strong>在 <span>Meta</span> 子类上定义字段 <span>proxy = True</span> =&gt; 该模型不会创建任何表，但是可以操作基类的字段和方法</p></div></div></div><div class="heading-wrapper"><h4 data-heading="模型索引" dir="auto" class="heading" id="模型索引"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模型索引</h4><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">外链：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/models/indexes/#index-options" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/models/indexes/#index-options" target="_blank">模型索引参考 | Django 文档 | Django (djangoproject.com)</a></p>
</blockquote></div><div><p dir="auto"><a data-href="#Meta 内部类" href="#Meta_内部类" class="internal-link" target="_self" rel="noopener">Meta 内部类</a> 中定义的 indexes 用于给模型创建多条索引</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>models.Index 构造器选项</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>expressions</td>
<td></td>
</tr>
<tr>
<td>fields</td>
<td></td>
</tr>
<tr>
<td>name</td>
<td></td>
</tr>
<tr>
<td>db_tablespace</td>
<td></td>
</tr>
<tr>
<td>opclasses</td>
<td></td>
</tr>
<tr>
<td>condition</td>
<td></td>
</tr>
</tbody>
</table></div></div></div><div class="heading-wrapper"><h4 data-heading="表单" dir="auto" class="heading" id="表单"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>表单</h4><div class="heading-children"><div><p dir="auto"><span>django.forms.forms</span> =&gt; <span>BaseForm</span>, <span>Form</span><br>
<span>django.forms.models</span> =&gt; <span>BaseModelForm</span>, <span>ModelForm</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">其中 <span>Form</span> &lt; <span>BaseForm</span>；<span>ModelForm</span> &lt; <span>BaseModelForm</span></li>
</ul></div><div><p dir="auto">BaseForm(<strong>data</strong>?: dict, <strong>files</strong>?: dict, field_order, auto_id, prefix, initial, error_class, label_suffix, empty_permitted, use_required_attribute, renderer)</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>data</span> =&gt; 非文件数据的字典</li>
<li data-line="1" dir="auto"><span>files</span> =&gt; 文件数据的字典</li>
</ul></div><div><p dir="auto">BaseModelForm(<strong>data</strong>?: dict, <strong>files</strong>?: dict, <strong>instance</strong>?: Model, auto_id, prefix, initial, error_class, label_suffix, empty_permitted, use_required_attribute, renderer)</p></div><div class="heading-wrapper"><h5 data-heading="模型表单" dir="auto" class="heading" id="模型表单"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模型表单</h5><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">参考：<a data-href="#models.fields.Field" href="#models.fields.Field" class="internal-link" target="_self" rel="noopener">models.fields.Field</a>, <a data-href="#forms.fields.Field" href="#forms.fields.Field" class="internal-link" target="_self" rel="noopener">forms.fields.Field</a></p>
</blockquote></div><div><p dir="auto">模型表单 =&gt; 绑定了模型的表单，支持的功能：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>__str__</span> 返回渲染 html 表单</li>
<li data-line="1" dir="auto"></li>
</ul></div><div><p dir="auto"><strong>数据库模型</strong>可以将一部分字段和字段参数的映射到<strong>模型表单</strong> =&gt; 相关细节可参考 <a data-href="#映射表" href="#映射表" class="internal-link" target="_self" rel="noopener">映射表</a></p></div><div><p dir="auto">例子：=&gt; 实现数据库模型 <span>User</span> 到模型表单 <span>UserForm</span> 的映射</p></div><div class="has-run-code-button"><pre dir="auto"><span>from django.forms import ModelForm
class UserForm(ModelForm):
    class Meta:
        model = User
        fields = ['username', 'password', 'file']</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">注：上述定义大致能以继承 <span>Form</span> 类来实现<strong>部分功能</strong>，于是会比上述定义麻烦得多</p></div></div></div><div class="heading-wrapper"><h5 data-heading="映射表" dir="auto" class="heading" id="映射表"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>映射表</h5><div class="heading-children"><div><p dir="auto"><strong>数据库模型字段</strong>所属的包到<strong>模型表单字段</strong>所属的包的映射：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.db.models.fields</span> =&gt; <span>django.forms.fields</span></li>
<li data-line="1" dir="auto"><span>django.db.models.fields.related</span> =&gt; <span>django.forms.models</span></li>
</ul></div><div><p dir="auto"><strong>数据库模型字段</strong>到<strong>模型表单字段</strong>的映射表：</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>数据库模型字段</th>
<th>模型表单字段</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>SmallIntegerField 或 BigIntegerField</td>
<td>IntegerField</td>
<td></td>
</tr>
<tr>
<td>BooleanField</td>
<td>BooleanField 或 NullBooleanField</td>
<td></td>
</tr>
<tr>
<td>BinaryField 或 TextField</td>
<td>CharField</td>
<td></td>
</tr>
<tr>
<td>ForeignKey</td>
<td>ModelChoiceField</td>
<td></td>
</tr>
<tr>
<td>ManyToManyField</td>
<td>ModelMultipleChoiceField</td>
<td></td>
</tr>
<tr>
<td>其他的类</td>
<td>同名类</td>
<td></td>
</tr>
</tbody>
</table></div><div><p dir="auto">注：AutoField, BigAutoField, SmallAutoField =&gt; 不呈现在表单中</p></div><div><p dir="auto"><strong>数据库模型字段参数</strong>到<strong>模型表单字段参数</strong>的映射表：</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>模型字段参数</th>
<th>表单字段参数</th>
</tr>
</thead>
<tbody>
<tr>
<td>verbose_name</td>
<td>label</td>
</tr>
<tr>
<td>help_text</td>
<td>help_text</td>
</tr>
<tr>
<td>choices 非空</td>
<td>widget = Select</td>
</tr>
<tr>
<td>blank=True</td>
<td>required = False</td>
</tr>
</tbody>
</table></div></div></div></div></div><div class="heading-wrapper"><h4 data-heading="附录-模型" dir="auto" class="heading" id="附录-模型"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>附录-模型</h4><div class="heading-children"><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.db.models.fields</span> =&gt; <span>Field</span></li>
<li data-line="1" dir="auto"><span>django.forms.fields</span> =&gt; <span>Field</span></li>
</ul></div><div><p dir="auto">以下每个小节的命名都是某个类的最短后缀路径</p></div><div class="heading-wrapper"><h5 data-heading="models.fields.Field" dir="auto" class="heading" id="models.fields.Field"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>models.fields.Field</h5><div class="heading-children"><div class="has-run-code-button"><pre dir="auto"><span>Field(
	  verbose_name?: str, 
	  name?: str, 
	  primary_key=False, 
	  max_length?: int, 
	  unique=False, 
	  blank=False, 
	  null=False,
	  db_index=False, 
	  rel, 
	  default=NOT_PROVIDED, 
	  editable=True, 
	  serialize=True, 
	  unique_for_date?: DateField, 
	  unique_for_month?: DateField, 
	  unique_for_year?: DateField, 
	  choices: dict&lt;str, any&gt;, 
	  help_text?: str, 
	  db_column, 
	  db_tablespace=False, 
	  auto_created=False, 
	  validators=(), 
	  error_messages, 
	  db_comment, 
	  db_default=NOT_PROVIDED
  )</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>blank: bool</span>, <span>null: bool</span> =&gt; 内存 或 数据库 中的是否可为空</li>
<li data-line="1" dir="auto"><span>default: any</span>, <span>db_defaul: any</span> =&gt; 内存 或 数据库 中的默认值</li>
<li data-line="2" dir="auto"></li>
</ul></div></div></div><div class="heading-wrapper"><h5 data-heading="forms.fields.Field" dir="auto" class="heading" id="forms.fields.Field"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>forms.fields.Field</h5><div class="heading-children"><div class="has-run-code-button"><pre dir="auto"><span>Field(
	  required=True, 
	  widget, 
	  label, 
	  initial, 
	  help_text, 
	  error_msg, 
	  show_hidden_initial=False, 
	  validators=(), 
	  localize=False, 
	  disabled=False, 
	  label_suffix, 
	  template_name
  )</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h5 data-heading="Form, ModelFormuery" dir="auto" class="heading" id="Form,_ModelFormuery"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>Form, ModelFormuery</h5><div class="heading-children"></div></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="模型查询" dir="auto" class="heading" id="模型查询"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模型查询</h3><div class="heading-children"><div><p dir="auto">数据库查询相关的包或类</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.db.models.base</span> =&gt; <span>Model</span></li>
<li data-line="1" dir="auto"><span>django.db.models.related</span> =&gt; <span>ForeignKey</span>, <span>ManyToManyField</span></li>
<li data-line="2" dir="auto"><span>django.db.models.query</span> =&gt; <span>QuerySet</span></li>
<li data-line="3" dir="auto"><span>django.db.models.expressions</span> =&gt; <span>F</span></li>
<li data-line="4" dir="auto"><span>django.db.models.aggregates</span> =&gt; <span>Avg</span>, <span>Min</span>, <span>Max</span></li>
<li data-line="5" dir="auto"><span>django.db.models.manager</span> =&gt; <span>Manager</span></li>
<li data-line="6" dir="auto"><span>django.db.models.fields.json</span> =&gt; <span>KT</span></li>
</ul></div><div class="heading-wrapper"><h4 data-heading="执行查询" dir="auto" class="heading" id="执行查询"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>执行查询</h4><div class="heading-children"><div><p dir="auto">创建或保存对象 =&gt;</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>&lt;Model&gt;.save(**opts)</span> =&gt; 保存模型对象</li>
<li data-line="1" dir="auto"><span>&lt;Manager&gt;.create(**attr_opts)</span> =&gt; 创建并保存对象<br>
=&gt; 例子：</li>
</ul></div><div class="has-run-code-button"><pre dir="auto"><span># 例1
user_model = UserModel(username='150',password='62')
user_model.save()
# 例2
UserModel.objects.create(username='150',password='62') # =&gt; 会返回对应模型</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">修改对象 =&gt; </p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>&lt;Model&gt;.&lt;attr&gt; = new_val</span> =&gt; 直接修改</li>
<li data-line="1" dir="auto"><span>&lt;Model&gt;.&lt;func&gt;()</span> =&gt; 间接修改</li>
<li data-line="2" dir="auto"><span>&lt;Model&gt;.&lt;many-Model&gt;_set.add(&lt;many-Model1&gt;, ...)</span> =&gt; 添加一个<span>多方模型</span>的记录</li>
<li data-line="3" dir="auto"><span>&lt;Model&gt;.&lt;one-Model&gt; = &lt;one-Model&gt;</span> =&gt; 覆盖一个<span>一方模型</span>的记录</li>
</ul></div><div><p dir="auto">检索对象 =&gt; 用到 QuerySet 类 =&gt; 通常通过 <span>&lt;Model&gt;.objects.all()</span> 得到<br>
=&gt; 通过 <span>get()</span> 获取单个对象<br>
=&gt; 通过 <span>filter()</span>, <span>exclude()</span> 过滤或排除检索到的对象集合<br>
注：QuerySet 是<strong>惰性的</strong> =&gt; 每次过滤都只是在添加限制条件，并非真正执行了 sql，只会在你 “要使用” 时才会执行<br>
=&gt; 支持<strong>切片</strong>极其<strong>step</strong>语法 =&gt; 例如：<span>&lt;QuerySet&gt;[0]</span>, <span>&lt;QuerySet&gt;[0:5]</span>, <span>&lt;QuerySet&gt;[::2]</span>, <span>&lt;QuerySet&gt;[1::2]</span><br>
注：指定步长后会执行 sql</p></div><div><p dir="auto">其中 <span>filter()</span>, <span>exclude()</span> 等方法支持如下形式的可选参数：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>&lt;attr&gt;</span> =&gt; 模型的属性</li>
<li data-line="1" dir="auto"><span>&lt;attr&gt;__&lt;lookup_type&gt;</span> =&gt; 指定模型属性的各种复杂查询 =&gt; <span>lookup_type</span> 的常见类型 =&gt; <span>lte</span>, <span>gte</span>. <span>lt</span>, <span>gt</span>, <span>exact</span>, <span>iexact</span>, <span>regex</span>, <span>iregex</span>, <span>contains</span>, <span>icontains</span>, <span>startswith</span>, <span>endswith</span>, <span>istartswith</span>, <span>iendswith</span>, <span>in</span></li>
<li data-line="2" dir="auto"><span>&lt;one-model&gt;_id</span> =&gt; 关联的表模型的 id</li>
<li data-line="3" dir="auto"><span>&lt;one-model&gt;__&lt;one-model-attr&gt;</span> =&gt; 指定 <span>一方模型</span> 的属性的限制条件</li>
<li data-line="4" dir="auto"><span>&lt;one-model&gt;__&lt;one-model-attr&gt;__&lt;lookuptype&gt;</span> =&gt; </li>
<li data-line="5" dir="auto"><span>&lt;many-model&gt;__&lt;many-model-attr&gt;</span> =&gt; 指定<strong>至少满足一个</strong> <span>多方模型</span> 的属性的限制条件</li>
<li data-line="6" dir="auto"><span>&lt;many-model&gt;__&lt;many-model-attr&gt;__&lt;lookuptype&gt;</span> =&gt;<br>
参数值：</li>
<li data-line="8" dir="auto">常量</li>
<li data-line="9" dir="auto">F 表达式 =&gt; <span>F(attr: str)</span> =&gt; 可以引用当前模型的字段，并进行相关运算</li>
<li data-line="10" dir="auto">可以使用 <span>Min</span>, <span>Max</span>, <span>Avg</span> 等</li>
</ul></div><div><p dir="auto">缓存问题 =&gt; <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/queries/#caching-and-querysets" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/queries/#caching-and-querysets" target="_blank">执行查询 | Django 文档 | Django (djangoproject.com)</a></p></div></div></div><div class="heading-wrapper"><h4 data-heading="异步查询" dir="auto" class="heading" id="异步查询"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>异步查询</h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="json 查询" dir="auto" class="heading" id="json_查询"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>json 查询</h4><div class="heading-children"><div><p dir="auto">json 字段在 <span>filter()</span>, <span>exclude()</span> 等方法中的参数的组成：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">前缀 <span>&lt;json-attr&gt;</span></li>
<li data-line="1" dir="auto"><span>__&lt;int&gt;</span> =&gt; 索引 json 数组的第 <span>&lt;int&gt;</span> 个 json 对象</li>
<li data-line="2" dir="auto"><span>__&lt;key&gt;</span> =&gt; 索引 json 对象 key 为 <span>&lt;key&gt;</span> 的 json 对象</li>
</ul></div><div><p dir="auto"><span>KT(lookup: str)</span> =&gt; 针对于 json 字段的类似于 <span>F(lookup: str)</span> 的函数</p></div><div><p dir="auto">json 字段还支持更多的 <span>lookup_type</span>：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>contains</span> =&gt; </li>
<li data-line="1" dir="auto"><span>contained_by</span> =&gt; </li>
<li data-line="2" dir="auto"><span>has_key: str</span> =&gt; 含有对应的 key</li>
<li data-line="3" dir="auto"><span>has_keys: str[]</span> =&gt; 含有给定 key 数组中的所有 key</li>
<li data-line="4" dir="auto"><span>has_any_keys: str[]</span> =&gt; 含有给定 key 数组中的一个 key</li>
</ul></div></div></div><div class="heading-wrapper"><h4 data-heading="通过 Q 对象完成复杂查询" dir="auto" class="heading" id="通过_Q_对象完成复杂查询"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>通过 Q 对象完成复杂查询</h4><div class="heading-children"><div><p dir="auto"><a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/queries/#complex-lookups-with-q-objects" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/queries/#complex-lookups-with-q-objects" target="_blank">执行查询 | Django 文档 | Django (djangoproject.com)</a></p></div></div></div><div class="heading-wrapper"><h4 data-heading="关联对象查询" dir="auto" class="heading" id="关联对象查询"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>关联对象查询</h4><div class="heading-children"><div><p dir="auto"><span>RelatedManager</span> 的方法：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>add(*objs, bulk=True, through_defaults=None)</span> =&gt; 在关联模型集合中添加模型</li>
<li data-line="1" dir="auto"><span>create(through_defaults=None, **kwargs)</span> =&gt; </li>
<li data-line="2" dir="auto"><span>remove(*objs, bulk=True)</span></li>
<li data-line="3" dir="auto"><span>clear(bulk=True)</span></li>
<li data-line="4" dir="auto"><span>set(objs, bulk=True, clear=False, through_defaults=None)</span><br>
注：上述方法具有异步版本</li>
</ul></div></div></div><div class="heading-wrapper"><h4 data-heading="附录-视图查询" dir="auto" class="heading" id="附录-视图查询"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>附录-视图查询</h4><div class="heading-children"><div><p dir="auto">注：下面的方法加上前缀 <span>a</span> 总是可以得到异步版本</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>Model 的类属性</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>objects: Manager</td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>Model 的方法</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>save(force_insert=False, force_update=False, using=DEFAULT_DB_ALIAS, update_fields=None): void</td>
<td>保存记录</td>
</tr>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>Manager 的方法</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>all(): QuerySet</td>
<td></td>
</tr>
<tr>
<td>create(**kwargs): Model</td>
<td>创建一个对象并保存记录</td>
</tr>
<tr>
<td>values_list()</td>
<td></td>
</tr>
</tbody>
</table></div><div><p dir="auto">注：Manager 实例通常通过 <span>Model.objects</span> 获取</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>QuerySet 的方法</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>get(**kwargs): Model</td>
<td>检索单个对象</td>
</tr>
<tr>
<td>filter(**lookup_args): QuerySet</td>
<td>过滤对象</td>
</tr>
<tr>
<td>exclude(**lookup_args): QuerySet</td>
<td>排除对象</td>
</tr>
<tr>
<td>values(): QuerySet</td>
<td></td>
</tr>
<tr>
<td>annotate(): QuerySet</td>
<td></td>
</tr>
</tbody>
</table></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="迁移(migrations)" dir="auto" class="heading" id="迁移(migrations)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>迁移(migrations)</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/migrations/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/migrations/" target="_blank">迁移</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/files/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/files/" target="_blank">管理文件</a>,<br>
ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/migration-operations/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/migration-operations/" target="_blank">迁移操作</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/schema-editor/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/schema-editor/" target="_blank">SchemaEditor</a>, </p>
</blockquote></div></div></div><div class="heading-wrapper"><h3 data-heading="数据库(database)" dir="auto" class="heading" id="数据库(database)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>数据库(database)</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/multi-db/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/multi-db/" target="_blank">多数据库</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/tablespaces/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/tablespaces/" target="_blank">表空间</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/optimization/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/optimization/" target="_blank">数据库访问优化</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/instrumentation/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/instrumentation/" target="_blank">数据库工具</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/db/fixtures/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/db/fixtures/" target="_blank">辅助工具</a>,<br>
ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/databases/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/databases/" target="_blank">数据库</a></p>
</blockquote></div></div></div><div class="heading-wrapper"><h3 data-heading="测试(test)" dir="auto" class="heading" id="测试(test)"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>测试(test)</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/testing/overview/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/testing/overview/" target="_blank">编写并运行测试</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/testing/tools/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/testing/tools/" target="_blank">测试工具</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/testing/advanced/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/testing/advanced/" target="_blank">进阶测试主题</a></p>
</blockquote></div></div></div><div class="heading-wrapper"><h3 data-heading="文件" dir="auto" class="heading" id="文件"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>文件</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/files/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/files/" target="_blank">文件处理</a></p>
</blockquote></div><div><p dir="auto">涉及的包和模块：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.forms.forms</span> =&gt; <span>Form</span></li>
<li data-line="1" dir="auto"><span>django.forms.fields</span> =&gt; </li>
<li data-line="2" dir="auto"><span>django.core.files.uploadedfile</span> =&gt; <span>UploadedFile</span>, <span>TemporaryUploadedFile</span></li>
</ul></div><div class="heading-wrapper"><h4 data-heading="获取文件上传" dir="auto" class="heading" id="获取文件上传"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>获取文件上传</h4><div class="heading-children"><div><p dir="auto">核心：视图中通过 <span>&lt;HttpRequest&gt;.FILES.get("&lt;file_key&gt;"): TemporaryUploadedFile</span> 获取指定文件</p></div><div><p dir="auto">有几种方法：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>open()</span> 方法 =&gt; 直接将文件写入本地</li>
<li data-line="1" dir="auto"><span>Model</span> 的 <span>FileField</span> 属性 =&gt; 可以将 <span>TemporaryUploadedFile</span> 实例直接赋值给该属性</li>
<li data-line="2" dir="auto"></li>
</ul></div><div><p dir="auto">例子1： =&gt; 将上传的文件写入本地 =&gt; 请求的表单中设置 <span>enctype="multipart/form-data"</span> 和  <span>method="POST"</span> 属性，以及 <span>&lt;input type="file" name="my_file"&gt;</span> 标签</p></div><div class="has-run-code-button"><pre dir="auto"><span>def handel_file(file: TemporaryUploadedFile):
    with open(f'media/{time.time_ns()}.html', 'wb+') as out:
        for x in file.chunks():
            out.write(x)

def my_view(req: HttpRequest):
	form = Form(req.POST, req.FILES)
	if req.method == 'POST' and form.is_valid():
		file = req.FILES.get('my_file')
		handel_file(file)
		return HttpResponse("uploded file saved")
	return HttpResponse("nothing to do")</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">例子2：</p></div><div class="has-run-code-button"><pre dir="auto"><span>def my_view(req: HttpRequest):
	u = m_user.User(username='liangxiongsl', password='lx15062', file=req.FILES.get('myfile'))  
	u.save()</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">例子3：</p></div><div class="has-run-code-button"><pre dir="auto"><span>from django.forms import ModelForm
class UserForm(ModelForm):
    class Meta:
        model = User
        fields = ['username', 'password', 'file']
def my_view(req: HttpRequest):
	uf = UserForm(data={
        'username': 'liangxiongsl',
        'password': 'lx15062',
    }, files={
        'file': req.FILES.get('myfile')
    })
	uf.save()</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">例子4：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">视图</li>
</ul></div><div class="has-run-code-button"><pre dir="auto"><span>def test(req: HttpRequest):
    match req.method:
        case 'GET':
            return TemplateResponse(req, 'test.html', {'form': SongForm()})
        case 'POST':
            form = SongForm(req.POST, req.FILES)

            if form.is_valid():
                form.save()
                return HttpResponse("test: 歌曲创建成功")
            else:
                return HttpResponse("test: 字段非法")
        case _:
            return HttpResponse("test: 请求方法错误")</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><ul dir="auto">
<li data-line="0" dir="auto">模板 <span>test.html</span></li>
</ul></div><div><pre dir="auto"><span>&lt;form action="{% url 'test' %}" method="post" enctype="multipart/form-data"&gt;
    {{ form }}
    &lt;input type="submit"&gt;
&lt;/form&gt;</span><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h4 data-heading="获取多个上传的文件" dir="auto" class="heading" id="获取多个上传的文件"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>获取多个上传的文件</h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="handler" dir="auto" class="heading" id="handler"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>handler</h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="File 对象" dir="auto" class="heading" id="File_对象"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>File 对象</h4><div class="heading-children"><div><p dir="auto">相关的内容</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.core.files.base</span> =&gt; <span>File</span>, <span>ContentFile</span></li>
<li data-line="1" dir="auto"><span>django.core.files.images</span> =&gt; <span>ImageFile</span></li>
</ul></div><div><p dir="auto"><span>File(file, name?: str)</span><br>
<span>File</span> 的属性和方法：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>file</span> =&gt; django 原生文件对象（可以通过 <span>open()</span> 得到）</li>
<li data-line="1" dir="auto"><span>name</span> =&gt; 相对于 <span>MEDIA_ROOT</span> 的路径</li>
<li data-line="2" dir="auto"><span>size</span> =&gt; 文件的大小</li>
</ul></div><div><p dir="auto"><span>ContentFile(content: str | bytes, name: str)</span><br>
注：可以用于创建模型实例时插入文件字段，如： <span>&lt;Model&gt;.objects.create(&lt;file-Field&gt; = ContentFile(&lt;bytes&gt;, &lt;filename&gt;))</span></p></div><div><p dir="auto"><span>ImageFile</span></p></div></div></div><div class="heading-wrapper"><h4 data-heading="附录-文件" dir="auto" class="heading" id="附录-文件"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>附录-文件</h4><div class="heading-children"><div><p dir="auto">模块索引：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.core.files.uploadedfile</span> =&gt; <span>UploadedFile</span>, <span>TemporaryUploadedFile</span></li>
</ul></div><div class="heading-wrapper"><h5 data-heading="UploadedFile" dir="auto" class="heading" id="UploadedFile"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>UploadedFile</h5><div class="heading-children"><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>UploadedFile 的方法</th>
<th>用途</th>
<th>补充</th>
</tr>
</thead>
<tbody>
<tr>
<td>read()</td>
<td>一次性读取文件的所有数据</td>
<td>有内存溢出的风险</td>
</tr>
<tr>
<td>multiple_chunks(size: int): bool</td>
<td>是否需要分块读取？</td>
<td></td>
</tr>
<tr>
<td>chunks(size: int): bytes</td>
<td>分块读取数据</td>
<td>不易出现内存溢出</td>
</tr>
</tbody>
</table></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>UploadedFile 的属性</th>
<th>解释</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr>
<td>name: str</td>
<td>上传的文件名</td>
<td>sd.html</td>
</tr>
<tr>
<td>size: int</td>
<td>上传文件的大小</td>
<td></td>
</tr>
<tr>
<td>content_type: str</td>
<td></td>
<td>text/html</td>
</tr>
<tr>
<td>content_type_extra: dict</td>
<td></td>
<td></td>
</tr>
<tr>
<td>charset: str</td>
<td></td>
<td></td>
</tr>
</tbody>
</table></div></div></div><div class="heading-wrapper"><h5 data-heading="TemporaryUploadedFile" dir="auto" class="heading" id="TemporaryUploadedFile"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>TemporaryUploadedFile</h5><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto"><span>TemporaryUploadedFile</span> &lt; <a data-href="#UploadedFile" href="#UploadedFile" class="internal-link" target="_self" rel="noopener">UploadedFile</a></p>
</blockquote></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>TemporaryUploadedFile 的方法</th>
<th>解释</th>
<th>例子</th>
</tr>
</thead>
<tbody>
<tr>
<td>temporary_file_path(): str</td>
<td>获取上传文件暂存在磁盘中的位置</td>
<td>windows 上会暂存在 <span>C:\Users\Administrator\AppData\Local\Temp\&lt;file&gt;</span></td>
</tr>
</tbody>
</table></div></div></div><div class="heading-wrapper"><h5 data-heading="InMemoryUploadedFile" dir="auto" class="heading" id="InMemoryUploadedFile"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>InMemoryUploadedFile</h5><div class="heading-children"><div><p dir="auto"><span>InMemoryUploadedFile</span> &lt; <a data-href="#UploadedFile" href="#UploadedFile" class="internal-link" target="_self" rel="noopener">UploadedFile</a></p></div></div></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="认证" dir="auto" class="heading" id="认证"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>认证</h3><div class="heading-children"><div><p dir="auto">django 的用户验证系统负责处理 用户账号、组、权限、基于 cookie 的会话、密码哈希化系统、为登录用户或限制内容提供表单和视图工具、可插拔的后端系统等</p></div><div><p dir="auto">涉及的包和模块：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.contrib.auth</span> =&gt; <span>authenticate()</span>, <span>login()</span>, <span>logout()</span></li>
<li data-line="1" dir="auto"><span>django.contrib.auth.models</span> =&gt; <span>User</span>, <span>UserManager</span></li>
<li data-line="2" dir="auto"><span>django.contrib.contenttypes</span> =&gt; </li>
<li data-line="3" dir="auto"><span>django.contrib.contenttypes.models</span> =&gt; <span>ContentType</span>, <span>ContentTypeManager</span></li>
<li data-line="4" dir="auto"><span>django.contrib.admin</span> =&gt; <span>ModelAdmin</span></li>
<li data-line="5" dir="auto"><span>django.contrib.admin</span> =&gt; <span>register()</span></li>
<li data-line="6" dir="auto"><span>django.contrib.auth.decorators</span> =&gt; <span>@login_required()</span>, <span>@permission_required()</span></li>
<li data-line="7" dir="auto"><span>django.contrib.auth.mixins</span> =&gt; <span>LoginRequiredMixin</span>, <span>PermissionRequiredMixin</span></li>
</ul></div><div><p dir="auto">注册 app 和中间件：</p></div><div class="has-run-code-button"><pre dir="auto"><span>INSTALLED_APPS = [
    'django.contrib.auth',
    'django.contrib.contenttypes',
]
MIDDLEWARE = [
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">=&gt; <span>auth</span> 提供了 <span>User</span>, <span>Group</span>, <span>Permission</span> 三种模型及其中间模型（共 6 个模型），以及对应的数据库表<br>
=&gt; <span>contenttypes</span> 提供了 <span>ContentType</span> 模型及其对应的数据库表<br>
注：<span>auth</span> 应用会为你的应用的每个模型创建 <span>add</span> / <span>change</span> / <span>delete</span> / <span>view</span> 四种权限（在 <span>auth_permission</span> 中）</p></div><div><p dir="auto"><span>User</span> &lt; <span>AbstractUser; AbstractBaseUser, PermissionsMixin; Model</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">属性<br>
=&gt; <span>username</span>, <span>password</span>, <span>email</span>, <span>first_name</span>, <span>last_name</span><br>
=&gt; <span>user_permissions: ManyRelatedManager</span>, <span>groups: ManyRelatedManager</span> =&gt; 2 个多对多字段</li>
<li data-line="3" dir="auto">类属性 =&gt; <span>objects: UserManager</span></li>
<li data-line="4" dir="auto">命令<br>
=&gt; <span>python manage.py createsuperuser --username=joe --email=joe@example.com</span> =&gt; 创建<strong>管理员</strong><br>
=&gt; <span>python manage.py changepassword &lt;username&gt;</span> =&gt; 修改用户密码</li>
</ul></div><div><p dir="auto"><span>UserManager</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">方法 =&gt; <span>create_user(username, email?, password?, first_name?, last_name?): User</span> =&gt; 创建<strong>普通用户</strong></li>
</ul></div><div><p dir="auto"><span>ContentType</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">类属性 =&gt; <span>objects: ContentTypeManager</span></li>
</ul></div><div><p dir="auto"><span>ContentTypeManager</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">方法 =&gt; <span>get_for_model(model: Model, for_concrete_model=True): ContentType</span> =&gt; 获取应用模型唯一对应的 <span>ContentType</span> 实例</li>
</ul></div><div><p dir="auto">用户验证 =&gt; <span>authenticate(username, password): User | None</span></p></div><div class="heading-wrapper"><h4 data-heading="权限和认证" dir="auto" class="heading" id="权限和认证"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>权限和认证</h4><div class="heading-children"><div><p dir="auto">例子：=&gt; 寻找属于某个应用的指定权限</p></div><div class="has-run-code-button"><pre dir="auto"><span>from django.contrib.auth.models import Permission
def get_permission(app: str, model: str, permission: str):
    return Permission.objects.all().get(
        content_type__app_label=app,
        content_type__model=model,
        codename__startswith=permission
    )
# 添加权限
user.user_permissions.add(get_permission('admin', 'user', 'change'))</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">判断是否有权限 =&gt; <span>&lt;User&gt;.has_perm('&lt;app&gt;.&lt;permission&gt;_&lt;model&gt;'): bool</span><br>
获取用户的用户权限 =&gt; <span>&lt;User&gt;.get_user_permissions(): str[]</span><br>
获取用户的组权限 =&gt; <span>&lt;User&gt;.get_group_permissions(): str[]</span><br>
获取用户的所有权限 =&gt; <span>&lt;User&gt;.get_all_permissions()</span><br>
注册权限 =&gt; </p></div><div class="has-run-code-button"><pre dir="auto"><span>content_type = ContentType.objects.get_for_model(m_user.User)
try:
	Permission.objects.create(
		codename="do_something_with_user",
		name='do something with user model',
		content_type=content_type,
	)
except IntegrityError:
	print('add permission failed')</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">缓存问题 =&gt; 用户权限不会实时更新给 <span>User</span> 的实例，如 <span>&lt;User&gt;.has_perm("&lt;app&gt;.&lt;permission&gt;_&lt;model&gt;")</span> 只会检查该实例的缓存中是否有该权限</p></div><div><p dir="auto"><strong>代理模型</strong>相关 =&gt; 代理模型不会继承其父模型的权限</p></div><div><p dir="auto"><span>Meta</span> =&gt; 模型的 <span>Meta</span> 内部类的 <span>permissions: 2-tuple[]</span> 能添加默认权限？</p></div></div></div><div class="heading-wrapper"><h4 data-heading="web请求认证" dir="auto" class="heading" id="web请求认证"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>web请求认证</h4><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">前置知识：<a data-href="python#装饰器" href="docs/草稿/后端/lang/python.html#装饰器" class="internal-link" target="_self" rel="noopener">python &gt; 装饰器</a></p>
</blockquote></div><div><p dir="auto">获取请求的用户 =&gt; <span>request.user: User | AnonymousUser</span> =&gt; 得到 已认证用户 或 匿名用户<br>
判断用户是否已认证 =&gt; <span>&lt;User&gt;.is_authenticated</span> 或 <span>AnonymousUser.is_authenticated</span></p></div><div><p dir="auto">认证 =&gt; <span>authenticate(username, password): User | None</span><br>
登录 =&gt; <span>login(req: HttpRequest, user: User, backend)</span> =&gt; 将认证成功的 <span>&lt;user&gt;</span> 插入到 <span>django_session</span> 表中，从而实现登录<br>
登出 =&gt; <span>logout(req: HttpRequest)</span></p></div><div><p dir="auto">例子：=&gt; 登录视图</p></div><div class="has-run-code-button"><pre dir="auto"><span>def my_view(req: HttpRequest):  
    username = req.POST["username"]
    password = req.POST["password"]  
    user = authenticate(req, username=username, password=password)
    if user is not None:
    	login(req, user)
    	# Redirect to a success page ...
    else:
    	print("user don't exists")</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">装饰器 <span>@login_required(redirect_field_name='next', login_url=None)</span> =&gt; 若用户没有登录，那么请求会重定向到 <span>&lt;login_url&gt;?&lt;redirect_field_name&gt;={&lt;req&gt;.path}</span><br>
注：<span>&lt;login_url&gt;</span> 默认为 <span>settings</span> 模块中的变量 <span>LOGIN_URL</span></p></div><div><p dir="auto">例子2：=&gt; 函数视图上使用<strong>装饰器</strong> <span>@login_required()</span> =&gt; 强制请求进行登录</p></div><div class="has-run-code-button"><pre dir="auto"><span># (1) 配置登录路由：
urlpatterns = [
   path('login/', v_index.do_login, name='login'),
   path('any_view/', v_index.any_view, name='any_view'),
]

# (2) 定义登录视图：
# GET =&gt; 获取登录表单
# POST =&gt; 实现登录功能和转发
@require_http_methods(['GET', 'POST'])
def do_login(req: HttpRequest):
    if req.method == 'GET':
        return render(req, 'login.html', {'next': req.GET.get("next")})

    username = req.POST["username"]
    password = req.POST["password"]
    user = authenticate(req, username=username, password=password)
    if user is not None:
        login(req, user)
        print('login success')
        return HttpResponseRedirect(req.GET.get("next"))
    else:
        print('login failed')
        return HttpResponseRedirect(f'/login/?next={req.GET.get("next")}')

# (3) 在某个视图调用前进行验证
@login_required(redirect_field_name='next', login_url="/login/")
def any_view(req: HttpRequest):
	...</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">=&gt; 类似的装饰器：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>user_passes_test(test_func: (req) =&gt; bool, login_url=None, redirect_field_name='next')</span> =&gt; <span>test_func</span> 返回 <span>False</span> 时会重定向</li>
<li data-line="1" dir="auto"><span>permission_required(perm: tuple, login_url=None, raise_exception=False)</span> =&gt; 检查用户是否有权限（可以是多个权限）</li>
</ul></div><div><p dir="auto">混合类 <span>LoginRequiredMixin</span></p></div><div><p dir="auto">例子3：类视图上继承<strong>混合类</strong> <span>LoginRequiredMixin</span> =&gt; 强制请求进行登录</p></div><div class="has-run-code-button"><pre dir="auto"><span>... 

class AnyView(LoginRequiredMixin, TemplateView):
	redirect_field_name='next'
	login_url="/login/"
	
    template_name = 'test.html'</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">注：<span>LoginRequiredMixin</span> 必须是第一个继承<br>
=&gt; 类似的混合类：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>UserPassesTestMixin</span></li>
<li data-line="1" dir="auto"><span>PermissionRequiredMixin</span></li>
<li data-line="2" dir="auto"><span>AccessMixin</span></li>
</ul></div></div></div><div class="heading-wrapper"><h4 data-heading="认证视图" dir="auto" class="heading" id="认证视图"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>认证视图</h4><div class="heading-children"><div><p dir="auto"><span>django.contrib.auth.urls</span> 包含 8 条路由：</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>path</th>
<th>name</th>
<th>模板</th>
</tr>
</thead>
<tbody>
<tr>
<td>login/</td>
<td>login</td>
<td>registration/login.html</td>
</tr>
<tr>
<td>logout/</td>
<td>logout</td>
<td>registration/logged_out.html</td>
</tr>
<tr>
<td>password_change/</td>
<td>password_change</td>
<td>registration/password_change_form.html</td>
</tr>
<tr>
<td>password_change/done/</td>
<td>password_change_done</td>
<td>registration/password_change_done.html</td>
</tr>
<tr>
<td>password_reset/</td>
<td>password_reset</td>
<td>registration/password_reset_form.html</td>
</tr>
<tr>
<td>password_reset/done/</td>
<td>password_reset_done</td>
<td>registration/password_reset_done.html</td>
</tr>
<tr>
<td><span>reset/&lt;uidb64&gt;/&lt;token&gt;/</span></td>
<td>password_reset_confirm</td>
<td>registration/password_reset_confirm.html</td>
</tr>
<tr>
<td><span>reset/done/</span></td>
<td>password_reset_complete</td>
<td>registration/password_reset_complete.html</td>
</tr>
</tbody>
</table></div></div></div><div class="heading-wrapper"><h4 data-heading="密码管理" dir="auto" class="heading" id="密码管理"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>密码管理</h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="邮箱" dir="auto" class="heading" id="邮箱"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>邮箱</h4><div class="heading-children"><div><p dir="auto">鸣谢：<a data-tooltip-position="top" aria-label="https://www.cnblogs.com/rainbow-tan/p/16278443.html" rel="noopener" class="external-link" href="https://www.cnblogs.com/rainbow-tan/p/16278443.html" target="_blank">Django使用QQ邮箱发送邮件 - 南风丶轻语 - 博客园 (cnblogs.com)</a></p></div><div><p dir="auto">涉及的包和模块：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.core.mail</span> =&gt; <span>send_mail()</span>, <span>send_mass_mail()</span>, <span>mail_admins()</span>, <span>mail_managers()</span></li>
</ul></div><div><p dir="auto">Django 支持多种邮箱后端：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.core.mail.backends.smtp.EmailBackend</span></li>
<li data-line="1" dir="auto"><span>django.core.mail.backends.console.EmailBackend</span></li>
<li data-line="2" dir="auto"><span>django.core.mail.backends.filebased.EmailBackend</span></li>
<li data-line="3" dir="auto"><span>django.core.mail.backends.locmem.EmailBackend</span></li>
<li data-line="4" dir="auto"><span>django.core.mail.backends.dummy.EmailBackend</span></li>
</ul></div><div><p dir="auto">配置 <span>smtp</span> 的例子：</p></div><div class="has-run-code-button"><pre dir="auto"><span>EMAIL_BACKEND = 'django.core.mail.backends.smtp.EmailBackend'
# qq smtp 主机
EMAIL_HOST = 'smtp.qq.com'
EMAIL_PORT = 587
EMAIL_USE_TLS = True
# qq 邮箱
EMAIL_HOST_USER = '1708494470@qq.com'
# qq 邮箱上开启 SMTP 后得到的授权码
EMAIL_HOST_PASSWORD = 'gotcasiskumechjd'

# EMAIL_USE_SSL = True
# EMAIL_SSL_KEYFILE = 
# EMAIL_SSL_CERTFILE =</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><span>send_mail()</span> =&gt; 发送普通邮件</p></div><div class="has-run-code-button"><pre dir="auto"><span>send_mail(subject, message, from_email, recipient_list: str[], 
	fail_silently=False, auth_user?, auth_password?, connection?: Backend,
	html_message?
)</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">注：若指定了 <span>html_message</span>，那么邮件会变为 <span>multipart/alternative</span> 实例</p></div><div><p dir="auto"><span>send_mass_mail()</span> =&gt; 大量发送邮件</p></div><div class="has-run-code-button"><pre dir="auto"><span>send_mass_mail(data: tuple, 
	fail_silently=False, auth_user?, auth_password?, connection?: Backend
)</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">注：<span>data</span> 中每个元素为 <span>(subject, message, from_email, recipient_list)</span><br>
注2：只能发 <span>text/plain</span></p></div><div><p dir="auto"><span>mail_admins()</span> =&gt; 给网站所有者们发送邮件</p></div><div class="has-run-code-button"><pre dir="auto"><span>mail_admins(subject, message, 
	fail_silently=False, connection?: Backend, 
	html_message?
)</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">=&gt; 用到的额外配置：</p></div><div class="has-run-code-button"><pre dir="auto"><span>EMAIL_SUBJECT_PREFIX = '[mysite:django] '
SERVER_EMAIL = '1708494470@qq.com'
ADMINS = [
    ('lx', '1506218507@qq.com'),
    # ('drk', '1708494470@qq.com')
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><span>mail_managers()</span> =&gt; 给管理员们发送邮件</p></div><div class="has-run-code-button"><pre dir="auto"><span>mail_admins(subject, message, 
	fail_silently=False, connection?: Backend, 
	html_message?
)</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">=&gt; 用到的额外配置：</p></div><div class="has-run-code-button"><pre dir="auto"><span>EMAIL_SUBJECT_PREFIX = '[mysite:django] '
SERVER_EMAIL = '1708494470@qq.com'
MANAGERS = [
    ('lx', '1506218507@qq.com'),
    # ('drk', '1708494470@qq.com')
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><span>EmailMessage</span> 类</p></div><div class="has-run-code-button"><pre dir="auto"><span>EmailMessage(subject?, body?, from_email?, to?: tuple | array,
	bcc?: tuple | array, connection?: Backend, 
	attachments?: MIMEBase | (filename, content, minetype),
	headers?: dict, cc?, reply_to?
)</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">=&gt; 方法：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>send(fail_silently=False): int</span> =&gt; 发送邮件消息，发送成功返回 1，否则返回 0</li>
<li data-line="1" dir="auto"><span>message(): SafeMIMEMultipart</span> =&gt; </li>
<li data-line="2" dir="auto"><span>recipients(): array</span> =&gt; 返回一个包含邮件所以收件人的列表</li>
<li data-line="3" dir="auto"><span>attach(filename?, content?, mimetype?)</span> =&gt; 添加附件</li>
<li data-line="4" dir="auto"><span>attach_file(path, minetype?)</span> =&gt; 相对于项目根目录发送附件，<del>甚至可以把 <span>db.sqlite3</span>作为附件</del><br>
=&gt; 例子：</li>
</ul></div><div class="has-run-code-button"><pre dir="auto"><span>em = EmailMessage("嘿咻咻", "my content ...", '1708494470@qq.com', [user.email])  
em.attach('geji.html',  
          '&lt;img src="https://ts4.cn.mm.bing.net/th?id=OVP.FqDKX5rpgVBhbjE43cH4PQEsC7&amp;w=608&amp;h=342&amp;c=7&amp;rs=1&amp;qlt=90&amp;o=6&amp;dpr=1.3&amp;pid=1.7"&gt;',  
          'text/html')  
em.attach_file('manage.py')  
em.send()</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><span>get_connection()</span></p></div><div><p dir="auto">常见问题：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">使用 qq stmp 服务时，确保用于发邮件的邮箱只能是 <span>EMAIL_HOST_PASSWORD</span> 对应的邮箱</li>
</ul></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="缓存" dir="auto" class="heading" id="缓存"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>缓存</h3><div class="heading-children"><div><p dir="auto">缓存的作用 =&gt; 加速访问者访问网站的内容；网站暂存和检索某些 python 对象</p></div><div><p dir="auto">缓存引擎：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">Memcached</li>
<li data-line="1" dir="auto">Redis</li>
<li data-line="2" dir="auto">数据库缓存</li>
<li data-line="3" dir="auto">文件系统缓存</li>
<li data-line="4" dir="auto">本地内存缓存（默认）</li>
<li data-line="5" dir="auto">虚拟缓存（用于开发模式）</li>
<li data-line="6" dir="auto">自定义缓存后端</li>
</ul></div><div><p dir="auto">注：可以配置多条缓存，不同缓存可以使用不同缓存引擎</p></div><div><p dir="auto">需要缓存某个实例（视图 / 模板 / 任何 python 对象）时，都需要指定 <strong>缓存引擎</strong>，<strong>缓存键</strong>，<strong>缓存版本号</strong>，<strong>缓存实例</strong><br>
=&gt; <a data-href="#缓存参数" href="#缓存参数" class="internal-link" target="_self" rel="noopener">缓存参数</a>，<a data-href="#缓存中间件" href="#缓存中间件" class="internal-link" target="_self" rel="noopener">缓存中间件</a> 描述了一些必要配置<br>
=&gt; <a data-href="#视图缓存" href="#视图缓存" class="internal-link" target="_self" rel="noopener">视图缓存</a>，<a data-href="#模板片段缓存" href="#模板片段缓存" class="internal-link" target="_self" rel="noopener">模板片段缓存</a> 描述了两种缓存过程<br>
=&gt; <a data-href="#访问缓存" href="#访问缓存" class="internal-link" target="_self" rel="noopener">访问缓存</a> 能直观的了解这个过程</p></div><div><p dir="auto">Memcached</p></div><div class="has-run-code-button"><pre dir="auto"><span>CACHES = {
    "default": {
        "BACKEND": "django.core.cache.backends.memcached.PyMemcacheCache",
        # "BACKEND": "django.core.cache.backends.memcached.PyLibMCCache",
        "LOCATION": "127.0.0.1:11211",
        # "LOCATION": ["172.19.26.240:11211", "172.19.26.242:11211"],
        # "LOCATION": "unix:/tmp/memcached.sock",
    },
}</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">Redis</p></div><div class="has-run-code-button"><pre dir="auto"><span>CACHES = {
    "default": {
        "BACKEND": "django.core.cache.backends.redis.RedisCache",
        "LOCATION": "redis://127.0.0.1:6379",
        # "LOCATION": "redis://username:password@127.0.0.1:6379",
        # "LOCATION": [
        #     "redis://127.0.0.1:6379",  # leader
        #     "redis://127.0.0.1:6378",  # read-replica 1
        #     "redis://127.0.0.1:6377",  # read-replica 2
        # ],
    }
}</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">=&gt; <span>pip install redis</span>, <span>pip install hiredis</span><br>
数据库缓存</p></div><div class="has-run-code-button"><pre dir="auto"><span>CACHES = {
    "default": {
        "BACKEND": "django.core.cache.backends.db.DatabaseCache",
        "LOCATION": "my_cache_table",
    }
}</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">=&gt; <span>python manage.py createcachetable</span> =&gt; 创建缓存表<br>
文件系统缓存</p></div><div class="has-run-code-button"><pre dir="auto"><span>CACHES = {
    "default": {
        "BACKEND": "django.core.cache.backends.filebased.FileBasedCache",
        "LOCATION": "/var/tmp/django_cache",  
        # "LOCATION": "c:/foo/bar",
    }
}</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">注：<span>LOCATION</span> 目录不宜包含在 <span>MEDIA_ROOT</span> 或 <span>STATICFILES_FINDERS</span> 所指定的目录中，否则<strong>可能造成敏感数据的泄露</strong><br>
本地内存缓存</p></div><div class="has-run-code-button"><pre dir="auto"><span>CACHES = {
    "default": {
        "BACKEND": "django.core.cache.backends.locmem.LocMemCache",
        "LOCATION": "unique-snowflake",
    }
}</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">虚拟缓存</p></div><div class="has-run-code-button"><pre dir="auto"><span>CACHES = {
    "default": {
        "BACKEND": "django.core.cache.backends.dummy.DummyCache",
    }
}</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div class="heading-wrapper"><h4 data-heading="缓存参数" dir="auto" class="heading" id="缓存参数"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>缓存参数</h4><div class="heading-children"><div><p dir="auto"><span>TIMEOUT</span> =&gt; 缓存超时时间(s)，默认为 300；设为 <span>None</span> 时将永久缓存；设为 0 时不缓存<br>
<span>OPTIONS</span> =&gt; 传递给缓存后端的选项，通常包含 <span>MAX_ENTRIES: int</span>（最大缓存条目），<span>CULL_FREQUENCY: int</span>（条目达到 <span>MAX_ENTRIES</span> 时，将删除 <span>MAX_ENTRIES / CULL_FREQUENCY</span> 个条目）<br>
<span>KEY_PREFIX</span> =&gt; 缓存实例进行保存或检索时，区别它们的 <span>cache_key</span> 的一部分（与缓存引擎 <span>CACHES</span> 的 key 一一对应）<br>
注：<span>cache_key</span> 形如 <span>&lt;KEY_PREFIX&gt;:&lt;version&gt;:&lt;key&gt;</span>（<span>version</span> 为缓存实例的版本号（默认为 1），<span>key</span> 是我们手动 或 Django 自动缓存实例时使用的键）<br>
<span>VERSION</span> =&gt; 缓存实例的默认版本号<br>
<span>KEY_FUNCTION: str</span> =&gt; 指定一条到某个函数的路径，该函数负责处理将缓存实例的 <span>cache_key</span> 进行更改，其形如 <span>(cache_key: str) =&gt; str</span></p></div><div><p dir="auto">例子：</p></div><div class="has-run-code-button"><pre dir="auto"><span>CACHES = {
    "default": {
        "BACKEND": "django.core.cache.backends.filebased.FileBasedCache",
        "LOCATION": "/var/tmp/django_cache",
        "TIMEOUT": 60,
        "OPTIONS": {"MAX_ENTRIES": 1000},
    }
}</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h4 data-heading="缓存中间件" dir="auto" class="heading" id="缓存中间件"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>缓存中间件</h4><div class="heading-children"><div><p dir="auto">配置：</p></div><div class="has-run-code-button"><pre dir="auto"><span>MIDDLEWARE = [
    "django.middleware.cache.UpdateCacheMiddleware",
    "django.middleware.common.CommonMiddleware",
    "django.middleware.cache.FetchFromCacheMiddleware",
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">注：中间件的执行顺序是<strong>从后往前</strong>依次执行的 =&gt; <span>FetchFromCacheMiddleware</span> 在请求阶段执行，<span>UpdateCacheMiddleware</span> 在响应阶段执行</p></div><div><p dir="auto">其他配置：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>CACHE_MIDDLEWARE_ALIAS</span> =&gt; 用于存储的缓存别名</li>
<li data-line="1" dir="auto"><span>CACHE_MIDDLEWARE_SECONDS</span> =&gt; 应缓存个页面的秒数，默认为 600</li>
<li data-line="2" dir="auto"><span>CACHE_MIDDLEWARE_KEY_PREFIX</span> =&gt; </li>
</ul></div></div></div><div class="heading-wrapper"><h4 data-heading="视图缓存" dir="auto" class="heading" id="视图缓存"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>视图缓存</h4><div class="heading-children"><div><p dir="auto"><span>django.views.decorators.cache</span> =&gt; <span>@cache_page()</span></p></div><div><p dir="auto"><span>@cache_page(timeout: int, cache?: str, key_prefix?: str)</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>timeout</span> =&gt; 缓存过期时间(s)</li>
<li data-line="1" dir="auto"><span>cache</span> =&gt; 指定缓存配置，即 <span>CACHES</span> 中的一个 <span>key</span></li>
<li data-line="2" dir="auto"><span>key_prefix</span> =&gt; </li>
</ul></div><div><p dir="auto"><strong>通过路由缓存视图</strong> =&gt; 根据 <span>cache_page</span> 的装饰器特性</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">例子：</li>
</ul></div><div class="has-run-code-button"><pre dir="auto"><span>from django.views.decorators.cache import cache_page
urlpatterns = [
    path("foo/&lt;int:code&gt;/", my_view),
]
# =&gt; 
urlpatterns = [
    path("foo/&lt;int:code&gt;/", cache_page(60 * 15)(my_view)),
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><span>make_template_fragment_key()</span></p></div></div></div><div class="heading-wrapper"><h4 data-heading="模板片段缓存" dir="auto" class="heading" id="模板片段缓存"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>模板片段缓存</h4><div class="heading-children"><div class="has-run-code-button"><pre dir="auto"><span>{% load cache %}
{% cache 500 sidebar %}
    .. sidebar ..
{% endcache %}</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h4 data-heading="访问缓存" dir="auto" class="heading" id="访问缓存"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>访问缓存</h4><div class="heading-children"><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>相关模块和包</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>django.core.cache</td>
<td><span>caches</span>, <span>cache</span>, <span>CacheHandler</span></td>
</tr>
<tr>
<td>django.core.cache.backends.db</td>
<td><span>DatabaseCache</span></td>
</tr>
</tbody>
</table></div><div><p dir="auto"><span>caches: CacheHandler</span> 对象 =&gt; <span>caches[cache_name: str]: DatabaseCache</span><br>
<span>cache: DatabaseCache</span> 对象 =&gt; 等价于 <span>caches['default']</span></p></div><div><p dir="auto"><span>DatabaseCache</span> 类</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>set(key: str, value: any, timeout=DEFAULT_TIMEOUT, version=None)</span> =&gt; 为一个数据设置缓存，具有时间限制(s) =&gt; 注：<span>timeout</span> 为 0 时不缓存，为 None 时缓存长时间不会过期</li>
<li data-line="1" dir="auto"><span>get(key: str, default=None, version=None): any</span> =&gt; 获取一个缓存数据</li>
<li data-line="2" dir="auto"><span>add(key: str, value: any, timeout=DEFAULT_TIMEOUT, version=None)</span> =&gt; 为一个数据设置缓存，仅当该 key 对应的数据不存在时</li>
<li data-line="3" dir="auto"><span>get_or_set(key: str, value: any, timeout=DEFAULT_TIMEOUT, version=None): any</span> =&gt; 若 key 存在，那么返回 key 对应的值；否则将 key 对应的值设为 value，并返回 value</li>
<li data-line="4" dir="auto"><span>get_many(keys: str[], version=None): dict</span> =&gt; 提供一组 key，返回一个缓存字典</li>
<li data-line="5" dir="auto"><span>delete(key: str, version=None)</span> =&gt; 删除指定的键值对</li>
<li data-line="6" dir="auto"><span>delete_many(keys: str[], version=None)</span> =&gt; 删除多个指定的键值对</li>
<li data-line="7" dir="auto"><span>clear()</span> =&gt; 删除所有键值对</li>
<li data-line="8" dir="auto"><span>touch(key: str, timeout=DEFAULT_TIMEOUT, version=None)</span> =&gt; 设置键值对的新的过期时间</li>
<li data-line="9" dir="auto"><span>incr(key: str, delta=1, version=None)</span> =&gt; 增加键值对的过期时间</li>
<li data-line="10" dir="auto"><span>decr(key: str, delta=1, version=None)</span> =&gt; 减少键值对的过期时间</li>
<li data-line="11" dir="auto"><span>close()</span> =&gt; 关闭与缓存的连接</li>
</ul></div><div><p dir="auto">注：<span>version</span> 默认为 <span>VERSION</span> 指定的值，通常为 1</p></div></div></div><div class="heading-wrapper"><h4 data-heading="下游缓存" dir="auto" class="heading" id="下游缓存"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>下游缓存</h4><div class="heading-children"><div><p dir="auto"><strong>下游缓存</strong> =&gt; 一般 Django 缓存的视图并不会区分请求的 <span>request</span> 是否不同，虽然有性能的优势，但是不能区分每个用户 =&gt; 造成安全问题</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>涉及的模块和包</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>django.views.decorators.vary</td>
<td><span>@vary_on_headers()</span>, <span>@vary_on_cookie</span></td>
</tr>
<tr>
<td>django.views.decorators.cache</td>
<td><span>@cache_control()</span></td>
</tr>
<tr>
<td>django.utils.cache</td>
<td><span>patch_vary_headers()</span></td>
</tr>
</tbody>
</table></div><div><p dir="auto"><span>@vary_on_headers(*headers: str)</span> =&gt; 通过头部信息来区分不同的请求</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">例子：<span>@vary_on_headers("User-Agent", "Cookie")</span></li>
</ul></div><div><p dir="auto"><span>patch_vary_headers(res: HttpResponse, vary_headers: str[])</span> =&gt; 类似<br>
=&gt; 例子：</p></div><div class="has-run-code-button"><pre dir="auto"><span>def my_view(request):
    response = render(request, "template_name")
    patch_vary_headers(response, ["User-Agent", "Cookie"])
    return response</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><span>@vary_on_cookie</span> =&gt; 等价于 <span>@vary_on_headers("Cookie")</span></p></div><div><p dir="auto">用户通常面临两种缓存：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">浏览器缓存（<strong>私有缓存</strong>）</li>
<li data-line="1" dir="auto">其服务提供商的缓存（<strong>公共缓存</strong>）</li>
</ul></div><div><p dir="auto"><span>@cache_control(private?: bool, public?: bool, max_age?: int)</span> =&gt; 指定该视图是否允许公共缓存</p></div><div><p dir="auto"><span>patch_cache_control(res: HttpResponse, private?: bool, public?: bool, max_age?: int)</span> =&gt; 同上<br>
=&gt; 例子：</p></div><div class="has-run-code-button"><pre dir="auto"><span>@vary_on_cookie
def list_blog_entries_view(request):
    if request.user.is_anonymous:
        response = render_only_public_entries()
        patch_cache_control(response, public=True)
    else:
        response = render_private_and_public_entries(request.user)
        patch_cache_control(response, private=True)

    return response</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="会话" dir="auto" class="heading" id="会话"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>会话</h3><div class="heading-children"><div><p dir="auto">会话允许每个站点访问者存储和检索自己的数据</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">基于 <strong>数据库</strong> / <strong>文件</strong> 的会话 =&gt; 存储于服务端</li>
<li data-line="1" dir="auto">基于 <strong>cookie</strong> 的会话 =&gt; 存储于客户端</li>
<li data-line="2" dir="auto">基于 <strong>缓存</strong> 的会话 =&gt; 依赖于 <a data-href="#缓存" href="#缓存" class="internal-link" target="_self" rel="noopener">缓存</a> 的配置（可能基于 内存 / 数据库 / 文件 等）</li>
</ul></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>涉及的模块和包</th>
<th>内容</th>
</tr>
</thead>
<tbody>
<tr>
<td>django.contrib.session.models</td>
<td><span>Session</span></td>
</tr>
</tbody>
</table></div><div><p dir="auto">配置：</p></div><div class="has-run-code-button"><pre dir="auto"><span>MIDDLEWARE = [
	'django.contrib.sessions.middleware.SessionMiddleware'
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">会话引擎</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">基于数据库的会话 =&gt; <span>Session</span> 模型及其数据库表</li>
<li data-line="1" dir="auto">缓存会话 =&gt; </li>
<li data-line="2" dir="auto">基于文件的会话</li>
<li data-line="3" dir="auto">基于 cookie 的会话</li>
</ul></div><div><p dir="auto">基于<strong>数据库</strong>的会话：</p></div><div class="has-run-code-button"><pre dir="auto"><span>SESSION_ENGINE = "django.contrib.sessions.backends.db"
INSTALLED_APPS = [
	'django.contrib.sessions',
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">注：数据会保存在 <span>django_session</span> 表中<br>
基于<strong>缓存</strong>的会话：</p></div><div class="has-run-code-button"><pre dir="auto"><span>SESSION_CACHE_ALIAS = "caches_key" # 设置为 CACHES 配置的 key，默认为 "default"
# (1) 写透缓存(持久性缓存) =&gt; 会话读取使用缓存，或者如果数据已从缓存中逐出，则使用数据库 
SESSION_ENGINE = "django.contrib.sessions.backends.cached_db"
# (2) 非持久性缓存 =&gt; 逐出过程 可能发生在缓存填满或缓存服务器重新启动时，这将意味着会话数据丢失，包括用户的注销状态
SESSION_ENGINE = "django.contrib.sessions.backends.cached"</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">基于<strong>文件</strong>的会话：</p></div><div class="has-run-code-button"><pre dir="auto"><span>SESSION_ENGINE = "django.contrib.sessions.backends.file"
# 指定存储会话的目录
SESSION_FILE_PATH = BASE_DIR / "path/to/file-session-dir"</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">基于<strong>cookie</strong>的会话：</p></div><div class="has-run-code-button"><pre dir="auto"><span>SESSION_ENGINE = "django.contrib.sessions.backends.signed_cookies"
# Django 脚手架初始化的项目会自动生成随机的 SECRET_KEY
SECRET_KEY =</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">注：<span>SESSION_COOKIE_HTTPONLY = TRUE</span>  能防止 js 访问存储的数据<br>
注2：由于 cookie 存储在客户端，通常使用 <a data-href="#加密签名" href="#加密签名" class="internal-link" target="_self" rel="noopener">加密签名</a> 来保证数据安全</p></div><div class="heading-wrapper"><h4 data-heading="在视图中使用会话" dir="auto" class="heading" id="在视图中使用会话"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>在视图中使用会话</h4><div class="heading-children"><div><p dir="auto">涉及的模块和包</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.contrib.sessions.backends.base</span> =&gt; <span>SessionBase</span></li>
<li data-line="1" dir="auto"><span>django.contrib.sessions.backends.file</span> =&gt; <span>SessionStore</span></li>
<li data-line="2" dir="auto"><span>django.contrib.sessions.serializers</span> =&gt; <span>JSONSerializer</span><br>
注：<span>SessionStore</span> &lt; <span>SessionBase</span></li>
</ul></div><div><p dir="auto"><span>&lt;request&gt;.session: SessionStore</span></p></div><div><p dir="auto"><span>SessionBase</span> 的方法：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">（<strong>重点</strong>）实现了 <a data-tooltip-position="top" aria-label="python > `__something__`" data-href="python#`__something__`" href="docs/草稿/后端/lang/python.html#`__something__`" class="internal-link" target="_self" rel="noopener">标准 dict 方法</a></li>
<li data-line="1" dir="auto"><span>get(key, default?): any</span>, <span>pop(key, default?): any</span></li>
<li data-line="2" dir="auto"><span>keys(): dict_keys</span>, <span>items(): dict_items</span>, <span>clear()</span></li>
<li data-line="3" dir="auto"><span>flush()</span> =&gt; 删除 session =&gt; 其中的 cookie 也会被删除</li>
<li data-line="4" dir="auto"><span>set_test_cookie()</span>, <span>test_cookie_worked(): bool</span>, <span>delete_test_cookie()</span> =&gt; 用于测试 cookie 是否可用</li>
<li data-line="5" dir="auto"><span>get_session_cookie_age(): int</span> =&gt; 获取会话 cookie 的存活时间 (s)</li>
<li data-line="6" dir="auto"><span>get_expiry_age(modification=datetime.now(), expiry?): int</span> =&gt; 获取会话 cookie 的剩余存活时间 (s)</li>
<li data-line="7" dir="auto"><span>get_expiry_date(): datetime</span> =&gt; 获取 session 的过期日期</li>
<li data-line="8" dir="auto"><span>get_expire_at_browser_close(): bool</span> =&gt; 会话 cookie 是否在用户关闭 web 浏览器时过期</li>
<li data-line="9" dir="auto"><span>clear_expired()</span> =&gt; 删除已过期的会话</li>
<li data-line="10" dir="auto"><span>cycle_key()</span> =&gt;<br>
注：<span>SESSION_COOKIE_AGE: int</span> 默认为 1209600<br>
注2：cookie 存储的数据特定于某个 session，而且这些数据必须是<strong>可序列化的</strong></li>
</ul></div><div><p dir="auto"><span>SESSION_SERIALIZER</span> =&gt; 序列化器，默认为 <span>JSONSerializer</span>，即存储的 Python 数据使用 json 序列化</p></div></div></div><div class="heading-wrapper"><h4 data-heading="在视图外使用会话" dir="auto" class="heading" id="在视图外使用会话"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>在视图外使用会话</h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="管理会话" dir="auto" class="heading" id="管理会话"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>管理会话</h4><div class="heading-children"><div><p dir="auto">会话保存的时机：</p></div><div class="has-run-code-button"><pre dir="auto"><span># Session is modified.
request.session["foo"] = "bar"

# Session is modified.
del request.session["foo"]

# Session is modified.
request.session["foo"] = {}

# Gotcha: Session is NOT modified, because this alters
# request.session['foo'] instead of request.session.
request.session["foo"]["bar"] = "baz"</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><span>request.session.modified = True</span> =&gt; 告知 session 对象它已被修改 =&gt; </p></div><div><p dir="auto"><span>SESSION_SAVE_EVERY_REQUEST: bool</span> =&gt; 是否每次请求都更新 session<br>
<span>SESSION_EXPIRE_AT_BROWSER_CLOSE: bool = False</span> =&gt; 在关闭浏览器时是否删除 session</p></div><div><p dir="auto"><span>python manage.py clearsessions</span> =&gt; 清除会话存储，但不包括 <strong>缓存会话</strong>（缓存会在自动删除过时数据）、以及<strong>cookie会话</strong>（这种会话数据存储在客户端浏览器上）</p></div><div><p dir="auto">会话相关的配置列表：</p></div><div class="has-run-code-button"><pre dir="auto"><span>SESSION_CACHE_ALIAS
SESSION_COOKIE_AGE
SESSION_COOKIE_DOMAIN
SESSION_COOKIE_HTTPONLY
SESSION_COOKIE_NAME
SESSION_COOKIE_PATH
SESSION_COOKIE_SAMESITE
SESSION_COOKIE_SECURE
SESSION_ENGINE
SESSION_EXPIRE_AT_BROWSER_CLOSE
SESSION_FILE_PATH
SESSION_SAVE_EVERY_REQUEST
SESSION_SERIALIZER</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div></div></div><div class="heading-wrapper"><h4 data-heading="扩展数据库后端" dir="auto" class="heading" id="扩展数据库后端"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>扩展数据库后端</h4><div class="heading-children"></div></div><div class="heading-wrapper"><h4 data-heading="疑问" dir="auto" class="heading" id="疑问"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>疑问</h4><div class="heading-children"><div><p dir="auto"><a href="?query=tag:%E7%96%91%E9%97%AE" class="tag" target="_blank" rel="noopener">#疑问</a></p></div><div><ul dir="auto">
<li data-line="0" dir="auto"></li>
</ul></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="消息" dir="auto" class="heading" id="消息"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>消息</h3><div class="heading-children"><div><p dir="auto">涉及的模块和包：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.contrib.messages.storage.session</span> =&gt; <span>SessionStorage</span></li>
<li data-line="1" dir="auto"><span>django.contrib.messages.storage.cookie</span> =&gt; <span>CookieStorage</span></li>
<li data-line="2" dir="auto"><span>django.contrib.messages.storage.fallback</span> =&gt; <span>FallbackStorage</span></li>
<li data-line="3" dir="auto"><span>django.contrib.messages.storage.base</span> =&gt; <span>BaseStorage</span>, <span>Message</span></li>
<li data-line="4" dir="auto"><span>django.contrib.messages.constants</span> =&gt; <span>DEBUG</span>, <span>INFO</span>, <span>SUCCESS</span>, <span>WARNING</span>, <span>ERROR</span>, <span>DEFAULT_LEVELS</span>, <span>DEFAULT_TAGS</span></li>
<li data-line="5" dir="auto"><span>django.contrib.messages.api</span> =&gt; <span>add_message()</span>, <span>debug()</span>, <span>info()</span>, <span>success()</span>, <span>warning()</span>, <span>error()</span>, <span>get_messages()</span>, <span>set_level()</span></li>
<li data-line="6" dir="auto"><span>django.contrib.messages.views</span> =&gt; <span>SuccessMessageMixin</span></li>
</ul></div><div><p dir="auto">配置：</p></div><div class="has-run-code-button"><pre dir="auto"><span>INSTALLED_APPS = [
	`django.contrib.messages`,
]
MIDDLEWARE = [
	`django.contrib.session.middleware.SessionMiddleware`,
	`django.contrib.message.middleware.MessageMiddleware`,
]
TEMPLATES = [
    {
        'OPTIONS': {
            'context_processors': [
                'django.contrib.messages.context_processors.messages',
            ],
        },
    },
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto"><strong>存储后端</strong></p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>SessionStorage</span> =&gt; 存储在请求的会话中的所有消息</li>
<li data-line="1" dir="auto"><span>CookieStorage</span> =&gt; 将消息存储在 Cookie 中 =&gt; 使用密码哈希签名；cookie 数据超过 2048 字节时旧的消息会被覆盖</li>
<li data-line="2" dir="auto"><span>FallbackStorage</span> =&gt; <strong>默认的存储后端</strong>，使用 <span>CookieStorage</span> 和 <span>SessionStorage</span>，拥有最好的性能</li>
<li data-line="3" dir="auto"><span>BaseStorage</span> =&gt; 存储后端基类<br>
注：可以通过 <span>MESSAGE_STORAGE</span> 设置存储后端</li>
</ul></div><div><p dir="auto"><strong>消息级别</strong> =&gt; 对应一个整数，以及一个字符串（<strong>消息标签</strong>）</p></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>消息级别</th>
<th>值</th>
<th>消息标签</th>
<th>用途</th>
</tr>
</thead>
<tbody>
<tr>
<td>DEBUG</td>
<td>10</td>
<td><span>debug</span></td>
<td>与开发相关的消息</td>
</tr>
<tr>
<td>INFO</td>
<td>20</td>
<td><span>info</span></td>
<td>给用户的参考消息</td>
</tr>
<tr>
<td>SUCCESS</td>
<td>25</td>
<td><span>success</span></td>
<td>一个动作成功了</td>
</tr>
<tr>
<td>WARNING</td>
<td>30</td>
<td><span>warning</span></td>
<td>未发生的故障，但可能即将发生</td>
</tr>
<tr>
<td>ERROR</td>
<td>40</td>
<td><span>error</span></td>
<td>某项动作<strong>没有</strong>成功或发生了其他故障</td>
</tr>
</tbody>
</table></div><div><p dir="auto">注： <span>MESSAGE_LEVEL: int</span> 配置了需要处理的消息的最小级别<br>
注2：<span>DEFAULT_LEVELS: dict&lt;str, int&gt;</span>, <span>DEFAULT_TAGS: dict&lt;int, str&gt;</span></p></div><div class="heading-wrapper"><h4 data-heading="使用消息" dir="auto" class="heading" id="使用消息"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>使用消息</h4><div class="heading-children"><div><p dir="auto">添加消息：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>add_message(req: HttpRequest, level: int, msg, extra_tags?: str, fail_silently=False)</span></li>
<li data-line="1" dir="auto"><span>debug(req: HttpRequest, msg, extra_tags?: str, fail_silently=False)</span></li>
<li data-line="2" dir="auto"><span>info(req: HttpRequest, msg, extra_tags?: str, fail_silently=False)</span></li>
<li data-line="3" dir="auto"><span>success(req: HttpRequest, msg, extra_tags?: str, fail_silently=False)</span></li>
<li data-line="4" dir="auto"><span>warning(req: HttpRequest, msg, extra_tags?: str, fail_silently=False)</span></li>
<li data-line="5" dir="auto"><span>error(req: HttpRequest, msg, extra_tags?: str, fail_silently=False)</span></li>
</ul></div><div><p dir="auto">获取消息：<br>
<span>get_messages(req: HttpRequest): BaseStorage</span> =&gt; 可以看做是 <span>Message</span> 的数组</p></div><div><p dir="auto"><span>Message(level, message, extra_tags?)</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>level</span> =&gt; 消息级别</li>
<li data-line="1" dir="auto"><span>message</span> =&gt; 消息实际内容</li>
<li data-line="2" dir="auto"><span>extra_tags</span> =&gt; 包含<strong>自定义消息标签</strong>的字符串，消息标签之间以空格 <span>" "</span> 分隔</li>
<li data-line="3" dir="auto"><span>level_tag</span> =&gt; <strong>消息标签</strong></li>
<li data-line="4" dir="auto"><span>tags</span> =&gt; 消息的所有标签</li>
</ul></div><div><p dir="auto">注册消息 =&gt;  <span>DEFAULT_TAGS[level] = tag</span></p></div><div><p dir="auto">临时修改消息最低级别 =&gt; <span>set_level(req: HttpRequest, level: int)</span></p></div><div><p dir="auto">类视图添加消息 =&gt; </p></div><div><p dir="auto">标记要清理的消息 =&gt; <span>&lt;BaseStorage&gt;.used = True</span><br>
避免消息被清理 =&gt; <span>&lt;BaseStorage&gt;.used = False</span><br>
注：<span>&lt;BaseStorage&gt;</span> 被 <span>for</span> 迭代后会进行 <span>used</span> 标记</p></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="信号" dir="auto" class="heading" id="信号"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>信号</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/signals/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/signals/" target="_blank">信号</a></p>
</blockquote></div><div dir="auto" style="overflow-x: auto;"><table>
<thead>
<tr>
<th>涉及的模块和包</th>
<th>内容</th>
<th>解释</th>
</tr>
</thead>
<tbody>
<tr>
<td>django.dispatch</td>
<td><span>Signal</span>, <span>@receiver()</span></td>
<td></td>
</tr>
<tr>
<td>django.db.models.signals</td>
<td><span>pre_init</span>, <span>post_init</span>, <span>pre_save</span>, <span>post_save</span>, <span>pre_delete</span>, <span>post_delete</span>, <span>m2m_changed</span>, <span>class_prepared</span></td>
<td>模型相关信号</td>
</tr>
<tr>
<td>django.db.models.signals</td>
<td><span>pre_migrate</span>, <span>post_migrate</span></td>
<td>迁移相关信号</td>
</tr>
<tr>
<td>django.core.signals</td>
<td><span>request_started</span>, <span>request_finished</span>, <span>got_request_exception</span></td>
<td>请求/响应 相关信号</td>
</tr>
<tr>
<td>django.test.signals</td>
<td><span>setting_changed</span>, <span>template_rendered</span></td>
<td>测试相关信号</td>
</tr>
<tr>
<td>django.db.backends.signals</td>
<td><span>connection_created</span></td>
<td>数据库相关信号</td>
</tr>
</tbody>
</table></div><div><p dir="auto"><span>Signal(use_caching=False)</span></p></div><div><p dir="auto"><span>Signal</span> 的方法：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>connect(receiver: func, sender?, weak=True, dispatch_uid?)</span></li>
<li data-line="1" dir="auto"><span>send(sender, **named)</span></li>
<li data-line="2" dir="auto"><span>disconnect(receiver?: func, sender?, dispatch_uid?): bool</span></li>
</ul></div><div><p dir="auto">概念：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><strong>信号处理器</strong>  =&gt; 一个 python 方法，形如  <span>(sender, **kwargs) =&gt; void</span></li>
<li data-line="1" dir="auto"><strong>信号</strong> =&gt; 一个 <span>Signal</span> 实例</li>
<li data-line="2" dir="auto"><strong>信号发送者</strong> =&gt; 一个 python 对象</li>
<li data-line="3" dir="auto"><strong>绑定</strong> 处理器 和 信号：<br>
=&gt; 方式1  =&gt; <span>@receiver(signal: Signal, **kwargs)</span> =&gt; 信号处理器 <strong>接受</strong> 信号<br>
=&gt; 方式2 =&gt; <span>&lt;Signal&gt;.connect(receiver: func, sender?, weak=True, dispatch_uid?)</span> =&gt; 信号 <strong>连接</strong> 信号处理器</li>
<li data-line="6" dir="auto"><strong>发送信号</strong><br>
注：django 会自动负责 <span>request_finished</span>, <span>request_started</span>, <span>setting_changed</span>, <span>got_request_exception</span> 等信号的发送 =&gt; 我们通常可以直接将这些信号与某些接收器进行连接<br>
<strong>注2</strong>：一对 信号 和 信号处理器 可能被绑定多次 =&gt; </li>
</ul></div><div><p dir="auto">信号处理器<strong>过滤</strong>处理特定类型的 信号发送者 发送的信号 =&gt; <span>@receiver(signal: Signal, sender=ExampleType)</span></p></div></div></div><div class="heading-wrapper"><h3 data-heading="安全" dir="auto" class="heading" id="安全"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>安全</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/auth/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/auth/" target="_blank">Django中的用户认证</a>，<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/signing/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/signing/" target="_blank">加密签名</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/email/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/email/" target="_blank">发送邮件</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/security/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/security/" target="_blank">Django 的安全性</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/checks/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/checks/" target="_blank">系统检查框架</a><br>
ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/clickjacking/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/clickjacking/" target="_blank">点击劫持保护</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/checks/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/checks/" target="_blank">系统检查框架</a>,<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/exceptions/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/exceptions/" target="_blank">Django 异常</a></p>
</blockquote></div><div class="heading-wrapper"><h4 data-heading="加密签名" dir="auto" class="heading" id="加密签名"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>加密签名</h4><div class="heading-children"><div><p dir="auto"><span>SECRET_KEY: str</span> =&gt; 用于生成签名值<br>
注：配置会在 <span>startproject</span> 初始化项目时自动生成<br>
<span>SECRET_KEY_FALLBACKS</span> =&gt; </p></div><div><p dir="auto"><span>django.core.signing</span> =&gt; <span>Signer</span>, <span>BadSignature</span>, <span>TimestampSigner</span>, <span>SignatureExpired</span></p></div><div><p dir="auto"><span>Signer(*, key?: str, sep=":", salt?, algorithm?, fallback_keys?)</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto">key =&gt; 默认为 <span>SECRET_KEY</span> 指定的值</li>
<li data-line="1" dir="auto">sep =&gt; 不能是 字母 / 数字 / 连字符<span>-</span> / 下划线<span>_</span></li>
<li data-line="2" dir="auto">salt =&gt; 盐值</li>
<li data-line="3" dir="auto">algorithm =&gt; <a data-tooltip-position="top" aria-label="https://docs.python.org/3/library/hashlib.html#module-hashlib" rel="noopener" class="external-link" href="https://docs.python.org/3/library/hashlib.html#module-hashlib" target="_blank">hashlib</a> 的算法类型，默认为 <span>sha256</span></li>
<li data-line="4" dir="auto">fallback_keys =&gt; </li>
</ul></div><div><p dir="auto"><span>Signer</span> 的方法：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>sign(original_val: any): str</span> =&gt; 将数据进行签名</li>
<li data-line="1" dir="auto"><span>unsign(signed_val: str): any</span> =&gt; 将签名的数据解签</li>
<li data-line="2" dir="auto"><span>sign_object(original_val: any, serializer=JSONSerializer, compress=False): str</span> =&gt; 将数据进行签名</li>
<li data-line="3" dir="auto"><span>unsign_object(signed_val: str, serializer=JSONSerializer, **kwargs): any</span> =&gt; 将签名的数据解签<br>
注：<span>BadSignature</span> 为解签异常</li>
</ul></div><div><p dir="auto"><span>TimestampSigner(*, key?: str, sep=":", salt?, algorithm?)</span> &lt; <span>Signer</span></p></div><div><p dir="auto"><span>TimestampSigner</span>  的方法：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>sign(original_val: any): str</span> =&gt; 将数据进行签名，并附加时间戳</li>
<li data-line="1" dir="auto"><span>unsign(signed_val: str, max_age?: int | timedelta)</span> =&gt; 若从签名到现在经过的时间不超过 <span>max_age</span> 秒，那么正常解签，否则会抛出异常 <span>SignatureExpired</span></li>
</ul></div><div><p dir="auto">两个 TimestampSigner 对象签名/解签方法的方法的快捷方式：<br>
<span>dumps(obj, key?, salt="django.core.signing", serializer=JSONSerializer, compress=False)</span> =&gt; 签名对象<br>
<span>loads(s, key?, salt="django.core.signing", serializer=JSONSerializer, max_age?, fallback_keys?)</span> =&gt; 解签对象</p></div></div></div><div class="heading-wrapper"><h4 data-heading="CORS" dir="auto" class="heading" id="CORS"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>CORS</h4><div class="heading-children"><div><p dir="auto">跨源资源共享是一种允许客户端与托管在不同域上的 API 进行交互的机制</p></div><div><p dir="auto">工作原理 =&gt; 服务器包含一组特定的标头，如：<span>Access-Control-Allow-Origin</span>, <span>Access-Control-Allow-Headers</span>, <span>Access-Control-Allow-Methods</span>, <span>Access-Control-Allow-Credentials</span> 等，这些标头允许浏览器确定是否以及何时应允许跨域请求</p></div><div><p dir="auto">处理 CORS =&gt; 在每次请求中添加响应头 =&gt; 在中间件中添加最为方便</p></div><div><p dir="auto">或者使用 <a data-tooltip-position="top" aria-label="https://github.com/adamchainz/django-cors-headers" rel="noopener" class="external-link" href="https://github.com/adamchainz/django-cors-headers" target="_blank">django-cors-headers</a></p></div></div></div><div class="heading-wrapper"><h4 data-heading="CSRF" dir="auto" class="heading" id="CSRF"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>CSRF</h4><div class="heading-children"><div><p dir="auto">涉及的概念</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>keywords</span> =&gt; <span>CORS</span>, <span>CSRF</span></li>
<li data-line="1" dir="auto">中间件 =&gt; <span>django.middleware.csrf.CsrfViewMiddleware</span></li>
<li data-line="2" dir="auto">框架 =&gt; <span>DRF</span></li>
<li data-line="3" dir="auto">装饰器 =&gt; <span>django.views.decorators.csrf.csrf_exempt</span></li>
</ul></div><div><p dir="auto"><span>CSRF_TRUSTED_ORIGINS = ['http://localhost:5173']</span></p></div><div><p dir="auto">跨域请求错误的三种解决方法：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto">注释掉中间件 <span>django.middleware.csrf.CsrfViewMiddleware</span> =&gt; 取消跨域请求伪造防护机制</li>
<li data-line="1" dir="auto">视图前添加装饰器 <span>csrf_exempt</span></li>
<li data-line="2" dir="auto">注：浏览器发送不安全请求（如： <span>post</span>, <span>put</span>, <span>delete</span>）时会检查 <span>response headers</span> 的键 <span>Access-Control-Allow-Origin</span> 是否为本站的源（即是否有 <span>协议://域名:端口号</span>） =&gt; 在服务端添加上这个头即可</li>
</ul></div></div></div><div class="heading-wrapper"><h4 data-heading="xsrf" dir="auto" class="heading" id="xsrf"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>xsrf</h4><div class="heading-children"></div></div></div></div><div class="heading-wrapper"><h3 data-heading="序列化" dir="auto" class="heading" id="序列化"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>序列化</h3><div class="heading-children"><div><p dir="auto">涉及的包和模型：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>django.core.serializers</span> =&gt; <span>serialize()</span>, <span>deserialize()</span></li>
</ul></div><div><p dir="auto"><span>serialize(format: str, qd: QuerySet, fields?: str[]): str</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>format: 'xml' | 'json' | 'jsonl' | 'yaml'</span> =&gt; 序列化的格式</li>
<li data-line="1" dir="auto"><span>qd: QuerySet</span> =&gt; 需要序列化的模型集合</li>
<li data-line="2" dir="auto"><span>fields: str[]</span> =&gt; 需要序列化的字段集合</li>
</ul></div><div><p dir="auto">注：二进制文件不支持序列化</p></div><div><p dir="auto"><span>deserialize(format: str, data: str | bytes, fields?: str[]): DeserializedObject</span> =&gt; 反序列化</p></div><div><p dir="auto"><span>object_should_be_saved(obj: DeserializedObject): bool</span> =&gt; 判断反序列化的数据是否可以保存</p></div></div></div><div class="heading-wrapper"><h3 data-heading="性能" dir="auto" class="heading" id="性能"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>性能</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/cache/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/cache/" target="_blank">Django 缓存框架</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/performance/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/performance/" target="_blank">性能和优化</a></p>
</blockquote></div></div></div><div class="heading-wrapper"><h3 data-heading="其他" dir="auto" class="heading" id="其他"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>其他</h3><div class="heading-children"><div><blockquote dir="auto">
<p dir="auto">topic：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/i18n/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/i18n/" target="_blank">国际化和本地化</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/logging/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/logging/" target="_blank">日志</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/external-packages/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/external-packages/" target="_blank">扩展包</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/topics/async/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/topics/async/" target="_blank">异步支持</a><br>
ref：<a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/logging/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/logging/" target="_blank">日志</a>, <a data-tooltip-position="top" aria-label="https://docs.djangoproject.com/zh-hans/5.0/ref/unicode/" rel="noopener" class="external-link" href="https://docs.djangoproject.com/zh-hans/5.0/ref/unicode/" target="_blank">Unicode 数据</a></p>
</blockquote></div><div class="heading-wrapper"><h4 data-heading="分页" dir="auto" class="heading" id="分页"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>分页</h4><div class="heading-children"><div><p dir="auto"><span>django.core.paginator</span> =&gt; <span>Paginator</span>, <span>Page</span></p></div><div><p dir="auto"><span>Paginator(arr: any[], per_page: int)</span></p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>per_page</span> =&gt; 每页的对象个数</li>
</ul></div><div><p dir="auto"><span>Paginator</span> 的属性</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>count</span> =&gt; 总共的对象个数</li>
<li data-line="1" dir="auto"><span>num_pages</span> =&gt; 总页数</li>
<li data-line="2" dir="auto"><span>page_range: range</span> =&gt; 页数范围，与 <span>num_pages</span> 差不多<br>
<span>Paginator</span> 的方法</li>
<li data-line="4" dir="auto"><span>page(num: int): Page</span> =&gt; 获取某一页，下标从 1 开始</li>
</ul></div><div><p dir="auto"><span>Page</span> 的属性</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>object_list: any[]</span><br>
<span>Page</span> 的方法</li>
<li data-line="2" dir="auto"><span>__getitem__(index: int)</span></li>
<li data-line="3" dir="auto"><span>has_next(): bool</span></li>
<li data-line="4" dir="auto"><span>has_previous(): bool</span></li>
<li data-line="5" dir="auto"><span>has_other_pages(): bool</span></li>
<li data-line="6" dir="auto"><span>next_page_number(): int</span></li>
<li data-line="7" dir="auto"><span>start_index(): int</span></li>
<li data-line="8" dir="auto"><span>end_index(): int</span></li>
</ul></div></div></div></div></div><div class="heading-wrapper"><h3 data-heading="实用技巧" dir="auto" class="heading" id="实用技巧"><div class="heading-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div>实用技巧</h3><div class="heading-children"><div><p dir="auto">路由直接转发到模板的闭包： （无需转发到其他的路由表，或视图）</p></div><div class="has-run-code-button"><pre dir="auto"><span>from django.template.response import TemplateResponse
def to_template(t_path: str, context:dict = {}):
	def view(req: HttpResponse):
		return TemplateResponse(req, t_path, context=context)
	return view
# 例子：
urlpatterns = [
	path('', to_template("path/to/template.html"), {"foo": "bar"}),
]</span><button class="run-code-button">Run</button><button class="copy-code-button">复制</button></pre></div><div><p dir="auto">参考：<a data-href="python#闭包" href="docs/草稿/后端/lang/python.html#闭包" class="internal-link" target="_self" rel="noopener">python &gt; 闭包</a></p></div><div><p dir="auto"><span>&lt;Model&gt;._meta.get_fields(): Field[]</span></p></div><div><p dir="auto">model 实例 =&gt; dict =&gt; bytes =&gt; stream =&gt; dict =&gt; model 实例</p></div><div><p dir="auto"><a data-href="vue router" href="docs/草稿/前端/csr/vue/vue-router.html" class="internal-link" target="_self" rel="noopener">vue router</a></p></div><div><p dir="auto">web层次：</p></div><div><ul dir="auto">
<li data-line="0" dir="auto"><span>CSR</span> =&gt; 客户端渲染</li>
<li data-line="1" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span>urls</span> =&gt; 路由
<ul dir="auto">
<li data-line="2" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span>path_mapping</span> =&gt; 路径参数映射（核心为 <span>register_converter()</span> 函数）
<ul dir="auto">
<li data-line="3" dir="auto"><span>pm_model/pm_serializer</span> =&gt; 路径参数到 模型 或 序列化器的绑定（<span>p2m</span> / <span>p2s</span>）</li>
</ul>
</li>
</ul>
</li>
<li data-line="4" dir="auto"><span>middlewares</span> =&gt; 中间件</li>
<li data-line="5" dir="auto"><span>parsers/renders</span> =&gt; 解析/渲染</li>
<li data-line="6" dir="auto"><div class="list-collapse-indicator collapse-indicator collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon right-triangle"><path d="M3 8L12 17L21 8"></path></svg></div><span>views</span> =&gt; 视图（crudl =&gt; 面向管理员；其他组合操作 =&gt; 面向用户）
<ul dir="auto">
<li data-line="7" dir="auto"><span>templates</span> =&gt; 模板</li>
<li data-line="8" dir="auto"><span>decorators</span> =&gt; 装饰器</li>
</ul>
</li>
<li data-line="9" dir="auto"><span>serilizers</span> =&gt; 序列化/反序列化</li>
<li data-line="10" dir="auto"><span>models</span> =&gt; 模型<br>
- <span>fields</span> =&gt; 字段<br>
- <span>ModelField_to_tag</span> =&gt; 字段-标签 映射<br>
注：<span>views</span> 可以写在 <span>urls</span> 中</li>
</ul></div><div class="mod-footer"></div></div></div></div></div></div><div class="sidebar-right sidebar"><div class="sidebar-handle"></div><div class="sidebar-topbar"><div class="topbar-content"></div><div class="clickable-icon sidebar-collapse-icon"><svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><path d="M21 3H3C1.89543 3 1 3.89543 1 5V19C1 20.1046 1.89543 21 3 21H21C22.1046 21 23 20.1046 23 19V5C23 3.89543 22.1046 3 21 3Z"></path><path d="M10 4V20"></path><path d="M4 7H7"></path><path d="M4 10H7"></path><path d="M4 13H7"></path></svg></div></div><div class="sidebar-content"><div class="graph-view-wrapper"><div class="sidebar-section-header">Interactive Graph</div><div class="graph-view-placeholder">
		<div class="graph-view-container">
			<div class="graph-icon graph-expand" role="button" aria-label="Expand" data-tooltip-position="top"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svg-icon"><line x1="7" y1="17" x2="17" y2="7"></line><polyline points="7 7 17 7 17 17"></polyline></svg></div>
			<canvas id="graph-canvas" class="hide" width="512px" height="512px"></canvas>
		</div>
		</div></div><div class="tree-container mod-root nav-folder tree-item outline-tree" data-depth="0"><div class="tree-header"><span class="sidebar-section-header">Table Of Contents</span><button class="clickable-icon collapse-tree-button" aria-label="Collapse All"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></svg></button></div><div class="tree-scroll-area tree-item-children nav-folder-children"><div class="tree-item mod-tree-folder nav-folder mod-collapsible is-collapsed" style="display: none;"></div><div class="tree-item" data-depth="1"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#Django--ex"><div class="tree-item-contents heading-link" heading-name="Django--ex"><span class="tree-item-title">Django--ex</span></div></a><div class="tree-item-children nav-folder-children"><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#参考"><div class="tree-item-contents heading-link" heading-name="参考"><span class="tree-item-title">参考</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#待了解"><div class="tree-item-contents heading-link" heading-name="待了解"><span class="tree-item-title">待了解</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#配置"><div class="tree-item-contents heading-link" heading-name="配置"><span class="tree-item-title">配置</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#应用(app)"><div class="tree-item-contents heading-link" heading-name="应用(app)"><span class="tree-item-title">应用(app)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#路由(urls)"><div class="tree-item-contents heading-link" heading-name="路由(urls)"><span class="tree-item-title">路由(urls)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#url_调度器"><div class="tree-item-contents heading-link" heading-name="url 调度器"><span class="tree-item-title">url 调度器</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#附录-路由"><div class="tree-item-contents heading-link" heading-name="附录-路由"><span class="tree-item-title">附录-路由</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#视图(views)"><div class="tree-item-contents heading-link" heading-name="视图(views)"><span class="tree-item-title">视图(views)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#编写视图"><div class="tree-item-contents heading-link" heading-name="编写视图"><span class="tree-item-title">编写视图</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#视图装饰器"><div class="tree-item-contents heading-link" heading-name="视图装饰器"><span class="tree-item-title">视图装饰器</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#异步"><div class="tree-item-contents heading-link" heading-name="异步"><span class="tree-item-title">异步</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#文件&amp;异常"><div class="tree-item-contents heading-link" heading-name="文件&amp;异常"><span class="tree-item-title">文件&amp;异常</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#请求"><div class="tree-item-contents heading-link" heading-name="请求"><span class="tree-item-title">请求</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#响应"><div class="tree-item-contents heading-link" heading-name="响应"><span class="tree-item-title">响应</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#HttpResponse"><div class="tree-item-contents heading-link" heading-name="HttpResponse"><span class="tree-item-title">HttpResponse</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#HttpResponse_子类"><div class="tree-item-contents heading-link" heading-name="HttpResponse 子类"><span class="tree-item-title">HttpResponse 子类</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模板响应"><div class="tree-item-contents heading-link" heading-name="模板响应"><span class="tree-item-title">模板响应</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#基于类的视图"><div class="tree-item-contents heading-link" heading-name="基于类的视图"><span class="tree-item-title">基于类的视图</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#附录-视图"><div class="tree-item-contents heading-link" heading-name="附录-视图"><span class="tree-item-title">附录-视图</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模板(template)"><div class="tree-item-contents heading-link" heading-name="模板(template)"><span class="tree-item-title">模板(template)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#语法"><div class="tree-item-contents heading-link" heading-name="语法"><span class="tree-item-title">语法</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#组件"><div class="tree-item-contents heading-link" heading-name="组件"><span class="tree-item-title">组件</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#静态资源(static)"><div class="tree-item-contents heading-link" heading-name="静态资源(static)"><span class="tree-item-title">静态资源(static)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模型(models)"><div class="tree-item-contents heading-link" heading-name="模型(models)"><span class="tree-item-title">模型(models)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模型类"><div class="tree-item-contents heading-link" heading-name="模型类"><span class="tree-item-title">模型类</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模型字段"><div class="tree-item-contents heading-link" heading-name="模型字段"><span class="tree-item-title">模型字段</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#Field_类"><div class="tree-item-contents heading-link" heading-name="Field 类"><span class="tree-item-title">Field 类</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#数字字段"><div class="tree-item-contents heading-link" heading-name="数字字段"><span class="tree-item-title">数字字段</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#字符串字段"><div class="tree-item-contents heading-link" heading-name="字符串字段"><span class="tree-item-title">字符串字段</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#数据字段"><div class="tree-item-contents heading-link" heading-name="数据字段"><span class="tree-item-title">数据字段</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#表间关系字段"><div class="tree-item-contents heading-link" heading-name="表间关系字段"><span class="tree-item-title">表间关系字段</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#Meta_内部类"><div class="tree-item-contents heading-link" heading-name="Meta 内部类"><span class="tree-item-title">Meta 内部类</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模型自定义方法"><div class="tree-item-contents heading-link" heading-name="模型自定义方法"><span class="tree-item-title">模型自定义方法</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模型类继承"><div class="tree-item-contents heading-link" heading-name="模型类继承"><span class="tree-item-title">模型类继承</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模型索引"><div class="tree-item-contents heading-link" heading-name="模型索引"><span class="tree-item-title">模型索引</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#表单"><div class="tree-item-contents heading-link" heading-name="表单"><span class="tree-item-title">表单</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模型表单"><div class="tree-item-contents heading-link" heading-name="模型表单"><span class="tree-item-title">模型表单</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#映射表"><div class="tree-item-contents heading-link" heading-name="映射表"><span class="tree-item-title">映射表</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#附录-模型"><div class="tree-item-contents heading-link" heading-name="附录-模型"><span class="tree-item-title">附录-模型</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#models.fields.Field"><div class="tree-item-contents heading-link" heading-name="models.fields.Field"><span class="tree-item-title">models.fields.Field</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#forms.fields.Field"><div class="tree-item-contents heading-link" heading-name="forms.fields.Field"><span class="tree-item-title">forms.fields.Field</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#Form,_ModelFormuery"><div class="tree-item-contents heading-link" heading-name="Form, ModelFormuery"><span class="tree-item-title">Form, ModelFormuery</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模型查询"><div class="tree-item-contents heading-link" heading-name="模型查询"><span class="tree-item-title">模型查询</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#执行查询"><div class="tree-item-contents heading-link" heading-name="执行查询"><span class="tree-item-title">执行查询</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#异步查询"><div class="tree-item-contents heading-link" heading-name="异步查询"><span class="tree-item-title">异步查询</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#json_查询"><div class="tree-item-contents heading-link" heading-name="json 查询"><span class="tree-item-title">json 查询</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#通过_Q_对象完成复杂查询"><div class="tree-item-contents heading-link" heading-name="通过 Q 对象完成复杂查询"><span class="tree-item-title">通过 Q 对象完成复杂查询</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#关联对象查询"><div class="tree-item-contents heading-link" heading-name="关联对象查询"><span class="tree-item-title">关联对象查询</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#附录-视图查询"><div class="tree-item-contents heading-link" heading-name="附录-视图查询"><span class="tree-item-title">附录-视图查询</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#迁移(migrations)"><div class="tree-item-contents heading-link" heading-name="迁移(migrations)"><span class="tree-item-title">迁移(migrations)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#数据库(database)"><div class="tree-item-contents heading-link" heading-name="数据库(database)"><span class="tree-item-title">数据库(database)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#测试(test)"><div class="tree-item-contents heading-link" heading-name="测试(test)"><span class="tree-item-title">测试(test)</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#文件"><div class="tree-item-contents heading-link" heading-name="文件"><span class="tree-item-title">文件</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#获取文件上传"><div class="tree-item-contents heading-link" heading-name="获取文件上传"><span class="tree-item-title">获取文件上传</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#获取多个上传的文件"><div class="tree-item-contents heading-link" heading-name="获取多个上传的文件"><span class="tree-item-title">获取多个上传的文件</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#handler"><div class="tree-item-contents heading-link" heading-name="handler"><span class="tree-item-title">handler</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#File_对象"><div class="tree-item-contents heading-link" heading-name="File 对象"><span class="tree-item-title">File 对象</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#附录-文件"><div class="tree-item-contents heading-link" heading-name="附录-文件"><span class="tree-item-title">附录-文件</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#UploadedFile"><div class="tree-item-contents heading-link" heading-name="UploadedFile"><span class="tree-item-title">UploadedFile</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#TemporaryUploadedFile"><div class="tree-item-contents heading-link" heading-name="TemporaryUploadedFile"><span class="tree-item-title">TemporaryUploadedFile</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="5"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#InMemoryUploadedFile"><div class="tree-item-contents heading-link" heading-name="InMemoryUploadedFile"><span class="tree-item-title">InMemoryUploadedFile</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#认证"><div class="tree-item-contents heading-link" heading-name="认证"><span class="tree-item-title">认证</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#权限和认证"><div class="tree-item-contents heading-link" heading-name="权限和认证"><span class="tree-item-title">权限和认证</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#web请求认证"><div class="tree-item-contents heading-link" heading-name="web请求认证"><span class="tree-item-title">web请求认证</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#认证视图"><div class="tree-item-contents heading-link" heading-name="认证视图"><span class="tree-item-title">认证视图</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#密码管理"><div class="tree-item-contents heading-link" heading-name="密码管理"><span class="tree-item-title">密码管理</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#邮箱"><div class="tree-item-contents heading-link" heading-name="邮箱"><span class="tree-item-title">邮箱</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#缓存"><div class="tree-item-contents heading-link" heading-name="缓存"><span class="tree-item-title">缓存</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#缓存参数"><div class="tree-item-contents heading-link" heading-name="缓存参数"><span class="tree-item-title">缓存参数</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#缓存中间件"><div class="tree-item-contents heading-link" heading-name="缓存中间件"><span class="tree-item-title">缓存中间件</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#视图缓存"><div class="tree-item-contents heading-link" heading-name="视图缓存"><span class="tree-item-title">视图缓存</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#模板片段缓存"><div class="tree-item-contents heading-link" heading-name="模板片段缓存"><span class="tree-item-title">模板片段缓存</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#访问缓存"><div class="tree-item-contents heading-link" heading-name="访问缓存"><span class="tree-item-title">访问缓存</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#下游缓存"><div class="tree-item-contents heading-link" heading-name="下游缓存"><span class="tree-item-title">下游缓存</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#会话"><div class="tree-item-contents heading-link" heading-name="会话"><span class="tree-item-title">会话</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#在视图中使用会话"><div class="tree-item-contents heading-link" heading-name="在视图中使用会话"><span class="tree-item-title">在视图中使用会话</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#在视图外使用会话"><div class="tree-item-contents heading-link" heading-name="在视图外使用会话"><span class="tree-item-title">在视图外使用会话</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#管理会话"><div class="tree-item-contents heading-link" heading-name="管理会话"><span class="tree-item-title">管理会话</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#扩展数据库后端"><div class="tree-item-contents heading-link" heading-name="扩展数据库后端"><span class="tree-item-title">扩展数据库后端</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#疑问"><div class="tree-item-contents heading-link" heading-name="疑问"><span class="tree-item-title">疑问</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#消息"><div class="tree-item-contents heading-link" heading-name="消息"><span class="tree-item-title">消息</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#使用消息"><div class="tree-item-contents heading-link" heading-name="使用消息"><span class="tree-item-title">使用消息</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#信号"><div class="tree-item-contents heading-link" heading-name="信号"><span class="tree-item-title">信号</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#安全"><div class="tree-item-contents heading-link" heading-name="安全"><span class="tree-item-title">安全</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#加密签名"><div class="tree-item-contents heading-link" heading-name="加密签名"><span class="tree-item-title">加密签名</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#CORS"><div class="tree-item-contents heading-link" heading-name="CORS"><span class="tree-item-title">CORS</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#CSRF"><div class="tree-item-contents heading-link" heading-name="CSRF"><span class="tree-item-title">CSRF</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#xsrf"><div class="tree-item-contents heading-link" heading-name="xsrf"><span class="tree-item-title">xsrf</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#序列化"><div class="tree-item-contents heading-link" heading-name="序列化"><span class="tree-item-title">序列化</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#性能"><div class="tree-item-contents heading-link" heading-name="性能"><span class="tree-item-title">性能</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#其他"><div class="tree-item-contents heading-link" heading-name="其他"><span class="tree-item-title">其他</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="4"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#分页"><div class="tree-item-contents heading-link" heading-name="分页"><span class="tree-item-title">分页</span></div></a><div class="tree-item-children nav-folder-children"></div></div><div class="tree-item" data-depth="3"><a class="tree-link" href="docs\草稿\后端\python\django\django-ex.html#实用技巧"><div class="tree-item-contents heading-link" heading-name="实用技巧"><span class="tree-item-title">实用技巧</span></div></a><div class="tree-item-children nav-folder-children"></div></div></div></div></div></div></div><script defer="">let rs = document.querySelector(".sidebar-right"); rs.classList.add("is-collapsed"); if (window.innerWidth > 768) rs.classList.remove("is-collapsed"); rs.style.setProperty("--sidebar-width", localStorage.getItem("sidebar-right-width"));</script></div></div></body></html>